(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Na(e,n){const a=new Set(e.split(","));return n?i=>a.has(i.toLowerCase()):i=>a.has(i)}const dt={},fi=[],$t=()=>{},Cc=()=>!1,kn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Fa=e=>e.startsWith("onUpdate:"),Rt=Object.assign,Ma=(e,n)=>{const a=e.indexOf(n);a>-1&&e.splice(a,1)},Rc=Object.prototype.hasOwnProperty,Je=(e,n)=>Rc.call(e,n),Ye=Array.isArray,Ni=e=>Rn(e)==="[object Map]",wc=e=>Rn(e)==="[object Set]",je=e=>typeof e=="function",wt=e=>typeof e=="string",Cn=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",Uo=e=>(yt(e)||je(e))&&je(e.then)&&je(e.catch),Lc=Object.prototype.toString,Rn=e=>Lc.call(e),Ic=e=>Rn(e).slice(8,-1),Oc=e=>Rn(e)==="[object Object]",Ba=e=>wt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Fi=Na(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wn=e=>{const n=Object.create(null);return a=>n[a]||(n[a]=e(a))},Pc=/-(\w)/g,pr=wn(e=>e.replace(Pc,(n,a)=>a?a.toUpperCase():"")),Dc=/\B([A-Z])/g,bi=wn(e=>e.replace(Dc,"-$1").toLowerCase()),Ln=wn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Jn=wn(e=>e?`on${Ln(e)}`:""),Ir=(e,n)=>!Object.is(e,n),ea=(e,n)=>{for(let a=0;a<e.length;a++)e[a](n)},En=(e,n,a)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:a})},Nc=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Ds;const Vo=()=>Ds||(Ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ki(e){if(Ye(e)){const n={};for(let a=0;a<e.length;a++){const i=e[a],r=wt(i)?Uc(i):Ki(i);if(r)for(const l in r)n[l]=r[l]}return n}else if(wt(e)||yt(e))return e}const Fc=/;(?![^(]*\))/g,Mc=/:([^]+)/,Bc=/\/\*[^]*?\*\//g;function Uc(e){const n={};return e.replace(Bc,"").split(Fc).forEach(a=>{if(a){const i=a.split(Mc);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function Ua(e){let n="";if(wt(e))n=e;else if(Ye(e))for(let a=0;a<e.length;a++){const i=Ua(e[a]);i&&(n+=i+" ")}else if(yt(e))for(const a in e)e[a]&&(n+=a+" ");return n.trim()}const Vc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kc=Na(Vc);function Ko(e){return!!e||e===""}/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tr;class Gc{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tr,!n&&tr&&(this.index=(tr.scopes||(tr.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const a=tr;try{return tr=this,n()}finally{tr=a}}}on(){tr=this}off(){tr=this.parent}stop(n){if(this._active){let a,i;for(a=0,i=this.effects.length;a<i;a++)this.effects[a].stop();for(a=0,i=this.cleanups.length;a<i;a++)this.cleanups[a]();if(this.scopes)for(a=0,i=this.scopes.length;a<i;a++)this.scopes[a].stop(!0);if(!this.detached&&this.parent&&!n){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Hc(e,n=tr){n&&n.active&&n.effects.push(e)}function jc(){return tr}let Xr;class Va{constructor(n,a,i,r){this.fn=n,this.trigger=a,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Hc(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ei();for(let n=0;n<this._depsLength;n++){const a=this.deps[n];if(a.computed&&(Yc(a.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ti()}return this._dirtyLevel>=4}set dirty(n){this._dirtyLevel=n?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=wr,a=Xr;try{return wr=!0,Xr=this,this._runnings++,Ns(this),this.fn()}finally{Fs(this),this._runnings--,Xr=a,wr=n}}stop(){var n;this.active&&(Ns(this),Fs(this),(n=this.onStop)==null||n.call(this),this.active=!1)}}function Yc(e){return e.value}function Ns(e){e._trackId++,e._depsLength=0}function Fs(e){if(e.deps.length>e._depsLength){for(let n=e._depsLength;n<e.deps.length;n++)Go(e.deps[n],e);e.deps.length=e._depsLength}}function Go(e,n){const a=e.get(n);a!==void 0&&n._trackId!==a&&(e.delete(n),e.size===0&&e.cleanup())}let wr=!0,ga=0;const Ho=[];function ei(){Ho.push(wr),wr=!1}function ti(){const e=Ho.pop();wr=e===void 0?!0:e}function Ka(){ga++}function Ga(){for(ga--;!ga&&pa.length;)pa.shift()()}function jo(e,n,a){if(n.get(e)!==e._trackId){n.set(e,e._trackId);const i=e.deps[e._depsLength];i!==n?(i&&Go(i,e),e.deps[e._depsLength++]=n):e._depsLength++}}const pa=[];function Yo(e,n,a){Ka();for(const i of e.keys()){let r;i._dirtyLevel<n&&(r??(r=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=n),i._shouldSchedule&&(r??(r=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&pa.push(i.scheduler)))}Ga()}const Wo=(e,n)=>{const a=new Map;return a.cleanup=e,a.computed=n,a},va=new WeakMap,qr=Symbol(""),ma=Symbol("");function Ut(e,n,a){if(wr&&Xr){let i=va.get(e);i||va.set(e,i=new Map);let r=i.get(a);r||i.set(a,r=Wo(()=>i.delete(a))),jo(Xr,r)}}function _r(e,n,a,i,r,l){const f=va.get(e);if(!f)return;let g=[];if(n==="clear")g=[...f.values()];else if(a==="length"&&Ye(e)){const T=Number(i);f.forEach((m,y)=>{(y==="length"||!Cn(y)&&y>=T)&&g.push(m)})}else switch(a!==void 0&&g.push(f.get(a)),n){case"add":Ye(e)?Ba(a)&&g.push(f.get("length")):(g.push(f.get(qr)),Ni(e)&&g.push(f.get(ma)));break;case"delete":Ye(e)||(g.push(f.get(qr)),Ni(e)&&g.push(f.get(ma)));break;case"set":Ni(e)&&g.push(f.get(qr));break}Ka();for(const T of g)T&&Yo(T,4);Ga()}const Wc=Na("__proto__,__v_isRef,__isVue"),zo=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Cn)),Ms=zc();function zc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...a){const i=tt(this);for(let l=0,f=this.length;l<f;l++)Ut(i,"get",l+"");const r=i[n](...a);return r===-1||r===!1?i[n](...a.map(tt)):r}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...a){ei(),Ka();const i=tt(this)[n].apply(this,a);return Ga(),ti(),i}}),e}function $c(e){const n=tt(this);return Ut(n,"has",e),n.hasOwnProperty(e)}class $o{constructor(n=!1,a=!1){this._isReadonly=n,this._isShallow=a}get(n,a,i){const r=this._isReadonly,l=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return l;if(a==="__v_raw")return i===(r?l?lf:Qo:l?Zo:qo).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(i)?n:void 0;const f=Ye(n);if(!r){if(f&&Je(Ms,a))return Reflect.get(Ms,a,i);if(a==="hasOwnProperty")return $c}const g=Reflect.get(n,a,i);return(Cn(a)?zo.has(a):Wc(a))||(r||Ut(n,"get",a),l)?g:Vt(g)?f&&Ba(a)?g:g.value:yt(g)?r?Jo(g):On(g):g}}class Xo extends $o{constructor(n=!1){super(!1,n)}set(n,a,i,r){let l=n[a];if(!this._isShallow){const T=mi(l);if(!_n(i)&&!mi(i)&&(l=tt(l),i=tt(i)),!Ye(n)&&Vt(l)&&!Vt(i))return T?!1:(l.value=i,!0)}const f=Ye(n)&&Ba(a)?Number(a)<n.length:Je(n,a),g=Reflect.set(n,a,i,r);return n===tt(r)&&(f?Ir(i,l)&&_r(n,"set",a,i):_r(n,"add",a,i)),g}deleteProperty(n,a){const i=Je(n,a);n[a];const r=Reflect.deleteProperty(n,a);return r&&i&&_r(n,"delete",a,void 0),r}has(n,a){const i=Reflect.has(n,a);return(!Cn(a)||!zo.has(a))&&Ut(n,"has",a),i}ownKeys(n){return Ut(n,"iterate",Ye(n)?"length":qr),Reflect.ownKeys(n)}}class Xc extends $o{constructor(n=!1){super(!0,n)}set(n,a){return!0}deleteProperty(n,a){return!0}}const qc=new Xo,Zc=new Xc,Qc=new Xo(!0),Ha=e=>e,In=e=>Reflect.getPrototypeOf(e);function sn(e,n,a=!1,i=!1){e=e.__v_raw;const r=tt(e),l=tt(n);a||(Ir(n,l)&&Ut(r,"get",n),Ut(r,"get",l));const{has:f}=In(r),g=i?Ha:a?Wa:Gi;if(f.call(r,n))return g(e.get(n));if(f.call(r,l))return g(e.get(l));e!==r&&e.get(n)}function on(e,n=!1){const a=this.__v_raw,i=tt(a),r=tt(e);return n||(Ir(e,r)&&Ut(i,"has",e),Ut(i,"has",r)),e===r?a.has(e):a.has(e)||a.has(r)}function ln(e,n=!1){return e=e.__v_raw,!n&&Ut(tt(e),"iterate",qr),Reflect.get(e,"size",e)}function Bs(e){e=tt(e);const n=tt(this);return In(n).has.call(n,e)||(n.add(e),_r(n,"add",e,e)),this}function Us(e,n){n=tt(n);const a=tt(this),{has:i,get:r}=In(a);let l=i.call(a,e);l||(e=tt(e),l=i.call(a,e));const f=r.call(a,e);return a.set(e,n),l?Ir(n,f)&&_r(a,"set",e,n):_r(a,"add",e,n),this}function Vs(e){const n=tt(this),{has:a,get:i}=In(n);let r=a.call(n,e);r||(e=tt(e),r=a.call(n,e)),i&&i.call(n,e);const l=n.delete(e);return r&&_r(n,"delete",e,void 0),l}function Ks(){const e=tt(this),n=e.size!==0,a=e.clear();return n&&_r(e,"clear",void 0,void 0),a}function un(e,n){return function(i,r){const l=this,f=l.__v_raw,g=tt(f),T=n?Ha:e?Wa:Gi;return!e&&Ut(g,"iterate",qr),f.forEach((m,y)=>i.call(r,T(m),T(y),l))}}function cn(e,n,a){return function(...i){const r=this.__v_raw,l=tt(r),f=Ni(l),g=e==="entries"||e===Symbol.iterator&&f,T=e==="keys"&&f,m=r[e](...i),y=a?Ha:n?Wa:Gi;return!n&&Ut(l,"iterate",T?ma:qr),{next(){const{value:U,done:w}=m.next();return w?{value:U,done:w}:{value:g?[y(U[0]),y(U[1])]:y(U),done:w}},[Symbol.iterator](){return this}}}}function xr(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Jc(){const e={get(l){return sn(this,l)},get size(){return ln(this)},has:on,add:Bs,set:Us,delete:Vs,clear:Ks,forEach:un(!1,!1)},n={get(l){return sn(this,l,!1,!0)},get size(){return ln(this)},has:on,add:Bs,set:Us,delete:Vs,clear:Ks,forEach:un(!1,!0)},a={get(l){return sn(this,l,!0)},get size(){return ln(this,!0)},has(l){return on.call(this,l,!0)},add:xr("add"),set:xr("set"),delete:xr("delete"),clear:xr("clear"),forEach:un(!0,!1)},i={get(l){return sn(this,l,!0,!0)},get size(){return ln(this,!0)},has(l){return on.call(this,l,!0)},add:xr("add"),set:xr("set"),delete:xr("delete"),clear:xr("clear"),forEach:un(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=cn(l,!1,!1),a[l]=cn(l,!0,!1),n[l]=cn(l,!1,!0),i[l]=cn(l,!0,!0)}),[e,a,n,i]}const[ef,tf,rf,nf]=Jc();function ja(e,n){const a=n?e?nf:rf:e?tf:ef;return(i,r,l)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Je(a,r)&&r in i?a:i,r,l)}const af={get:ja(!1,!1)},sf={get:ja(!1,!0)},of={get:ja(!0,!1)},qo=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,lf=new WeakMap;function uf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cf(e){return e.__v_skip||!Object.isExtensible(e)?0:uf(Ic(e))}function On(e){return mi(e)?e:Ya(e,!1,qc,af,qo)}function ff(e){return Ya(e,!1,Qc,sf,Zo)}function Jo(e){return Ya(e,!0,Zc,of,Qo)}function Ya(e,n,a,i,r){if(!yt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const l=r.get(e);if(l)return l;const f=cf(e);if(f===0)return e;const g=new Proxy(e,f===2?i:a);return r.set(e,g),g}function di(e){return mi(e)?di(e.__v_raw):!!(e&&e.__v_isReactive)}function mi(e){return!!(e&&e.__v_isReadonly)}function _n(e){return!!(e&&e.__v_isShallow)}function el(e){return di(e)||mi(e)}function tt(e){const n=e&&e.__v_raw;return n?tt(n):e}function tl(e){return Object.isExtensible(e)&&En(e,"__v_skip",!0),e}const Gi=e=>yt(e)?On(e):e,Wa=e=>yt(e)?Jo(e):e;class rl{constructor(n,a,i,r){this.getter=n,this._setter=a,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Va(()=>n(this._value),()=>pn(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const n=tt(this);return(!n._cacheable||n.effect.dirty)&&Ir(n._value,n._value=n.effect.run())&&pn(n,4),il(n),n.effect._dirtyLevel>=2&&pn(n,2),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}}function df(e,n,a=!1){let i,r;const l=je(e);return l?(i=e,r=$t):(i=e.get,r=e.set),new rl(i,r,l||!r,a)}function il(e){var n;wr&&Xr&&(e=tt(e),jo(Xr,(n=e.dep)!=null?n:e.dep=Wo(()=>e.dep=void 0,e instanceof rl?e:void 0)))}function pn(e,n=4,a){e=tt(e);const i=e.dep;i&&Yo(i,n)}function Vt(e){return!!(e&&e.__v_isRef===!0)}function hf(e){return gf(e,!1)}function gf(e,n){return Vt(e)?e:new pf(e,n)}class pf{constructor(n,a){this.__v_isShallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?n:tt(n),this._value=a?n:Gi(n)}get value(){return il(this),this._value}set value(n){const a=this.__v_isShallow||_n(n)||mi(n);n=a?n:tt(n),Ir(n,this._rawValue)&&(this._rawValue=n,this._value=a?n:Gi(n),pn(this,4))}}function vf(e){return Vt(e)?e.value:e}const mf={get:(e,n,a)=>vf(Reflect.get(e,n,a)),set:(e,n,a,i)=>{const r=e[n];return Vt(r)&&!Vt(a)?(r.value=a,!0):Reflect.set(e,n,a,i)}};function nl(e){return di(e)?e:new Proxy(e,mf)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lr(e,n,a,i){try{return i?e(...i):e()}catch(r){Pn(r,n,a)}}function ar(e,n,a,i){if(je(e)){const l=Lr(e,n,a,i);return l&&Uo(l)&&l.catch(f=>{Pn(f,n,a)}),l}const r=[];for(let l=0;l<e.length;l++)r.push(ar(e[l],n,a,i));return r}function Pn(e,n,a,i=!0){const r=n?n.vnode:null;if(n){let l=n.parent;const f=n.proxy,g=`https://vuejs.org/error-reference/#runtime-${a}`;for(;l;){const m=l.ec;if(m){for(let y=0;y<m.length;y++)if(m[y](e,f,g)===!1)return}l=l.parent}const T=n.appContext.config.errorHandler;if(T){Lr(T,null,10,[e,f,g]);return}}yf(e,a,r,i)}function yf(e,n,a,i=!0){console.error(e)}let Hi=!1,ya=!1;const Ot=[];let dr=0;const hi=[];let Sr=null,Wr=0;const al=Promise.resolve();let za=null;function Af(e){const n=za||al;return e?n.then(this?e.bind(this):e):n}function Ef(e){let n=dr+1,a=Ot.length;for(;n<a;){const i=n+a>>>1,r=Ot[i],l=ji(r);l<e||l===e&&r.pre?n=i+1:a=i}return n}function $a(e){(!Ot.length||!Ot.includes(e,Hi&&e.allowRecurse?dr+1:dr))&&(e.id==null?Ot.push(e):Ot.splice(Ef(e.id),0,e),sl())}function sl(){!Hi&&!ya&&(ya=!0,za=al.then(ll))}function _f(e){const n=Ot.indexOf(e);n>dr&&Ot.splice(n,1)}function bf(e){Ye(e)?hi.push(...e):(!Sr||!Sr.includes(e,e.allowRecurse?Wr+1:Wr))&&hi.push(e),sl()}function Gs(e,n,a=Hi?dr+1:0){for(;a<Ot.length;a++){const i=Ot[a];if(i&&i.pre){if(e&&i.id!==e.uid)continue;Ot.splice(a,1),a--,i()}}}function ol(e){if(hi.length){const n=[...new Set(hi)].sort((a,i)=>ji(a)-ji(i));if(hi.length=0,Sr){Sr.push(...n);return}for(Sr=n,Wr=0;Wr<Sr.length;Wr++)Sr[Wr]();Sr=null,Wr=0}}const ji=e=>e.id==null?1/0:e.id,Tf=(e,n)=>{const a=ji(e)-ji(n);if(a===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return a};function ll(e){ya=!1,Hi=!0,Ot.sort(Tf);try{for(dr=0;dr<Ot.length;dr++){const n=Ot[dr];n&&n.active!==!1&&Lr(n,null,14)}}finally{dr=0,Ot.length=0,ol(),Hi=!1,za=null,(Ot.length||hi.length)&&ll()}}function xf(e,n,...a){if(e.isUnmounted)return;const i=e.vnode.props||dt;let r=a;const l=n.startsWith("update:"),f=l&&n.slice(7);if(f&&f in i){const y=`${f==="modelValue"?"model":f}Modifiers`,{number:U,trim:w}=i[y]||dt;w&&(r=a.map(I=>wt(I)?I.trim():I)),U&&(r=a.map(Nc))}let g,T=i[g=Jn(n)]||i[g=Jn(pr(n))];!T&&l&&(T=i[g=Jn(bi(n))]),T&&ar(T,e,6,r);const m=i[g+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[g])return;e.emitted[g]=!0,ar(m,e,6,r)}}function ul(e,n,a=!1){const i=n.emitsCache,r=i.get(e);if(r!==void 0)return r;const l=e.emits;let f={},g=!1;if(!je(e)){const T=m=>{const y=ul(m,n,!0);y&&(g=!0,Rt(f,y))};!a&&n.mixins.length&&n.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}return!l&&!g?(yt(e)&&i.set(e,null),null):(Ye(l)?l.forEach(T=>f[T]=null):Rt(f,l),yt(e)&&i.set(e,f),f)}function Dn(e,n){return!e||!kn(n)?!1:(n=n.slice(2).replace(/Once$/,""),Je(e,n[0].toLowerCase()+n.slice(1))||Je(e,bi(n))||Je(e,n))}let rr=null,Nn=null;function bn(e){const n=rr;return rr=e,Nn=e&&e.type.__scopeId||null,n}function Sf(e){Nn=e}function kf(){Nn=null}function Cf(e,n=rr,a){if(!n||e._n)return e;const i=(...r)=>{i._d&&eo(-1);const l=bn(n);let f;try{f=e(...r)}finally{bn(l),i._d&&eo(1)}return f};return i._n=!0,i._c=!0,i._d=!0,i}function ta(e){const{type:n,vnode:a,proxy:i,withProxy:r,props:l,propsOptions:[f],slots:g,attrs:T,emit:m,render:y,renderCache:U,data:w,setupState:I,ctx:K,inheritAttrs:F}=e;let j,X;const $=bn(e);try{if(a.shapeFlag&4){const ee=r||i,te=ee;j=fr(y.call(te,ee,U,l,I,w,K)),X=T}else{const ee=n;j=fr(ee.length>1?ee(l,{attrs:T,slots:g,emit:m}):ee(l,null)),X=n.props?T:Rf(T)}}catch(ee){Ui.length=0,Pn(ee,e,1),j=or(Zr)}let re=j;if(X&&F!==!1){const ee=Object.keys(X),{shapeFlag:te}=re;ee.length&&te&7&&(f&&ee.some(Fa)&&(X=wf(X,f)),re=yi(re,X))}return a.dirs&&(re=yi(re),re.dirs=re.dirs?re.dirs.concat(a.dirs):a.dirs),a.transition&&(re.transition=a.transition),j=re,bn($),j}const Rf=e=>{let n;for(const a in e)(a==="class"||a==="style"||kn(a))&&((n||(n={}))[a]=e[a]);return n},wf=(e,n)=>{const a={};for(const i in e)(!Fa(i)||!(i.slice(9)in n))&&(a[i]=e[i]);return a};function Lf(e,n,a){const{props:i,children:r,component:l}=e,{props:f,children:g,patchFlag:T}=n,m=l.emitsOptions;if(n.dirs||n.transition)return!0;if(a&&T>=0){if(T&1024)return!0;if(T&16)return i?Hs(i,f,m):!!f;if(T&8){const y=n.dynamicProps;for(let U=0;U<y.length;U++){const w=y[U];if(f[w]!==i[w]&&!Dn(m,w))return!0}}}else return(r||g)&&(!g||!g.$stable)?!0:i===f?!1:i?f?Hs(i,f,m):!0:!!f;return!1}function Hs(e,n,a){const i=Object.keys(n);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const l=i[r];if(n[l]!==e[l]&&!Dn(a,l))return!0}return!1}function If({vnode:e,parent:n},a){for(;n;){const i=n.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=n.vnode).el=a,n=n.parent;else break}}const cl="components";function js(e,n){return Pf(cl,e,!0,n)||e}const Of=Symbol.for("v-ndc");function Pf(e,n,a=!0,i=!1){const r=rr||Pt;if(r){const l=r.type;if(e===cl){const g=Rd(l,!1);if(g&&(g===n||g===pr(n)||g===Ln(pr(n))))return l}const f=Ys(r[e]||l[e],n)||Ys(r.appContext[e],n);return!f&&i?l:f}}function Ys(e,n){return e&&(e[n]||e[pr(n)]||e[Ln(pr(n))])}const Df=e=>e.__isSuspense;function Nf(e,n){n&&n.pendingBranch?Ye(e)?n.effects.push(...e):n.effects.push(e):bf(e)}const Ff=Symbol.for("v-scx"),Mf=()=>mn(Ff),fn={};function ra(e,n,a){return fl(e,n,a)}function fl(e,n,{immediate:a,deep:i,flush:r,once:l,onTrack:f,onTrigger:g}=dt){if(n&&l){const se=n;n=(...pe)=>{se(...pe),te()}}const T=Pt,m=se=>i===!0?se:ci(se,i===!1?1:void 0);let y,U=!1,w=!1;if(Vt(e)?(y=()=>e.value,U=_n(e)):di(e)?(y=()=>m(e),U=!0):Ye(e)?(w=!0,U=e.some(se=>di(se)||_n(se)),y=()=>e.map(se=>{if(Vt(se))return se.value;if(di(se))return m(se);if(je(se))return Lr(se,T,2)})):je(e)?n?y=()=>Lr(e,T,2):y=()=>(I&&I(),ar(e,T,3,[K])):y=$t,n&&i){const se=y;y=()=>ci(se())}let I,K=se=>{I=re.onStop=()=>{Lr(se,T,4),I=re.onStop=void 0}},F;if(Un)if(K=$t,n?a&&ar(n,T,3,[y(),w?[]:void 0,K]):y(),r==="sync"){const se=Mf();F=se.__watcherHandles||(se.__watcherHandles=[])}else return $t;let j=w?new Array(e.length).fill(fn):fn;const X=()=>{if(!(!re.active||!re.dirty))if(n){const se=re.run();(i||U||(w?se.some((pe,_e)=>Ir(pe,j[_e])):Ir(se,j)))&&(I&&I(),ar(n,T,3,[se,j===fn?void 0:w&&j[0]===fn?[]:j,K]),j=se)}else re.run()};X.allowRecurse=!!n;let $;r==="sync"?$=X:r==="post"?$=()=>Bt(X,T&&T.suspense):(X.pre=!0,T&&(X.id=T.uid),$=()=>$a(X));const re=new Va(y,$t,$),ee=jc(),te=()=>{re.stop(),ee&&Ma(ee.effects,re)};return n?a?X():j=re.run():r==="post"?Bt(re.run.bind(re),T&&T.suspense):re.run(),F&&F.push(te),te}function Bf(e,n,a){const i=this.proxy,r=wt(e)?e.includes(".")?dl(i,e):()=>i[e]:e.bind(i,i);let l;je(n)?l=n:(l=n.handler,a=n);const f=zi(this),g=fl(r,l.bind(i),a);return f(),g}function dl(e,n){const a=n.split(".");return()=>{let i=e;for(let r=0;r<a.length&&i;r++)i=i[a[r]];return i}}function ci(e,n,a=0,i){if(!yt(e)||e.__v_skip)return e;if(n&&n>0){if(a>=n)return e;a++}if(i=i||new Set,i.has(e))return e;if(i.add(e),Vt(e))ci(e.value,n,a,i);else if(Ye(e))for(let r=0;r<e.length;r++)ci(e[r],n,a,i);else if(wc(e)||Ni(e))e.forEach(r=>{ci(r,n,a,i)});else if(Oc(e))for(const r in e)ci(e[r],n,a,i);return e}function Hr(e,n,a,i){const r=e.dirs,l=n&&n.dirs;for(let f=0;f<r.length;f++){const g=r[f];l&&(g.oldValue=l[f].value);let T=g.dir[i];T&&(ei(),ar(T,a,8,[e.el,g,e,n]),ti())}}/*! #__NO_SIDE_EFFECTS__ */function Xa(e,n){return je(e)?Rt({name:e.name},n,{setup:e}):e}const vn=e=>!!e.type.__asyncLoader,hl=e=>e.type.__isKeepAlive;function Uf(e,n){gl(e,"a",n)}function Vf(e,n){gl(e,"da",n)}function gl(e,n,a=Pt){const i=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Fn(n,i,a),a){let r=a.parent;for(;r&&r.parent;)hl(r.parent.vnode)&&Kf(i,n,a,r),r=r.parent}}function Kf(e,n,a,i){const r=Fn(n,e,i,!0);ml(()=>{Ma(i[n],r)},a)}function Fn(e,n,a=Pt,i=!1){if(a){const r=a[e]||(a[e]=[]),l=n.__weh||(n.__weh=(...f)=>{if(a.isUnmounted)return;ei();const g=zi(a),T=ar(n,a,e,f);return g(),ti(),T});return i?r.unshift(l):r.push(l),l}}const br=e=>(n,a=Pt)=>(!Un||e==="sp")&&Fn(e,(...i)=>n(...i),a),Gf=br("bm"),pl=br("m"),Hf=br("bu"),jf=br("u"),vl=br("bum"),ml=br("um"),Yf=br("sp"),Wf=br("rtg"),zf=br("rtc");function $f(e,n=Pt){Fn("ec",e,n)}const Aa=e=>e?wl(e)?Ja(e)||e.proxy:Aa(e.parent):null,Mi=Rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Aa(e.parent),$root:e=>Aa(e.root),$emit:e=>e.emit,$options:e=>qa(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,$a(e.update)}),$nextTick:e=>e.n||(e.n=Af.bind(e.proxy)),$watch:e=>Bf.bind(e)}),ia=(e,n)=>e!==dt&&!e.__isScriptSetup&&Je(e,n),Xf={get({_:e},n){const{ctx:a,setupState:i,data:r,props:l,accessCache:f,type:g,appContext:T}=e;let m;if(n[0]!=="$"){const I=f[n];if(I!==void 0)switch(I){case 1:return i[n];case 2:return r[n];case 4:return a[n];case 3:return l[n]}else{if(ia(i,n))return f[n]=1,i[n];if(r!==dt&&Je(r,n))return f[n]=2,r[n];if((m=e.propsOptions[0])&&Je(m,n))return f[n]=3,l[n];if(a!==dt&&Je(a,n))return f[n]=4,a[n];Ea&&(f[n]=0)}}const y=Mi[n];let U,w;if(y)return n==="$attrs"&&Ut(e,"get",n),y(e);if((U=g.__cssModules)&&(U=U[n]))return U;if(a!==dt&&Je(a,n))return f[n]=4,a[n];if(w=T.config.globalProperties,Je(w,n))return w[n]},set({_:e},n,a){const{data:i,setupState:r,ctx:l}=e;return ia(r,n)?(r[n]=a,!0):i!==dt&&Je(i,n)?(i[n]=a,!0):Je(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(l[n]=a,!0)},has({_:{data:e,setupState:n,accessCache:a,ctx:i,appContext:r,propsOptions:l}},f){let g;return!!a[f]||e!==dt&&Je(e,f)||ia(n,f)||(g=l[0])&&Je(g,f)||Je(i,f)||Je(Mi,f)||Je(r.config.globalProperties,f)},defineProperty(e,n,a){return a.get!=null?e._.accessCache[n]=0:Je(a,"value")&&this.set(e,n,a.value,null),Reflect.defineProperty(e,n,a)}};function Ws(e){return Ye(e)?e.reduce((n,a)=>(n[a]=null,n),{}):e}let Ea=!0;function qf(e){const n=qa(e),a=e.proxy,i=e.ctx;Ea=!1,n.beforeCreate&&zs(n.beforeCreate,e,"bc");const{data:r,computed:l,methods:f,watch:g,provide:T,inject:m,created:y,beforeMount:U,mounted:w,beforeUpdate:I,updated:K,activated:F,deactivated:j,beforeDestroy:X,beforeUnmount:$,destroyed:re,unmounted:ee,render:te,renderTracked:se,renderTriggered:pe,errorCaptured:_e,serverPrefetch:W,expose:z,inheritAttrs:ge,components:Z,directives:q,filters:ue}=n;if(m&&Zf(m,i,null),f)for(const ye in f){const be=f[ye];je(be)&&(i[ye]=be.bind(a))}if(r){const ye=r.call(a,a);yt(ye)&&(e.data=On(ye))}if(Ea=!0,l)for(const ye in l){const be=l[ye],Ce=je(be)?be.bind(a,a):je(be.get)?be.get.bind(a,a):$t,De=!je(be)&&je(be.set)?be.set.bind(a):$t,Ie=Ld({get:Ce,set:De});Object.defineProperty(i,ye,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:ke=>Ie.value=ke})}if(g)for(const ye in g)yl(g[ye],i,a,ye);if(T){const ye=je(T)?T.call(a):T;Reflect.ownKeys(ye).forEach(be=>{id(be,ye[be])})}y&&zs(y,e,"c");function me(ye,be){Ye(be)?be.forEach(Ce=>ye(Ce.bind(a))):be&&ye(be.bind(a))}if(me(Gf,U),me(pl,w),me(Hf,I),me(jf,K),me(Uf,F),me(Vf,j),me($f,_e),me(zf,se),me(Wf,pe),me(vl,$),me(ml,ee),me(Yf,W),Ye(z))if(z.length){const ye=e.exposed||(e.exposed={});z.forEach(be=>{Object.defineProperty(ye,be,{get:()=>a[be],set:Ce=>a[be]=Ce})})}else e.exposed||(e.exposed={});te&&e.render===$t&&(e.render=te),ge!=null&&(e.inheritAttrs=ge),Z&&(e.components=Z),q&&(e.directives=q)}function Zf(e,n,a=$t){Ye(e)&&(e=_a(e));for(const i in e){const r=e[i];let l;yt(r)?"default"in r?l=mn(r.from||i,r.default,!0):l=mn(r.from||i):l=mn(r),Vt(l)?Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:f=>l.value=f}):n[i]=l}}function zs(e,n,a){ar(Ye(e)?e.map(i=>i.bind(n.proxy)):e.bind(n.proxy),n,a)}function yl(e,n,a,i){const r=i.includes(".")?dl(a,i):()=>a[i];if(wt(e)){const l=n[e];je(l)&&ra(r,l)}else if(je(e))ra(r,e.bind(a));else if(yt(e))if(Ye(e))e.forEach(l=>yl(l,n,a,i));else{const l=je(e.handler)?e.handler.bind(a):n[e.handler];je(l)&&ra(r,l,e)}}function qa(e){const n=e.type,{mixins:a,extends:i}=n,{mixins:r,optionsCache:l,config:{optionMergeStrategies:f}}=e.appContext,g=l.get(n);let T;return g?T=g:!r.length&&!a&&!i?T=n:(T={},r.length&&r.forEach(m=>Tn(T,m,f,!0)),Tn(T,n,f)),yt(n)&&l.set(n,T),T}function Tn(e,n,a,i=!1){const{mixins:r,extends:l}=n;l&&Tn(e,l,a,!0),r&&r.forEach(f=>Tn(e,f,a,!0));for(const f in n)if(!(i&&f==="expose")){const g=Qf[f]||a&&a[f];e[f]=g?g(e[f],n[f]):n[f]}return e}const Qf={data:$s,props:Xs,emits:Xs,methods:Pi,computed:Pi,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:Pi,directives:Pi,watch:ed,provide:$s,inject:Jf};function $s(e,n){return n?e?function(){return Rt(je(e)?e.call(this,this):e,je(n)?n.call(this,this):n)}:n:e}function Jf(e,n){return Pi(_a(e),_a(n))}function _a(e){if(Ye(e)){const n={};for(let a=0;a<e.length;a++)n[e[a]]=e[a];return n}return e}function Ft(e,n){return e?[...new Set([].concat(e,n))]:n}function Pi(e,n){return e?Rt(Object.create(null),e,n):n}function Xs(e,n){return e?Ye(e)&&Ye(n)?[...new Set([...e,...n])]:Rt(Object.create(null),Ws(e),Ws(n??{})):n}function ed(e,n){if(!e)return n;if(!n)return e;const a=Rt(Object.create(null),e);for(const i in n)a[i]=Ft(e[i],n[i]);return a}function Al(){return{app:null,config:{isNativeTag:Cc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let td=0;function rd(e,n){return function(i,r=null){je(i)||(i=Rt({},i)),r!=null&&!yt(r)&&(r=null);const l=Al(),f=new WeakSet;let g=!1;const T=l.app={_uid:td++,_component:i,_props:r,_container:null,_context:l,_instance:null,version:Id,get config(){return l.config},set config(m){},use(m,...y){return f.has(m)||(m&&je(m.install)?(f.add(m),m.install(T,...y)):je(m)&&(f.add(m),m(T,...y))),T},mixin(m){return l.mixins.includes(m)||l.mixins.push(m),T},component(m,y){return y?(l.components[m]=y,T):l.components[m]},directive(m,y){return y?(l.directives[m]=y,T):l.directives[m]},mount(m,y,U){if(!g){const w=or(i,r);return w.appContext=l,U===!0?U="svg":U===!1&&(U=void 0),y&&n?n(w,m):e(w,m,U),g=!0,T._container=m,m.__vue_app__=T,Ja(w.component)||w.component.proxy}},unmount(){g&&(e(null,T._container),delete T._container.__vue_app__)},provide(m,y){return l.provides[m]=y,T},runWithContext(m){const y=Bi;Bi=T;try{return m()}finally{Bi=y}}};return T}}let Bi=null;function id(e,n){if(Pt){let a=Pt.provides;const i=Pt.parent&&Pt.parent.provides;i===a&&(a=Pt.provides=Object.create(i)),a[e]=n}}function mn(e,n,a=!1){const i=Pt||rr;if(i||Bi){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Bi._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return a&&je(n)?n.call(i&&i.proxy):n}}function nd(e,n,a,i=!1){const r={},l={};En(l,Bn,1),e.propsDefaults=Object.create(null),El(e,n,r,l);for(const f in e.propsOptions[0])f in r||(r[f]=void 0);a?e.props=i?r:ff(r):e.type.props?e.props=r:e.props=l,e.attrs=l}function ad(e,n,a,i){const{props:r,attrs:l,vnode:{patchFlag:f}}=e,g=tt(r),[T]=e.propsOptions;let m=!1;if((i||f>0)&&!(f&16)){if(f&8){const y=e.vnode.dynamicProps;for(let U=0;U<y.length;U++){let w=y[U];if(Dn(e.emitsOptions,w))continue;const I=n[w];if(T)if(Je(l,w))I!==l[w]&&(l[w]=I,m=!0);else{const K=pr(w);r[K]=ba(T,g,K,I,e,!1)}else I!==l[w]&&(l[w]=I,m=!0)}}}else{El(e,n,r,l)&&(m=!0);let y;for(const U in g)(!n||!Je(n,U)&&((y=bi(U))===U||!Je(n,y)))&&(T?a&&(a[U]!==void 0||a[y]!==void 0)&&(r[U]=ba(T,g,U,void 0,e,!0)):delete r[U]);if(l!==g)for(const U in l)(!n||!Je(n,U))&&(delete l[U],m=!0)}m&&_r(e,"set","$attrs")}function El(e,n,a,i){const[r,l]=e.propsOptions;let f=!1,g;if(n)for(let T in n){if(Fi(T))continue;const m=n[T];let y;r&&Je(r,y=pr(T))?!l||!l.includes(y)?a[y]=m:(g||(g={}))[y]=m:Dn(e.emitsOptions,T)||(!(T in i)||m!==i[T])&&(i[T]=m,f=!0)}if(l){const T=tt(a),m=g||dt;for(let y=0;y<l.length;y++){const U=l[y];a[U]=ba(r,T,U,m[U],e,!Je(m,U))}}return f}function ba(e,n,a,i,r,l){const f=e[a];if(f!=null){const g=Je(f,"default");if(g&&i===void 0){const T=f.default;if(f.type!==Function&&!f.skipFactory&&je(T)){const{propsDefaults:m}=r;if(a in m)i=m[a];else{const y=zi(r);i=m[a]=T.call(null,n),y()}}else i=T}f[0]&&(l&&!g?i=!1:f[1]&&(i===""||i===bi(a))&&(i=!0))}return i}function _l(e,n,a=!1){const i=n.propsCache,r=i.get(e);if(r)return r;const l=e.props,f={},g=[];let T=!1;if(!je(e)){const y=U=>{T=!0;const[w,I]=_l(U,n,!0);Rt(f,w),I&&g.push(...I)};!a&&n.mixins.length&&n.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!l&&!T)return yt(e)&&i.set(e,fi),fi;if(Ye(l))for(let y=0;y<l.length;y++){const U=pr(l[y]);qs(U)&&(f[U]=dt)}else if(l)for(const y in l){const U=pr(y);if(qs(U)){const w=l[y],I=f[U]=Ye(w)||je(w)?{type:w}:Rt({},w);if(I){const K=Js(Boolean,I.type),F=Js(String,I.type);I[0]=K>-1,I[1]=F<0||K<F,(K>-1||Je(I,"default"))&&g.push(U)}}}const m=[f,g];return yt(e)&&i.set(e,m),m}function qs(e){return e[0]!=="$"&&!Fi(e)}function Zs(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Qs(e,n){return Zs(e)===Zs(n)}function Js(e,n){return Ye(n)?n.findIndex(a=>Qs(a,e)):je(n)&&Qs(n,e)?0:-1}const bl=e=>e[0]==="_"||e==="$stable",Za=e=>Ye(e)?e.map(fr):[fr(e)],sd=(e,n,a)=>{if(n._n)return n;const i=Cf((...r)=>Za(n(...r)),a);return i._c=!1,i},Tl=(e,n,a)=>{const i=e._ctx;for(const r in e){if(bl(r))continue;const l=e[r];if(je(l))n[r]=sd(r,l,i);else if(l!=null){const f=Za(l);n[r]=()=>f}}},xl=(e,n)=>{const a=Za(n);e.slots.default=()=>a},od=(e,n)=>{if(e.vnode.shapeFlag&32){const a=n._;a?(e.slots=tt(n),En(n,"_",a)):Tl(n,e.slots={})}else e.slots={},n&&xl(e,n);En(e.slots,Bn,1)},ld=(e,n,a)=>{const{vnode:i,slots:r}=e;let l=!0,f=dt;if(i.shapeFlag&32){const g=n._;g?a&&g===1?l=!1:(Rt(r,n),!a&&g===1&&delete r._):(l=!n.$stable,Tl(n,r)),f=n}else n&&(xl(e,n),f={default:1});if(l)for(const g in r)!bl(g)&&f[g]==null&&delete r[g]};function Ta(e,n,a,i,r=!1){if(Ye(e)){e.forEach((w,I)=>Ta(w,n&&(Ye(n)?n[I]:n),a,i,r));return}if(vn(i)&&!r)return;const l=i.shapeFlag&4?Ja(i.component)||i.component.proxy:i.el,f=r?null:l,{i:g,r:T}=e,m=n&&n.r,y=g.refs===dt?g.refs={}:g.refs,U=g.setupState;if(m!=null&&m!==T&&(wt(m)?(y[m]=null,Je(U,m)&&(U[m]=null)):Vt(m)&&(m.value=null)),je(T))Lr(T,g,12,[f,y]);else{const w=wt(T),I=Vt(T);if(w||I){const K=()=>{if(e.f){const F=w?Je(U,T)?U[T]:y[T]:T.value;r?Ye(F)&&Ma(F,l):Ye(F)?F.includes(l)||F.push(l):w?(y[T]=[l],Je(U,T)&&(U[T]=y[T])):(T.value=[l],e.k&&(y[e.k]=T.value))}else w?(y[T]=f,Je(U,T)&&(U[T]=f)):I&&(T.value=f,e.k&&(y[e.k]=f))};f?(K.id=-1,Bt(K,a)):K()}}}const Bt=Nf;function ud(e){return cd(e)}function cd(e,n){const a=Vo();a.__VUE__=!0;const{insert:i,remove:r,patchProp:l,createElement:f,createText:g,createComment:T,setText:m,setElementText:y,parentNode:U,nextSibling:w,setScopeId:I=$t,insertStaticContent:K}=e,F=(B,H,Q,ce=null,le=null,A=null,N=void 0,_=null,R=!!H.dynamicChildren)=>{if(B===H)return;B&&!Oi(B,H)&&(ce=Me(B),ke(B,le,A,!0),B=null),H.patchFlag===-2&&(R=!1,H.dynamicChildren=null);const{type:x,ref:v,shapeFlag:k}=H;switch(x){case Mn:j(B,H,Q,ce);break;case Zr:X(B,H,Q,ce);break;case aa:B==null&&$(H,Q,ce,N);break;case Ar:Z(B,H,Q,ce,le,A,N,_,R);break;default:k&1?te(B,H,Q,ce,le,A,N,_,R):k&6?q(B,H,Q,ce,le,A,N,_,R):(k&64||k&128)&&x.process(B,H,Q,ce,le,A,N,_,R,ct)}v!=null&&le&&Ta(v,B&&B.ref,A,H||B,!H)},j=(B,H,Q,ce)=>{if(B==null)i(H.el=g(H.children),Q,ce);else{const le=H.el=B.el;H.children!==B.children&&m(le,H.children)}},X=(B,H,Q,ce)=>{B==null?i(H.el=T(H.children||""),Q,ce):H.el=B.el},$=(B,H,Q,ce)=>{[B.el,B.anchor]=K(B.children,H,Q,ce,B.el,B.anchor)},re=({el:B,anchor:H},Q,ce)=>{let le;for(;B&&B!==H;)le=w(B),i(B,Q,ce),B=le;i(H,Q,ce)},ee=({el:B,anchor:H})=>{let Q;for(;B&&B!==H;)Q=w(B),r(B),B=Q;r(H)},te=(B,H,Q,ce,le,A,N,_,R)=>{H.type==="svg"?N="svg":H.type==="math"&&(N="mathml"),B==null?se(H,Q,ce,le,A,N,_,R):W(B,H,le,A,N,_,R)},se=(B,H,Q,ce,le,A,N,_)=>{let R,x;const{props:v,shapeFlag:k,transition:L,dirs:D}=B;if(R=B.el=f(B.type,A,v&&v.is,v),k&8?y(R,B.children):k&16&&_e(B.children,R,null,ce,le,na(B,A),N,_),D&&Hr(B,null,ce,"created"),pe(R,B,B.scopeId,N,ce),v){for(const V in v)V!=="value"&&!Fi(V)&&l(R,V,null,v[V],A,B.children,ce,le,ut);"value"in v&&l(R,"value",null,v.value,A),(x=v.onVnodeBeforeMount)&&cr(x,ce,B)}D&&Hr(B,null,ce,"beforeMount");const M=fd(le,L);M&&L.beforeEnter(R),i(R,H,Q),((x=v&&v.onVnodeMounted)||M||D)&&Bt(()=>{x&&cr(x,ce,B),M&&L.enter(R),D&&Hr(B,null,ce,"mounted")},le)},pe=(B,H,Q,ce,le)=>{if(Q&&I(B,Q),ce)for(let A=0;A<ce.length;A++)I(B,ce[A]);if(le){let A=le.subTree;if(H===A){const N=le.vnode;pe(B,N,N.scopeId,N.slotScopeIds,le.parent)}}},_e=(B,H,Q,ce,le,A,N,_,R=0)=>{for(let x=R;x<B.length;x++){const v=B[x]=_?kr(B[x]):fr(B[x]);F(null,v,H,Q,ce,le,A,N,_)}},W=(B,H,Q,ce,le,A,N)=>{const _=H.el=B.el;let{patchFlag:R,dynamicChildren:x,dirs:v}=H;R|=B.patchFlag&16;const k=B.props||dt,L=H.props||dt;let D;if(Q&&jr(Q,!1),(D=L.onVnodeBeforeUpdate)&&cr(D,Q,H,B),v&&Hr(H,B,Q,"beforeUpdate"),Q&&jr(Q,!0),x?z(B.dynamicChildren,x,_,Q,ce,na(H,le),A):N||be(B,H,_,null,Q,ce,na(H,le),A,!1),R>0){if(R&16)ge(_,H,k,L,Q,ce,le);else if(R&2&&k.class!==L.class&&l(_,"class",null,L.class,le),R&4&&l(_,"style",k.style,L.style,le),R&8){const M=H.dynamicProps;for(let V=0;V<M.length;V++){const Y=M[V],ie=k[Y],oe=L[Y];(oe!==ie||Y==="value")&&l(_,Y,ie,oe,le,B.children,Q,ce,ut)}}R&1&&B.children!==H.children&&y(_,H.children)}else!N&&x==null&&ge(_,H,k,L,Q,ce,le);((D=L.onVnodeUpdated)||v)&&Bt(()=>{D&&cr(D,Q,H,B),v&&Hr(H,B,Q,"updated")},ce)},z=(B,H,Q,ce,le,A,N)=>{for(let _=0;_<H.length;_++){const R=B[_],x=H[_],v=R.el&&(R.type===Ar||!Oi(R,x)||R.shapeFlag&70)?U(R.el):Q;F(R,x,v,null,ce,le,A,N,!0)}},ge=(B,H,Q,ce,le,A,N)=>{if(Q!==ce){if(Q!==dt)for(const _ in Q)!Fi(_)&&!(_ in ce)&&l(B,_,Q[_],null,N,H.children,le,A,ut);for(const _ in ce){if(Fi(_))continue;const R=ce[_],x=Q[_];R!==x&&_!=="value"&&l(B,_,x,R,N,H.children,le,A,ut)}"value"in ce&&l(B,"value",Q.value,ce.value,N)}},Z=(B,H,Q,ce,le,A,N,_,R)=>{const x=H.el=B?B.el:g(""),v=H.anchor=B?B.anchor:g("");let{patchFlag:k,dynamicChildren:L,slotScopeIds:D}=H;D&&(_=_?_.concat(D):D),B==null?(i(x,Q,ce),i(v,Q,ce),_e(H.children||[],Q,v,le,A,N,_,R)):k>0&&k&64&&L&&B.dynamicChildren?(z(B.dynamicChildren,L,Q,le,A,N,_),(H.key!=null||le&&H===le.subTree)&&Sl(B,H,!0)):be(B,H,Q,v,le,A,N,_,R)},q=(B,H,Q,ce,le,A,N,_,R)=>{H.slotScopeIds=_,B==null?H.shapeFlag&512?le.ctx.activate(H,Q,ce,N,R):ue(H,Q,ce,le,A,N,R):Te(B,H,R)},ue=(B,H,Q,ce,le,A,N)=>{const _=B.component=Td(B,ce,le);if(hl(B)&&(_.ctx.renderer=ct),xd(_),_.asyncDep){if(le&&le.registerDep(_,me),!B.el){const R=_.subTree=or(Zr);X(null,R,H,Q)}}else me(_,B,H,Q,le,A,N)},Te=(B,H,Q)=>{const ce=H.component=B.component;if(Lf(B,H,Q))if(ce.asyncDep&&!ce.asyncResolved){ye(ce,H,Q);return}else ce.next=H,_f(ce.update),ce.effect.dirty=!0,ce.update();else H.el=B.el,ce.vnode=H},me=(B,H,Q,ce,le,A,N)=>{const _=()=>{if(B.isMounted){let{next:v,bu:k,u:L,parent:D,vnode:M}=B;{const ne=kl(B);if(ne){v&&(v.el=M.el,ye(B,v,N)),ne.asyncDep.then(()=>{B.isUnmounted||_()});return}}let V=v,Y;jr(B,!1),v?(v.el=M.el,ye(B,v,N)):v=M,k&&ea(k),(Y=v.props&&v.props.onVnodeBeforeUpdate)&&cr(Y,D,v,M),jr(B,!0);const ie=ta(B),oe=B.subTree;B.subTree=ie,F(oe,ie,U(oe.el),Me(oe),B,le,A),v.el=ie.el,V===null&&If(B,ie.el),L&&Bt(L,le),(Y=v.props&&v.props.onVnodeUpdated)&&Bt(()=>cr(Y,D,v,M),le)}else{let v;const{el:k,props:L}=H,{bm:D,m:M,parent:V}=B,Y=vn(H);if(jr(B,!1),D&&ea(D),!Y&&(v=L&&L.onVnodeBeforeMount)&&cr(v,V,H),jr(B,!0),k&&Lt){const ie=()=>{B.subTree=ta(B),Lt(k,B.subTree,B,le,null)};Y?H.type.__asyncLoader().then(()=>!B.isUnmounted&&ie()):ie()}else{const ie=B.subTree=ta(B);F(null,ie,Q,ce,B,le,A),H.el=ie.el}if(M&&Bt(M,le),!Y&&(v=L&&L.onVnodeMounted)){const ie=H;Bt(()=>cr(v,V,ie),le)}(H.shapeFlag&256||V&&vn(V.vnode)&&V.vnode.shapeFlag&256)&&B.a&&Bt(B.a,le),B.isMounted=!0,H=Q=ce=null}},R=B.effect=new Va(_,$t,()=>$a(x),B.scope),x=B.update=()=>{R.dirty&&R.run()};x.id=B.uid,jr(B,!0),x()},ye=(B,H,Q)=>{H.component=B;const ce=B.vnode.props;B.vnode=H,B.next=null,ad(B,H.props,ce,Q),ld(B,H.children,Q),ei(),Gs(B),ti()},be=(B,H,Q,ce,le,A,N,_,R=!1)=>{const x=B&&B.children,v=B?B.shapeFlag:0,k=H.children,{patchFlag:L,shapeFlag:D}=H;if(L>0){if(L&128){De(x,k,Q,ce,le,A,N,_,R);return}else if(L&256){Ce(x,k,Q,ce,le,A,N,_,R);return}}D&8?(v&16&&ut(x,le,A),k!==x&&y(Q,k)):v&16?D&16?De(x,k,Q,ce,le,A,N,_,R):ut(x,le,A,!0):(v&8&&y(Q,""),D&16&&_e(k,Q,ce,le,A,N,_,R))},Ce=(B,H,Q,ce,le,A,N,_,R)=>{B=B||fi,H=H||fi;const x=B.length,v=H.length,k=Math.min(x,v);let L;for(L=0;L<k;L++){const D=H[L]=R?kr(H[L]):fr(H[L]);F(B[L],D,Q,null,le,A,N,_,R)}x>v?ut(B,le,A,!0,!1,k):_e(H,Q,ce,le,A,N,_,R,k)},De=(B,H,Q,ce,le,A,N,_,R)=>{let x=0;const v=H.length;let k=B.length-1,L=v-1;for(;x<=k&&x<=L;){const D=B[x],M=H[x]=R?kr(H[x]):fr(H[x]);if(Oi(D,M))F(D,M,Q,null,le,A,N,_,R);else break;x++}for(;x<=k&&x<=L;){const D=B[k],M=H[L]=R?kr(H[L]):fr(H[L]);if(Oi(D,M))F(D,M,Q,null,le,A,N,_,R);else break;k--,L--}if(x>k){if(x<=L){const D=L+1,M=D<v?H[D].el:ce;for(;x<=L;)F(null,H[x]=R?kr(H[x]):fr(H[x]),Q,M,le,A,N,_,R),x++}}else if(x>L)for(;x<=k;)ke(B[x],le,A,!0),x++;else{const D=x,M=x,V=new Map;for(x=M;x<=L;x++){const fe=H[x]=R?kr(H[x]):fr(H[x]);fe.key!=null&&V.set(fe.key,x)}let Y,ie=0;const oe=L-M+1;let ne=!1,ve=0;const de=new Array(oe);for(x=0;x<oe;x++)de[x]=0;for(x=D;x<=k;x++){const fe=B[x];if(ie>=oe){ke(fe,le,A,!0);continue}let xe;if(fe.key!=null)xe=V.get(fe.key);else for(Y=M;Y<=L;Y++)if(de[Y-M]===0&&Oi(fe,H[Y])){xe=Y;break}xe===void 0?ke(fe,le,A,!0):(de[xe-M]=x+1,xe>=ve?ve=xe:ne=!0,F(fe,H[xe],Q,null,le,A,N,_,R),ie++)}const Ee=ne?dd(de):fi;for(Y=Ee.length-1,x=oe-1;x>=0;x--){const fe=M+x,xe=H[fe],we=fe+1<v?H[fe+1].el:ce;de[x]===0?F(null,xe,Q,we,le,A,N,_,R):ne&&(Y<0||x!==Ee[Y]?Ie(xe,Q,we,2):Y--)}}},Ie=(B,H,Q,ce,le=null)=>{const{el:A,type:N,transition:_,children:R,shapeFlag:x}=B;if(x&6){Ie(B.component.subTree,H,Q,ce);return}if(x&128){B.suspense.move(H,Q,ce);return}if(x&64){N.move(B,H,Q,ct);return}if(N===Ar){i(A,H,Q);for(let k=0;k<R.length;k++)Ie(R[k],H,Q,ce);i(B.anchor,H,Q);return}if(N===aa){re(B,H,Q);return}if(ce!==2&&x&1&&_)if(ce===0)_.beforeEnter(A),i(A,H,Q),Bt(()=>_.enter(A),le);else{const{leave:k,delayLeave:L,afterLeave:D}=_,M=()=>i(A,H,Q),V=()=>{k(A,()=>{M(),D&&D()})};L?L(A,M,V):V()}else i(A,H,Q)},ke=(B,H,Q,ce=!1,le=!1)=>{const{type:A,props:N,ref:_,children:R,dynamicChildren:x,shapeFlag:v,patchFlag:k,dirs:L}=B;if(_!=null&&Ta(_,null,Q,B,!0),v&256){H.ctx.deactivate(B);return}const D=v&1&&L,M=!vn(B);let V;if(M&&(V=N&&N.onVnodeBeforeUnmount)&&cr(V,H,B),v&6)pt(B.component,Q,ce);else{if(v&128){B.suspense.unmount(Q,ce);return}D&&Hr(B,null,H,"beforeUnmount"),v&64?B.type.remove(B,H,Q,le,ct,ce):x&&(A!==Ar||k>0&&k&64)?ut(x,H,Q,!1,!0):(A===Ar&&k&384||!le&&v&16)&&ut(R,H,Q),ce&&Ne(B)}(M&&(V=N&&N.onVnodeUnmounted)||D)&&Bt(()=>{V&&cr(V,H,B),D&&Hr(B,null,H,"unmounted")},Q)},Ne=B=>{const{type:H,el:Q,anchor:ce,transition:le}=B;if(H===Ar){qe(Q,ce);return}if(H===aa){ee(B);return}const A=()=>{r(Q),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(B.shapeFlag&1&&le&&!le.persisted){const{leave:N,delayLeave:_}=le,R=()=>N(Q,A);_?_(B.el,A,R):R()}else A()},qe=(B,H)=>{let Q;for(;B!==H;)Q=w(B),r(B),B=Q;r(H)},pt=(B,H,Q)=>{const{bum:ce,scope:le,update:A,subTree:N,um:_}=B;ce&&ea(ce),le.stop(),A&&(A.active=!1,ke(N,B,H,Q)),_&&Bt(_,H),Bt(()=>{B.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},ut=(B,H,Q,ce=!1,le=!1,A=0)=>{for(let N=A;N<B.length;N++)ke(B[N],H,Q,ce,le)},Me=B=>B.shapeFlag&6?Me(B.component.subTree):B.shapeFlag&128?B.suspense.next():w(B.anchor||B.el);let rt=!1;const ht=(B,H,Q)=>{B==null?H._vnode&&ke(H._vnode,null,null,!0):F(H._vnode||null,B,H,null,null,null,Q),rt||(rt=!0,Gs(),ol(),rt=!1),H._vnode=B},ct={p:F,um:ke,m:Ie,r:Ne,mt:ue,mc:_e,pc:be,pbc:z,n:Me,o:e};let xt,Lt;return n&&([xt,Lt]=n(ct)),{render:ht,hydrate:xt,createApp:rd(ht,xt)}}function na({type:e,props:n},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:a}function jr({effect:e,update:n},a){e.allowRecurse=n.allowRecurse=a}function fd(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Sl(e,n,a=!1){const i=e.children,r=n.children;if(Ye(i)&&Ye(r))for(let l=0;l<i.length;l++){const f=i[l];let g=r[l];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=r[l]=kr(r[l]),g.el=f.el),a||Sl(f,g)),g.type===Mn&&(g.el=f.el)}}function dd(e){const n=e.slice(),a=[0];let i,r,l,f,g;const T=e.length;for(i=0;i<T;i++){const m=e[i];if(m!==0){if(r=a[a.length-1],e[r]<m){n[i]=r,a.push(i);continue}for(l=0,f=a.length-1;l<f;)g=l+f>>1,e[a[g]]<m?l=g+1:f=g;m<e[a[l]]&&(l>0&&(n[i]=a[l-1]),a[l]=i)}}for(l=a.length,f=a[l-1];l-- >0;)a[l]=f,f=n[f];return a}function kl(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:kl(n)}const hd=e=>e.__isTeleport,Ar=Symbol.for("v-fgt"),Mn=Symbol.for("v-txt"),Zr=Symbol.for("v-cmt"),aa=Symbol.for("v-stc"),Ui=[];let ir=null;function gi(e=!1){Ui.push(ir=e?null:[])}function gd(){Ui.pop(),ir=Ui[Ui.length-1]||null}let Yi=1;function eo(e){Yi+=e}function Cl(e){return e.dynamicChildren=Yi>0?ir||fi:null,gd(),Yi>0&&ir&&ir.push(e),e}function Vi(e,n,a,i,r,l){return Cl(sr(e,n,a,i,r,l,!0))}function pd(e,n,a,i,r){return Cl(or(e,n,a,i,r,!0))}function vd(e){return e?e.__v_isVNode===!0:!1}function Oi(e,n){return e.type===n.type&&e.key===n.key}const Bn="__vInternal",Rl=({key:e})=>e??null,yn=({ref:e,ref_key:n,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?wt(e)||Vt(e)||je(e)?{i:rr,r:e,k:n,f:!!a}:e:null);function sr(e,n=null,a=null,i=0,r=null,l=e===Ar?0:1,f=!1,g=!1){const T={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Rl(n),ref:n&&yn(n),scopeId:Nn,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:rr};return g?(Qa(T,a),l&128&&e.normalize(T)):a&&(T.shapeFlag|=wt(a)?8:16),Yi>0&&!f&&ir&&(T.patchFlag>0||l&6)&&T.patchFlag!==32&&ir.push(T),T}const or=md;function md(e,n=null,a=null,i=0,r=null,l=!1){if((!e||e===Of)&&(e=Zr),vd(e)){const g=yi(e,n,!0);return a&&Qa(g,a),Yi>0&&!l&&ir&&(g.shapeFlag&6?ir[ir.indexOf(e)]=g:ir.push(g)),g.patchFlag|=-2,g}if(wd(e)&&(e=e.__vccOpts),n){n=yd(n);let{class:g,style:T}=n;g&&!wt(g)&&(n.class=Ua(g)),yt(T)&&(el(T)&&!Ye(T)&&(T=Rt({},T)),n.style=Ki(T))}const f=wt(e)?1:Df(e)?128:hd(e)?64:yt(e)?4:je(e)?2:0;return sr(e,n,a,i,r,f,l,!0)}function yd(e){return e?el(e)||Bn in e?Rt({},e):e:null}function yi(e,n,a=!1){const{props:i,ref:r,patchFlag:l,children:f}=e,g=n?Ed(i||{},n):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:g,key:g&&Rl(g),ref:n&&n.ref?a&&r?Ye(r)?r.concat(yn(n)):[r,yn(n)]:yn(n):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Ar?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yi(e.ssContent),ssFallback:e.ssFallback&&yi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ad(e=" ",n=0){return or(Mn,null,e,n)}function to(e="",n=!1){return n?(gi(),pd(Zr,null,e)):or(Zr,null,e)}function fr(e){return e==null||typeof e=="boolean"?or(Zr):Ye(e)?or(Ar,null,e.slice()):typeof e=="object"?kr(e):or(Mn,null,String(e))}function kr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:yi(e)}function Qa(e,n){let a=0;const{shapeFlag:i}=e;if(n==null)n=null;else if(Ye(n))a=16;else if(typeof n=="object")if(i&65){const r=n.default;r&&(r._c&&(r._d=!1),Qa(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=n._;!r&&!(Bn in n)?n._ctx=rr:r===3&&rr&&(rr.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else je(n)?(n={default:n,_ctx:rr},a=32):(n=String(n),i&64?(a=16,n=[Ad(n)]):a=8);e.children=n,e.shapeFlag|=a}function Ed(...e){const n={};for(let a=0;a<e.length;a++){const i=e[a];for(const r in i)if(r==="class")n.class!==i.class&&(n.class=Ua([n.class,i.class]));else if(r==="style")n.style=Ki([n.style,i.style]);else if(kn(r)){const l=n[r],f=i[r];f&&l!==f&&!(Ye(l)&&l.includes(f))&&(n[r]=l?[].concat(l,f):f)}else r!==""&&(n[r]=i[r])}return n}function cr(e,n,a,i=null){ar(e,n,7,[a,i])}const _d=Al();let bd=0;function Td(e,n,a){const i=e.type,r=(n?n.appContext:e.appContext)||_d,l={uid:bd++,vnode:e,type:i,parent:n,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Gc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_l(i,r),emitsOptions:ul(i,r),emit:null,emitted:null,propsDefaults:dt,inheritAttrs:i.inheritAttrs,ctx:dt,data:dt,props:dt,attrs:dt,slots:dt,refs:dt,setupState:dt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=n?n.root:l,l.emit=xf.bind(null,l),e.ce&&e.ce(l),l}let Pt=null,xn,xa;{const e=Vo(),n=(a,i)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(i),l=>{r.length>1?r.forEach(f=>f(l)):r[0](l)}};xn=n("__VUE_INSTANCE_SETTERS__",a=>Pt=a),xa=n("__VUE_SSR_SETTERS__",a=>Un=a)}const zi=e=>{const n=Pt;return xn(e),e.scope.on(),()=>{e.scope.off(),xn(n)}},ro=()=>{Pt&&Pt.scope.off(),xn(null)};function wl(e){return e.vnode.shapeFlag&4}let Un=!1;function xd(e,n=!1){n&&xa(n);const{props:a,children:i}=e.vnode,r=wl(e);nd(e,a,r,n),od(e,i);const l=r?Sd(e,n):void 0;return n&&xa(!1),l}function Sd(e,n){const a=e.type;e.accessCache=Object.create(null),e.proxy=tl(new Proxy(e.ctx,Xf));const{setup:i}=a;if(i){const r=e.setupContext=i.length>1?Cd(e):null,l=zi(e);ei();const f=Lr(i,e,0,[e.props,r]);if(ti(),l(),Uo(f)){if(f.then(ro,ro),n)return f.then(g=>{io(e,g,n)}).catch(g=>{Pn(g,e,0)});e.asyncDep=f}else io(e,f,n)}else Ll(e,n)}function io(e,n,a){je(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:yt(n)&&(e.setupState=nl(n)),Ll(e,a)}let no;function Ll(e,n,a){const i=e.type;if(!e.render){if(!n&&no&&!i.render){const r=i.template||qa(e).template;if(r){const{isCustomElement:l,compilerOptions:f}=e.appContext.config,{delimiters:g,compilerOptions:T}=i,m=Rt(Rt({isCustomElement:l,delimiters:g},f),T);i.render=no(r,m)}}e.render=i.render||$t}{const r=zi(e);ei();try{qf(e)}finally{ti(),r()}}}function kd(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,a){return Ut(e,"get","$attrs"),n[a]}}))}function Cd(e){const n=a=>{e.exposed=a||{}};return{get attrs(){return kd(e)},slots:e.slots,emit:e.emit,expose:n}}function Ja(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(nl(tl(e.exposed)),{get(n,a){if(a in n)return n[a];if(a in Mi)return Mi[a](e)},has(n,a){return a in n||a in Mi}}))}function Rd(e,n=!0){return je(e)?e.displayName||e.name:e.name||n&&e.__name}function wd(e){return je(e)&&"__vccOpts"in e}const Ld=(e,n)=>df(e,n,Un),Id="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Od="http://www.w3.org/2000/svg",Pd="http://www.w3.org/1998/Math/MathML",Cr=typeof document<"u"?document:null,ao=Cr&&Cr.createElement("template"),Dd={insert:(e,n,a)=>{n.insertBefore(e,a||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,a,i)=>{const r=n==="svg"?Cr.createElementNS(Od,e):n==="mathml"?Cr.createElementNS(Pd,e):Cr.createElement(e,a?{is:a}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Cr.createTextNode(e),createComment:e=>Cr.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Cr.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,a,i,r,l){const f=a?a.previousSibling:n.lastChild;if(r&&(r===l||r.nextSibling))for(;n.insertBefore(r.cloneNode(!0),a),!(r===l||!(r=r.nextSibling)););else{ao.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const g=ao.content;if(i==="svg"||i==="mathml"){const T=g.firstChild;for(;T.firstChild;)g.appendChild(T.firstChild);g.removeChild(T)}n.insertBefore(g,a)}return[f?f.nextSibling:n.firstChild,a?a.previousSibling:n.lastChild]}},Nd=Symbol("_vtc");function Fd(e,n,a){const i=e[Nd];i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?e.removeAttribute("class"):a?e.setAttribute("class",n):e.className=n}const so=Symbol("_vod"),Md=Symbol("_vsh"),Bd=Symbol(""),Ud=/(^|;)\s*display\s*:/;function Vd(e,n,a){const i=e.style,r=wt(a);let l=!1;if(a&&!r){if(n)if(wt(n))for(const f of n.split(";")){const g=f.slice(0,f.indexOf(":")).trim();a[g]==null&&An(i,g,"")}else for(const f in n)a[f]==null&&An(i,f,"");for(const f in a)f==="display"&&(l=!0),An(i,f,a[f])}else if(r){if(n!==a){const f=i[Bd];f&&(a+=";"+f),i.cssText=a,l=Ud.test(a)}}else n&&e.removeAttribute("style");so in e&&(e[so]=l?i.display:"",e[Md]&&(i.display="none"))}const oo=/\s*!important$/;function An(e,n,a){if(Ye(a))a.forEach(i=>An(e,n,i));else if(a==null&&(a=""),n.startsWith("--"))e.setProperty(n,a);else{const i=Kd(e,n);oo.test(a)?e.setProperty(bi(i),a.replace(oo,""),"important"):e[i]=a}}const lo=["Webkit","Moz","ms"],sa={};function Kd(e,n){const a=sa[n];if(a)return a;let i=pr(n);if(i!=="filter"&&i in e)return sa[n]=i;i=Ln(i);for(let r=0;r<lo.length;r++){const l=lo[r]+i;if(l in e)return sa[n]=l}return n}const uo="http://www.w3.org/1999/xlink";function Gd(e,n,a,i,r){if(i&&n.startsWith("xlink:"))a==null?e.removeAttributeNS(uo,n.slice(6,n.length)):e.setAttributeNS(uo,n,a);else{const l=Kc(n);a==null||l&&!Ko(a)?e.removeAttribute(n):e.setAttribute(n,l?"":a)}}function Hd(e,n,a,i,r,l,f){if(n==="innerHTML"||n==="textContent"){i&&f(i,r,l),e[n]=a??"";return}const g=e.tagName;if(n==="value"&&g!=="PROGRESS"&&!g.includes("-")){const m=g==="OPTION"?e.getAttribute("value")||"":e.value,y=a??"";(m!==y||!("_value"in e))&&(e.value=y),a==null&&e.removeAttribute(n),e._value=a;return}let T=!1;if(a===""||a==null){const m=typeof e[n];m==="boolean"?a=Ko(a):a==null&&m==="string"?(a="",T=!0):m==="number"&&(a=0,T=!0)}try{e[n]=a}catch{}T&&e.removeAttribute(n)}function jd(e,n,a,i){e.addEventListener(n,a,i)}function Yd(e,n,a,i){e.removeEventListener(n,a,i)}const co=Symbol("_vei");function Wd(e,n,a,i,r=null){const l=e[co]||(e[co]={}),f=l[n];if(i&&f)f.value=i;else{const[g,T]=zd(n);if(i){const m=l[n]=qd(i,r);jd(e,g,m,T)}else f&&(Yd(e,g,f,T),l[n]=void 0)}}const fo=/(?:Once|Passive|Capture)$/;function zd(e){let n;if(fo.test(e)){n={};let i;for(;i=e.match(fo);)e=e.slice(0,e.length-i[0].length),n[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):bi(e.slice(2)),n]}let oa=0;const $d=Promise.resolve(),Xd=()=>oa||($d.then(()=>oa=0),oa=Date.now());function qd(e,n){const a=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=a.attached)return;ar(Zd(i,a.value),n,5,[i])};return a.value=e,a.attached=Xd(),a}function Zd(e,n){if(Ye(n)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},n.map(i=>r=>!r._stopped&&i&&i(r))}else return n}const ho=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qd=(e,n,a,i,r,l,f,g,T)=>{const m=r==="svg";n==="class"?Fd(e,i,m):n==="style"?Vd(e,a,i):kn(n)?Fa(n)||Wd(e,n,a,i,f):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Jd(e,n,i,m))?Hd(e,n,i,l,f,g,T):(n==="true-value"?e._trueValue=i:n==="false-value"&&(e._falseValue=i),Gd(e,n,i,m))};function Jd(e,n,a,i){if(i)return!!(n==="innerHTML"||n==="textContent"||n in e&&ho(n)&&je(a));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ho(n)&&wt(a)?!1:n in e}const eh=Rt({patchProp:Qd},Dd);let go;function th(){return go||(go=ud(eh))}const rh=(...e)=>{const n=th().createApp(...e),{mount:a}=n;return n.mount=i=>{const r=nh(i);if(!r)return;const l=n._component;!je(l)&&!l.render&&!l.template&&(l.template=r.innerHTML),r.innerHTML="";const f=a(r,!1,ih(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),f},n};function ih(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nh(e){return wt(e)?document.querySelector(e):e}/*!
* v-github-icon v3.1.3
* (c) 2024 Vinayak Kulkarni
* @license MIT
*/const ah=Xa({name:"VGithubIcon",props:{url:{type:String,required:!0,default:""},position:{type:String,required:!1,default:"top-right"},bgColor:{type:String,required:!1,default:"#FFFFFF"},fillColor:{type:String,required:!1,default:"#151513"}}}),sh=(e,n)=>{const a=e.__vccOpts||e;for(const[i,r]of n)a[i]=r;return a},Ti=e=>(Sf("data-v-6c7dc248"),e=e(),kf(),e),oh=["href"],lh=Ti(()=>sr("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"},null,-1)),uh=Ti(()=>sr("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{"transform-origin":"130px 106px"},class:"octo-arm"},null,-1)),ch=Ti(()=>sr("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",class:"octo-body"},null,-1)),fh=[lh,uh,ch],dh=Ti(()=>sr("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"},null,-1)),hh=Ti(()=>sr("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{"transform-origin":"130px 106px"},class:"octo-arm"},null,-1)),gh=Ti(()=>sr("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",class:"octo-body"},null,-1)),ph=[dh,hh,gh];function vh(e,n,a,i,r,l){return gi(),Vi("a",{href:e.url,class:"github-corner","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer"},[e.position==="top-left"?(gi(),Vi("svg",{key:0,width:"80",height:"80",viewBox:"0 0 250 250",style:Ki([{fill:e.fillColor,color:e.bgColor},{position:"absolute",top:"0",border:"0",left:"0",transform:"scale(-1, 1)"}]),"aria-hidden":"true"},fh,4)):to("",!0),e.position==="top-right"?(gi(),Vi("svg",{key:1,width:"80",height:"80",viewBox:"0 0 250 250",style:Ki([{fill:e.fillColor,color:e.bgColor},{position:"absolute",top:"0",border:"0",right:"0"}]),"aria-hidden":"true"},ph,4)):to("",!0)],8,oh)}const mh=sh(ah,[["render",vh],["__scopeId","data-v-6c7dc248"]]);function yh(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var i,r,l,f,g=[],T=!0,m=!1;try{if(l=(a=a.call(e)).next,n===0){if(Object(a)!==a)return;T=!1}else for(;!(T=(i=l.call(a)).done)&&(g.push(i.value),g.length!==n);T=!0);}catch(y){m=!0,r=y}finally{try{if(!T&&a.return!=null&&(f=a.return(),Object(f)!==f))return}finally{if(m)throw r}}return g}}function po(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,i)}return a}function dn(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?po(Object(a),!0).forEach(function(i){Ah(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):po(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Ai(e){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ai(e)}function nt(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function vo(e,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ol(i.key),i)}}function at(e,n,a){return n&&vo(e.prototype,n),a&&vo(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ah(e,n,a){return n=Ol(n),n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function At(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Sa(e,n)}function Er(e){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Er(e)}function Sa(e,n){return Sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Sa(e,n)}function Eh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _h(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Et(e){var n=Eh();return function(){var i=Er(e),r;if(n){var l=Er(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return _h(this,r)}}function bh(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=Er(e),e!==null););return e}function $r(){return typeof Reflect<"u"&&Reflect.get?$r=Reflect.get.bind():$r=function(n,a,i){var r=bh(n,a);if(r){var l=Object.getOwnPropertyDescriptor(r,a);return l.get?l.get.call(arguments.length<3?n:i):l.value}},$r.apply(this,arguments)}function ka(e,n){return xh(e)||yh(e,n)||es(e,n)||Ch()}function pi(e){return Th(e)||Sh(e)||es(e)||kh()}function Th(e){if(Array.isArray(e))return Ca(e)}function xh(e){if(Array.isArray(e))return e}function Sh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function es(e,n){if(e){if(typeof e=="string")return Ca(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ca(e,n)}}function Ca(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,i=new Array(n);a<n;a++)i[a]=e[a];return i}function kh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ch(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Il(e,n){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=es(e))||n&&e&&typeof e.length=="number"){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(T){throw T},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,g;return{s:function(){a=a.call(e)},n:function(){var T=a.next();return l=T.done,T},e:function(T){f=!0,g=T},f:function(){try{!l&&a.return!=null&&a.return()}finally{if(f)throw g}}}}function Rh(e,n){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,n||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ol(e){var n=Rh(e,"string");return typeof n=="symbol"?n:String(n)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),i=a.length>>>0;if(typeof n!="function")throw new TypeError("predicate must be a function");for(var r=arguments[1],l=0;l<i;){var f=a[l];if(n.call(r,f,l,a))return f;l++}}});Object.entries||(Object.entries=function(e){for(var n=Object.keys(e),a=n.length,i=new Array(a);a--;)i[a]=[n[a],e[n[a]]];return i});Object.values||(Object.values=function(e){for(var n=Object.keys(e),a=n.length,i=new Array(a);a--;)i[a]=e[n[a]];return i});typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(n,a){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),r=1;r<arguments.length;r++){var l=arguments[r];if(l!=null)for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(i[f]=l[f])}return i},writable:!0,configurable:!0});Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(n){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),i=a.length>>>0;if(typeof n!="function")throw new TypeError("predicate must be a function");for(var r=arguments[1],l=0;l<i;){var f=a[l];if(n.call(r,f,l,a))return l;l++}return-1},configurable:!0,writable:!0});var wh="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",Pl={mp4:wh},Dr=function(){var e,n,a,i,r=[],l=r.concat,f=r.filter,g=r.slice,T=window.document,m={},y={},U={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},w=/^\s*<(\w+|!)[^>]*>/,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,F=/^(?:body|html)$/i,j=/([A-Z])/g,X=["val","css","html","text","data","width","height","offset"],$=["after","prepend","before","append"],re=T.createElement("table"),ee=T.createElement("tr"),te={tr:T.createElement("tbody"),tbody:re,thead:re,tfoot:re,td:ee,th:ee,"*":T.createElement("div")},se=/complete|loaded|interactive/,pe=/^[\w-]*$/,_e={},W=_e.toString,z={},ge,Z,q=T.createElement("div"),ue={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Te=Array.isArray||function(A){return A instanceof Array};z.matches=function(A,N){if(!N||!A||A.nodeType!==1)return!1;var _=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.matchesSelector;if(_)return _.call(A,N);var R,x=A.parentNode,v=!x;return v&&(x=q).appendChild(A),R=~z.qsa(x,N).indexOf(A),v&&q.removeChild(A),R};function me(A){return A==null?String(A):_e[W.call(A)]||"object"}function ye(A){return me(A)=="function"}function be(A){return A!=null&&A==A.window}function Ce(A){return A!=null&&A.nodeType==A.DOCUMENT_NODE}function De(A){return me(A)=="object"}function Ie(A){return De(A)&&!be(A)&&Object.getPrototypeOf(A)==Object.prototype}function ke(A){var N=!!A&&"length"in A&&A.length,_=a.type(A);return _!="function"&&!be(A)&&(_=="array"||N===0||typeof N=="number"&&N>0&&N-1 in A)}function Ne(A){return f.call(A,function(N){return N!=null})}function qe(A){return A.length>0?a.fn.concat.apply([],A):A}ge=function(A){return A.replace(/-+(.)?/g,function(N,_){return _?_.toUpperCase():""})};function pt(A){return A.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}Z=function(A){return f.call(A,function(N,_){return A.indexOf(N)==_})};function ut(A){return A in y?y[A]:y[A]=new RegExp("(^|\\s)"+A+"(\\s|$)")}function Me(A,N){return typeof N=="number"&&!U[pt(A)]?N+"px":N}function rt(A){var N,_;return m[A]||(N=T.createElement(A),T.body.appendChild(N),_=getComputedStyle(N,"").getPropertyValue("display"),N.parentNode.removeChild(N),_=="none"&&(_="block"),m[A]=_),m[A]}function ht(A){return"children"in A?g.call(A.children):a.map(A.childNodes,function(N){if(N.nodeType==1)return N})}function ct(A,N){var _,R=A?A.length:0;for(_=0;_<R;_++)this[_]=A[_];this.length=R,this.selector=N||""}z.fragment=function(A,N,_){var R,x,v;return I.test(A)&&(R=a(T.createElement(RegExp.$1))),R||(A.replace&&(A=A.replace(K,"<$1></$2>")),N===e&&(N=w.test(A)&&RegExp.$1),N in te||(N="*"),v=te[N],v.innerHTML=""+A,R=a.each(g.call(v.childNodes),function(){v.removeChild(this)})),Ie(_)&&(x=a(R),a.each(_,function(k,L){X.indexOf(k)>-1?x[k](L):x.attr(k,L)})),R},z.Z=function(A,N){return new ct(A,N)},z.isZ=function(A){return A instanceof z.Z},z.init=function(A,N){var _;if(A)if(typeof A=="string")if(A=A.trim(),A[0]=="<"&&w.test(A))_=z.fragment(A,RegExp.$1,N),A=null;else{if(N!==e)return a(N).find(A);_=z.qsa(T,A)}else{if(ye(A))return a(T).ready(A);if(z.isZ(A))return A;if(Te(A))_=Ne(A);else if(De(A))_=[A],A=null;else if(w.test(A))_=z.fragment(A.trim(),RegExp.$1,N),A=null;else{if(N!==e)return a(N).find(A);_=z.qsa(T,A)}}else return z.Z();return z.Z(_,A)},a=function(A,N){return z.init(A,N)};function xt(A,N,_){for(n in N)_&&(Ie(N[n])||Te(N[n]))?(Ie(N[n])&&!Ie(A[n])&&(A[n]={}),Te(N[n])&&!Te(A[n])&&(A[n]=[]),xt(A[n],N[n],_)):N[n]!==e&&(A[n]=N[n])}a.extend=function(A){var N,_=g.call(arguments,1);return typeof A=="boolean"&&(N=A,A=_.shift()),_.forEach(function(R){xt(A,R,N)}),A},z.qsa=function(A,N){var _,R=N[0]=="#",x=!R&&N[0]==".",v=R||x?N.slice(1):N,k=pe.test(v);return A.getElementById&&k&&R?(_=A.getElementById(v))?[_]:[]:A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11?[]:g.call(k&&!R&&A.getElementsByClassName?x?A.getElementsByClassName(v):A.getElementsByTagName(N):A.querySelectorAll(N))};function Lt(A,N){return N==null?a(A):a(A).filter(N)}a.contains=T.documentElement.contains?function(A,N){return A!==N&&A.contains(N)}:function(A,N){for(;N&&(N=N.parentNode);)if(N===A)return!0;return!1};function B(A,N,_,R){return ye(N)?N.call(A,_,R):N}function H(A,N,_){_==null?A.removeAttribute(N):A.setAttribute(N,_)}function Q(A,N){var _=A.className||"",R=_&&_.baseVal!==e;if(N===e)return R?_.baseVal:_;R?_.baseVal=N:A.className=N}function ce(A){try{return A&&(A=="true"||(A=="false"?!1:A=="null"?null:+A+""==A?+A:/^[\[\{]/.test(A)?a.parseJSON(A):A))}catch{return A}}a.type=me,a.isFunction=ye,a.isWindow=be,a.isArray=Te,a.isPlainObject=Ie,a.isEmptyObject=function(A){var N;for(N in A)return!1;return!0},a.isNumeric=function(A){var N=Number(A),_=typeof A;return A!=null&&_!="boolean"&&(_!="string"||A.length)&&!isNaN(N)&&isFinite(N)||!1},a.inArray=function(A,N,_){return r.indexOf.call(N,A,_)},a.camelCase=ge,a.trim=function(A){return A==null?"":String.prototype.trim.call(A)},a.uuid=0,a.support={},a.expr={},a.noop=function(){},a.map=function(A,N){var _,R=[],x,v;if(ke(A))for(x=0;x<A.length;x++)_=N(A[x],x),_!=null&&R.push(_);else for(v in A)_=N(A[v],v),_!=null&&R.push(_);return qe(R)},a.each=function(A,N){var _,R;if(ke(A)){for(_=0;_<A.length;_++)if(N.call(A[_],_,A[_])===!1)return A}else for(R in A)if(N.call(A[R],R,A[R])===!1)return A;return A},a.grep=function(A,N){return f.call(A,N)},window.JSON&&(a.parseJSON=JSON.parse),a.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(A,N){_e["[object "+N+"]"]=N.toLowerCase()}),a.fn={constructor:z.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){var A,N,_=[];for(A=0;A<arguments.length;A++)N=arguments[A],_[A]=z.isZ(N)?N.toArray():N;return l.apply(z.isZ(this)?this.toArray():this,_)},map:function(A){return a(a.map(this,function(N,_){return A.call(N,_,N)}))},slice:function(){return a(g.apply(this,arguments))},ready:function(A){return se.test(T.readyState)&&T.body?A(a):T.addEventListener("DOMContentLoaded",function(){A(a)},!1),this},get:function(A){return A===e?g.call(this):this[A>=0?A:A+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(A){return r.every.call(this,function(N,_){return A.call(N,_,N)!==!1}),this},filter:function(A){return ye(A)?this.not(this.not(A)):a(f.call(this,function(N){return z.matches(N,A)}))},add:function(A,N){return a(Z(this.concat(a(A,N))))},is:function(A){return this.length>0&&z.matches(this[0],A)},not:function(A){var N=[];if(ye(A)&&A.call!==e)this.each(function(R){A.call(this,R)||N.push(this)});else{var _=typeof A=="string"?this.filter(A):ke(A)&&ye(A.item)?g.call(A):a(A);this.forEach(function(R){_.indexOf(R)<0&&N.push(R)})}return a(N)},has:function(A){return this.filter(function(){return De(A)?a.contains(this,A):a(this).find(A).size()})},eq:function(A){return A===-1?this.slice(A):this.slice(A,+A+1)},first:function(){var A=this[0];return A&&!De(A)?A:a(A)},last:function(){var A=this[this.length-1];return A&&!De(A)?A:a(A)},find:function(A){var N,_=this;return A?typeof A=="object"?N=a(A).filter(function(){var R=this;return r.some.call(_,function(x){return a.contains(x,R)})}):this.length==1?N=a(z.qsa(this[0],A)):N=this.map(function(){return z.qsa(this,A)}):N=a(),N},closest:function(A,N){var _=[],R=typeof A=="object"&&a(A);return this.each(function(x,v){for(;v&&!(R?R.indexOf(v)>=0:z.matches(v,A));)v=v!==N&&!Ce(v)&&v.parentNode;v&&_.indexOf(v)<0&&_.push(v)}),a(_)},parents:function(A){for(var N=[],_=this;_.length>0;)_=a.map(_,function(R){if((R=R.parentNode)&&!Ce(R)&&N.indexOf(R)<0)return N.push(R),R});return Lt(N,A)},parent:function(A){return Lt(Z(this.pluck("parentNode")),A)},children:function(A){return Lt(this.map(function(){return ht(this)}),A)},contents:function(){return this.map(function(){return this.contentDocument||g.call(this.childNodes)})},siblings:function(A){return Lt(this.map(function(N,_){return f.call(ht(_.parentNode),function(R){return R!==_})}),A)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(A){return a.map(this,function(N){return N[A]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=rt(this.nodeName))})},replaceWith:function(A){return this.before(A).remove()},wrap:function(A){var N=ye(A);if(this[0]&&!N)var _=a(A).get(0),R=_.parentNode||this.length>1;return this.each(function(x){a(this).wrapAll(N?A.call(this,x):R?_.cloneNode(!0):_)})},wrapAll:function(A){if(this[0]){a(this[0]).before(A=a(A));for(var N;(N=A.children()).length;)A=N.first();a(A).append(this)}return this},wrapInner:function(A){var N=ye(A);return this.each(function(_){var R=a(this),x=R.contents(),v=N?A.call(this,_):A;x.length?x.wrapAll(v):R.append(v)})},unwrap:function(){return this.parent().each(function(){a(this).replaceWith(a(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(A){return this.each(function(){var N=a(this);(A===e?N.css("display")=="none":A)?N.show():N.hide()})},prev:function(A){return a(this.pluck("previousElementSibling")).filter(A||"*")},next:function(A){return a(this.pluck("nextElementSibling")).filter(A||"*")},html:function(A){return 0 in arguments?this.each(function(N){var _=this.innerHTML;a(this).empty().append(B(this,A,N,_))}):0 in this?this[0].innerHTML:null},text:function(A){return 0 in arguments?this.each(function(N){var _=B(this,A,N,this.textContent);this.textContent=_==null?"":""+_}):0 in this?this.pluck("textContent").join(""):null},attr:function(A,N){var _;return typeof A=="string"&&!(1 in arguments)?0 in this&&this[0].nodeType==1&&(_=this[0].getAttribute(A))!=null?_:e:this.each(function(R){if(this.nodeType===1)if(De(A))for(n in A)H(this,n,A[n]);else H(this,A,B(this,N,R,this.getAttribute(A)))})},removeAttr:function(A){return this.each(function(){this.nodeType===1&&A.split(" ").forEach(function(N){H(this,N)},this)})},prop:function(A,N){return A=ue[A]||A,1 in arguments?this.each(function(_){this[A]=B(this,N,_,this[A])}):this[0]&&this[0][A]},removeProp:function(A){return A=ue[A]||A,this.each(function(){delete this[A]})},data:function(A,N){var _="data-"+A.replace(j,"-$1").toLowerCase(),R=1 in arguments?this.attr(_,N):this.attr(_);return R!==null?ce(R):e},val:function(A){return 0 in arguments?(A==null&&(A=""),this.each(function(N){this.value=B(this,A,N,this.value)})):this[0]&&(this[0].multiple?a(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(A){if(A)return this.each(function(_){var R=a(this),x=B(this,A,_,R.offset()),v=R.offsetParent().offset(),k={top:x.top-v.top,left:x.left-v.left};R.css("position")=="static"&&(k.position="relative"),R.css(k)});if(!this.length)return null;if(T.documentElement!==this[0]&&!a.contains(T.documentElement,this[0]))return{top:0,left:0};var N=this[0].getBoundingClientRect();return{left:N.left+window.pageXOffset,top:N.top+window.pageYOffset,width:Math.round(N.width),height:Math.round(N.height)}},css:function(A,N){if(arguments.length<2){var _=this[0];if(typeof A=="string")return _?_.style[ge(A)]||getComputedStyle(_,"").getPropertyValue(A):void 0;if(Te(A)){if(!_)return;var R={},x=getComputedStyle(_,"");return a.each(A,function(k,L){R[L]=_.style[ge(L)]||x.getPropertyValue(L)}),R}}var v="";if(me(A)=="string")!N&&N!==0?this.each(function(){this.style.removeProperty(pt(A))}):v=pt(A)+":"+Me(A,N);else for(n in A)!A[n]&&A[n]!==0?this.each(function(){this.style.removeProperty(pt(n))}):v+=pt(n)+":"+Me(n,A[n])+";";return this.each(function(){this.style.cssText+=";"+v})},index:function(A){return A?this.indexOf(a(A)[0]):this.parent().children().indexOf(this[0])},hasClass:function(A){return A?r.some.call(this,function(N){return this.test(Q(N))},ut(A)):!1},addClass:function(A){return A?this.each(function(N){if("className"in this){i=[];var _=Q(this),R=B(this,A,N,_);R.split(/\s+/g).forEach(function(x){a(this).hasClass(x)||i.push(x)},this),i.length&&Q(this,_+(_?" ":"")+i.join(" "))}}):this},removeClass:function(A){return this.each(function(N){if("className"in this){if(A===e)return Q(this,"");i=Q(this),B(this,A,N,i).split(/\s+/g).forEach(function(_){i=i.replace(ut(_)," ")}),Q(this,i.trim())}})},toggleClass:function(A,N){return A?this.each(function(_){var R=a(this),x=B(this,A,_,Q(this));x.split(/\s+/g).forEach(function(v){(N===e?!R.hasClass(v):N)?R.addClass(v):R.removeClass(v)})}):this},scrollTop:function(A){if(this.length){var N="scrollTop"in this[0];return A===e?N?this[0].scrollTop:this[0].pageYOffset:this.each(N?function(){this.scrollTop=A}:function(){this.scrollTo(this.scrollX,A)})}},scrollLeft:function(A){if(this.length){var N="scrollLeft"in this[0];return A===e?N?this[0].scrollLeft:this[0].pageXOffset:this.each(N?function(){this.scrollLeft=A}:function(){this.scrollTo(A,this.scrollY)})}},position:function(){if(this.length){var A=this[0],N=this.offsetParent(),_=this.offset(),R=F.test(N[0].nodeName)?{top:0,left:0}:N.offset();return _.top-=parseFloat(a(A).css("margin-top"))||0,_.left-=parseFloat(a(A).css("margin-left"))||0,R.top+=parseFloat(a(N[0]).css("border-top-width"))||0,R.left+=parseFloat(a(N[0]).css("border-left-width"))||0,{top:_.top-R.top,left:_.left-R.left}}},offsetParent:function(){return this.map(function(){for(var A=this.offsetParent||T.body;A&&!F.test(A.nodeName)&&a(A).css("position")=="static";)A=A.offsetParent;return A})}},a.fn.detach=a.fn.remove,["width","height"].forEach(function(A){var N=A.replace(/./,function(_){return _[0].toUpperCase()});a.fn[A]=function(_){var R,x=this[0];return _===e?be(x)?x["inner"+N]:Ce(x)?x.documentElement["scroll"+N]:(R=this.offset())&&R[A]:this.each(function(v){x=a(this),x.css(A,B(this,_,v,x[A]()))})}});function le(A,N){N(A);for(var _=0,R=A.childNodes.length;_<R;_++)le(A.childNodes[_],N)}return $.forEach(function(A,N){var _=N%2;a.fn[A]=function(){var R,x=a.map(arguments,function(L){var D=[];return R=me(L),R=="array"?(L.forEach(function(M){if(M.nodeType!==e)return D.push(M);if(a.zepto.isZ(M))return D=D.concat(M.get());D=D.concat(z.fragment(M))}),D):R=="object"||L==null?L:z.fragment(L)}),v,k=this.length>1;return x.length<1?this:this.each(function(L,D){v=_?D:D.parentNode,D=N==0?D.nextSibling:N==1?D.firstChild:N==2?D:null;var M=a.contains(T.documentElement,v);x.forEach(function(V){if(k)V=V.cloneNode(!0);else if(!v)return a(V).remove();v.insertBefore(V,D),M&&le(V,function(Y){if(Y.nodeName!=null&&Y.nodeName.toUpperCase()==="SCRIPT"&&(!Y.type||Y.type==="text/javascript")&&!Y.src){var ie=Y.ownerDocument?Y.ownerDocument.defaultView:window;ie.eval.call(ie,Y.innerHTML)}})})})},a.fn[_?A+"To":"insert"+(N?"Before":"After")]=function(R){return a(R)[A](this),this}}),z.Z.prototype=ct.prototype=a.fn,z.uniq=Z,z.deserializeValue=ce,a.zepto=z,a}();window.Zepto=Dr;window.$===void 0&&(window.$=Dr);(function(e){var n=+new Date,a=window.document,i,r,l=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,f=/^(?:text|application)\/javascript/i,g=/^(?:text|application)\/xml/i,T="application/json",m="text/html",y=/^\s*$/,U=a.createElement("a");U.href=window.location.href;function w(Z,q,ue){var Te=e.Event(q);return e(Z).trigger(Te,ue),!Te.isDefaultPrevented()}function I(Z,q,ue,Te){if(Z.global)return w(q||a,ue,Te)}e.active=0;function K(Z){Z.global&&e.active++===0&&I(Z,null,"ajaxStart")}function F(Z){Z.global&&!--e.active&&I(Z,null,"ajaxStop")}function j(Z,q){var ue=q.context;if(q.beforeSend.call(ue,Z,q)===!1||I(q,ue,"ajaxBeforeSend",[Z,q])===!1)return!1;I(q,ue,"ajaxSend",[Z,q])}function X(Z,q,ue,Te){var me=ue.context,ye="success";ue.success.call(me,Z,ye,q),Te&&Te.resolveWith(me,[Z,ye,q]),I(ue,me,"ajaxSuccess",[q,ue,Z]),re(ye,q,ue)}function $(Z,q,ue,Te,me){var ye=Te.context;Te.error.call(ye,ue,q,Z),me&&me.rejectWith(ye,[ue,q,Z]),I(Te,ye,"ajaxError",[ue,Te,Z||q]),re(q,ue,Te)}function re(Z,q,ue){var Te=ue.context;ue.complete.call(Te,q,Z),I(ue,Te,"ajaxComplete",[q,ue]),F(ue)}function ee(Z,q,ue){if(ue.dataFilter==te)return Z;var Te=ue.context;return ue.dataFilter.call(Te,Z,q)}function te(){}e.ajaxJSONP=function(Z,q){if(!("type"in Z))return e.ajax(Z);var ue=Z.jsonpCallback,Te=(e.isFunction(ue)?ue():ue)||"Zepto"+n++,me=a.createElement("script"),ye=window[Te],be,Ce=function(ke){e(me).triggerHandler("error",ke||"abort")},De={abort:Ce},Ie;return q&&q.promise(De),e(me).on("load error",function(ke,Ne){clearTimeout(Ie),e(me).off().remove(),ke.type=="error"||!be?$(null,Ne||"error",De,Z,q):X(be[0],De,Z,q),window[Te]=ye,be&&e.isFunction(ye)&&ye(be[0]),ye=be=void 0}),j(De,Z)===!1?(Ce("abort"),De):(window[Te]=function(){be=arguments},me.src=Z.url.replace(/\?(.+)=\?/,"?$1="+Te),a.head.appendChild(me),Z.timeout>0&&(Ie=setTimeout(function(){Ce("timeout")},Z.timeout)),De)},e.ajaxSettings={type:"GET",beforeSend:te,success:te,error:te,complete:te,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:m,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:te};function se(Z){return Z&&(Z=Z.split(";",2)[0]),Z&&(Z==m?"html":Z==T?"json":f.test(Z)?"script":g.test(Z)&&"xml")||"text"}function pe(Z,q){return q==""?Z:(Z+"&"+q).replace(/[&?]{1,2}/,"?")}function _e(Z){Z.processData&&Z.data&&e.type(Z.data)!="string"&&(Z.data=e.param(Z.data,Z.traditional)),Z.data&&(!Z.type||Z.type.toUpperCase()=="GET"||Z.dataType=="jsonp")&&(Z.url=pe(Z.url,Z.data),Z.data=void 0)}e.ajax=function(Z){var q=e.extend({},Z||{}),ue=e.Deferred&&e.Deferred(),Te,me;for(i in e.ajaxSettings)q[i]===void 0&&(q[i]=e.ajaxSettings[i]);K(q),q.crossDomain||(Te=a.createElement("a"),Te.href=q.url,Te.href=Te.href,q.crossDomain=U.protocol+"//"+U.host!=Te.protocol+"//"+Te.host),q.url||(q.url=window.location.toString()),(me=q.url.indexOf("#"))>-1&&(q.url=q.url.slice(0,me)),_e(q);var ye=q.dataType,be=/\?.+=\?/.test(q.url);if(be&&(ye="jsonp"),(q.cache===!1||(!Z||Z.cache!==!0)&&(ye=="script"||ye=="jsonp"))&&(q.url=pe(q.url,"_="+Date.now())),ye=="jsonp")return be||(q.url=pe(q.url,q.jsonp?q.jsonp+"=?":q.jsonp===!1?"":"callback=?")),e.ajaxJSONP(q,ue);var Ce=q.accepts[ye],De={},Ie=function(Me,rt){De[Me.toLowerCase()]=[Me,rt]},ke=/^([\w-]+:)\/\//.test(q.url)?RegExp.$1:window.location.protocol,Ne=q.xhr(),qe=Ne.setRequestHeader,pt;if(ue&&ue.promise(Ne),q.crossDomain||Ie("X-Requested-With","XMLHttpRequest"),Ie("Accept",Ce||"*/*"),(Ce=q.mimeType||Ce)&&(Ce.indexOf(",")>-1&&(Ce=Ce.split(",",2)[0]),Ne.overrideMimeType&&Ne.overrideMimeType(Ce)),(q.contentType||q.contentType!==!1&&q.data&&q.type.toUpperCase()!="GET")&&Ie("Content-Type",q.contentType||"application/x-www-form-urlencoded"),q.headers)for(r in q.headers)Ie(r,q.headers[r]);if(Ne.setRequestHeader=Ie,Ne.onreadystatechange=function(){if(Ne.readyState==4){Ne.onreadystatechange=te,clearTimeout(pt);var Me,rt=!1;if(Ne.status>=200&&Ne.status<300||Ne.status==304||Ne.status==0&&ke=="file:"){if(ye=ye||se(q.mimeType||Ne.getResponseHeader("content-type")),Ne.responseType=="arraybuffer"||Ne.responseType=="blob")Me=Ne.response;else{Me=Ne.responseText;try{Me=ee(Me,ye,q),ye=="script"?(0,eval)(Me):ye=="xml"?Me=Ne.responseXML:ye=="json"&&(Me=y.test(Me)?null:e.parseJSON(Me))}catch(ht){rt=ht}if(rt)return $(rt,"parsererror",Ne,q,ue)}X(Me,Ne,q,ue)}else $(Ne.statusText||null,Ne.status?"error":"abort",Ne,q,ue)}},j(Ne,q)===!1)return Ne.abort(),$(null,"abort",Ne,q,ue),Ne;var ut="async"in q?q.async:!0;if(Ne.open(q.type,q.url,ut,q.username,q.password),q.xhrFields)for(r in q.xhrFields)Ne[r]=q.xhrFields[r];for(r in De)qe.apply(Ne,De[r]);return q.timeout>0&&(pt=setTimeout(function(){Ne.onreadystatechange=te,Ne.abort(),$(null,"timeout",Ne,q,ue)},q.timeout)),Ne.send(q.data?q.data:null),Ne};function W(Z,q,ue,Te){return e.isFunction(q)&&(Te=ue,ue=q,q=void 0),e.isFunction(ue)||(Te=ue,ue=void 0),{url:Z,data:q,success:ue,dataType:Te}}e.get=function(){return e.ajax(W.apply(null,arguments))},e.post=function(){var Z=W.apply(null,arguments);return Z.type="POST",e.ajax(Z)},e.getJSON=function(){var Z=W.apply(null,arguments);return Z.dataType="json",e.ajax(Z)},e.fn.load=function(Z,q,ue){if(!this.length)return this;var Te=this,me=Z.split(/\s/),ye,be=W(Z,q,ue),Ce=be.success;return me.length>1&&(be.url=me[0],ye=me[1]),be.success=function(De){Te.html(ye?e("<div>").html(De.replace(l,"")).find(ye):De),Ce&&Ce.apply(Te,arguments)},e.ajax(be),this};var z=encodeURIComponent;function ge(Z,q,ue,Te){var me,ye=e.isArray(q),be=e.isPlainObject(q);e.each(q,function(Ce,De){me=e.type(De),Te&&(Ce=ue?Te:Te+"["+(be||me=="object"||me=="array"?Ce:"")+"]"),!Te&&ye?Z.add(De.name,De.value):me=="array"||!ue&&me=="object"?ge(Z,De,ue,Ce):Z.add(Ce,De)})}e.param=function(Z,q){var ue=[];return ue.add=function(Te,me){e.isFunction(me)&&(me=me()),me==null&&(me=""),this.push(z(Te)+"="+z(me))},ge(ue,Z,q),ue.join("&").replace(/%20/g,"+")}})(Dr);(function(e){e.Callbacks=function(n){n=e.extend({},n);var a,i,r,l,f,g,T=[],m=!n.once&&[],y=function(w){for(a=n.memory&&w,i=!0,g=l||0,l=0,f=T.length,r=!0;T&&g<f;++g)if(T[g].apply(w[0],w[1])===!1&&n.stopOnFalse){a=!1;break}r=!1,T&&(m?m.length&&y(m.shift()):a?T.length=0:U.disable())},U={add:function(){if(T){var w=T.length,I=function(K){e.each(K,function(F,j){typeof j=="function"?(!n.unique||!U.has(j))&&T.push(j):j&&j.length&&typeof j!="string"&&I(j)})};I(arguments),r?f=T.length:a&&(l=w,y(a))}return this},remove:function(){return T&&e.each(arguments,function(w,I){for(var K;(K=e.inArray(I,T,K))>-1;)T.splice(K,1),r&&(K<=f&&--f,K<=g&&--g)}),this},has:function(w){return!!(T&&(w?e.inArray(w,T)>-1:T.length))},empty:function(){return f=T.length=0,this},disable:function(){return T=m=a=void 0,this},disabled:function(){return!T},lock:function(){return m=void 0,a||U.disable(),this},locked:function(){return!m},fireWith:function(w,I){return T&&(!i||m)&&(I=I||[],I=[w,I.slice?I.slice():I],r?m.push(I):y(I)),this},fire:function(){return U.fireWith(this,arguments)},fired:function(){return!!i}};return U}})(Dr);(function(e){var n=Array.prototype.slice;function a(i){var r=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],l="pending",f={state:function(){return l},always:function(){return g.done(arguments).fail(arguments),this},then:function(){var T=arguments;return a(function(m){e.each(r,function(y,U){var w=e.isFunction(T[y])&&T[y];g[U[1]](function(){var I=w&&w.apply(this,arguments);if(I&&e.isFunction(I.promise))I.promise().done(m.resolve).fail(m.reject).progress(m.notify);else{var K=this===f?m.promise():this,F=w?[I]:arguments;m[U[0]+"With"](K,F)}})}),T=null}).promise()},promise:function(T){return T!=null?e.extend(T,f):f}},g={};return e.each(r,function(T,m){var y=m[2],U=m[3];f[m[1]]=y.add,U&&y.add(function(){l=U},r[T^1][2].disable,r[2][2].lock),g[m[0]]=function(){return g[m[0]+"With"](this===g?f:this,arguments),this},g[m[0]+"With"]=y.fireWith}),f.promise(g),i&&i.call(g,g),g}e.when=function(i){var r=n.call(arguments),l=r.length,f=0,g=l!==1||i&&e.isFunction(i.promise)?l:0,T=g===1?i:a(),m,y,U,w=function(I,K,F){return function(j){K[I]=this,F[I]=arguments.length>1?n.call(arguments):j,F===m?T.notifyWith(K,F):--g||T.resolveWith(K,F)}};if(l>1)for(m=new Array(l),y=new Array(l),U=new Array(l);f<l;++f)r[f]&&e.isFunction(r[f].promise)?r[f].promise().done(w(f,U,r)).fail(T.reject).progress(w(f,y,m)):--g;return g||T.resolveWith(U,r),T.promise()},e.Deferred=a})(Dr);(function(e){var n=1,a,i=Array.prototype.slice,r=e.isFunction,l=function(W){return typeof W=="string"},f={},g={},T="onfocusin"in window,m={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents";function U(W){return W._zid||(W._zid=n++)}function w(W,z,ge,Z){if(z=I(z),z.ns)var q=K(z.ns);return(f[U(W)]||[]).filter(function(ue){return ue&&(!z.e||ue.e==z.e)&&(!z.ns||q.test(ue.ns))&&(!ge||U(ue.fn)===U(ge))&&(!Z||ue.sel==Z)})}function I(W){var z=(""+W).split(".");return{e:z[0],ns:z.slice(1).sort().join(" ")}}function K(W){return new RegExp("(?:^| )"+W.replace(" "," .* ?")+"(?: |$)")}function F(W,z){return W.del&&!T&&W.e in m||!!z}function j(W){return y[W]||T&&m[W]||W}function X(W,z,ge,Z,q,ue,Te){var me=U(W),ye=f[me]||(f[me]=[]);z.split(/\s/).forEach(function(be){if(be=="ready")return e(document).ready(ge);var Ce=I(be);Ce.fn=ge,Ce.sel=q,Ce.e in y&&(ge=function(Ie){var ke=Ie.relatedTarget;if(!ke||ke!==this&&!e.contains(this,ke))return Ce.fn.apply(this,arguments)}),Ce.del=ue;var De=ue||ge;Ce.proxy=function(Ie){if(Ie=pe(Ie),!Ie.isImmediatePropagationStopped()){Ie.data=Z;var ke=De.apply(W,Ie._args==a?[Ie]:[Ie].concat(Ie._args));return ke===!1&&(Ie.preventDefault(),Ie.stopPropagation()),ke}},Ce.i=ye.length,ye.push(Ce),"addEventListener"in W&&W.addEventListener(j(Ce.e),Ce.proxy,F(Ce,Te))})}function $(W,z,ge,Z,q){var ue=U(W);(z||"").split(/\s/).forEach(function(Te){w(W,Te,ge,Z).forEach(function(me){delete f[ue][me.i],"removeEventListener"in W&&W.removeEventListener(j(me.e),me.proxy,F(me,q))})})}e.event={add:X,remove:$},e.proxy=function(W,z){var ge=2 in arguments&&i.call(arguments,2);if(r(W)){var Z=function(){return W.apply(z,ge?ge.concat(i.call(arguments)):arguments)};return Z._zid=U(W),Z}else{if(l(z))return ge?(ge.unshift(W[z],W),e.proxy.apply(null,ge)):e.proxy(W[z],W);throw new TypeError("expected function")}},e.fn.bind=function(W,z,ge){return this.on(W,z,ge)},e.fn.unbind=function(W,z){return this.off(W,z)},e.fn.one=function(W,z,ge,Z){return this.on(W,z,ge,Z,1)};var re=function(){return!0},ee=function(){return!1},te=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,se={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function pe(W,z){return(z||!W.isDefaultPrevented)&&(z||(z=W),e.each(se,function(ge,Z){var q=z[ge];W[ge]=function(){return this[Z]=re,q&&q.apply(z,arguments)},W[Z]=ee}),W.timeStamp||(W.timeStamp=Date.now()),(z.defaultPrevented!==a?z.defaultPrevented:"returnValue"in z?z.returnValue===!1:z.getPreventDefault&&z.getPreventDefault())&&(W.isDefaultPrevented=re)),W}function _e(W){var z,ge={originalEvent:W};for(z in W)!te.test(z)&&W[z]!==a&&(ge[z]=W[z]);return pe(ge,W)}e.fn.delegate=function(W,z,ge){return this.on(z,W,ge)},e.fn.undelegate=function(W,z,ge){return this.off(z,W,ge)},e.fn.live=function(W,z){return e(document.body).delegate(this.selector,W,z),this},e.fn.die=function(W,z){return e(document.body).undelegate(this.selector,W,z),this},e.fn.on=function(W,z,ge,Z,q){var ue,Te,me=this;return W&&!l(W)?(e.each(W,function(ye,be){me.on(ye,z,ge,be,q)}),me):(!l(z)&&!r(Z)&&Z!==!1&&(Z=ge,ge=z,z=a),(Z===a||ge===!1)&&(Z=ge,ge=a),Z===!1&&(Z=ee),me.each(function(ye,be){q&&(ue=function(Ce){return $(be,Ce.type,Z),Z.apply(this,arguments)}),z&&(Te=function(Ce){var De,Ie=e(Ce.target).closest(z,be).get(0);if(Ie&&Ie!==be)return De=e.extend(_e(Ce),{currentTarget:Ie,liveFired:be}),(ue||Z).apply(Ie,[De].concat(i.call(arguments,1)))}),X(be,W,Z,ge,z,Te||ue)}))},e.fn.off=function(W,z,ge){var Z=this;return W&&!l(W)?(e.each(W,function(q,ue){Z.off(q,z,ue)}),Z):(!l(z)&&!r(ge)&&ge!==!1&&(ge=z,z=a),ge===!1&&(ge=ee),Z.each(function(){$(this,W,ge,z)}))},e.fn.trigger=function(W,z){return W=l(W)||e.isPlainObject(W)?e.Event(W):pe(W),W._args=z,this.each(function(){W.type in m&&typeof this[W.type]=="function"?this[W.type]():"dispatchEvent"in this?this.dispatchEvent(W):e(this).triggerHandler(W,z)})},e.fn.triggerHandler=function(W,z){var ge,Z;return this.each(function(q,ue){ge=_e(l(W)?e.Event(W):W),ge._args=z,ge.target=ue,e.each(w(ue,W.type||W),function(Te,me){if(Z=me.proxy(ge),ge.isImmediatePropagationStopped())return!1})}),Z},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(W){e.fn[W]=function(z){return 0 in arguments?this.bind(W,z):this.trigger(W)}}),e.Event=function(W,z){l(W)||(z=W,W=z.type);var ge=document.createEvent(g[W]||"Events"),Z=!0;if(z)for(var q in z)q=="bubbles"?Z=!!z[q]:ge[q]=z[q];return ge.initEvent(W,Z,!0),pe(ge)}})(Dr);(function(){try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(a,i){try{return e(a,i)}catch{return null}}}})();(function(e){var n=e.zepto,a=n.qsa,i=n.matches;function r(y){return y=e(y),!!(y.width()||y.height())&&y.css("display")!=="none"}var l=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(y){if(y===0)return this},last:function(y,U){if(y===U.length-1)return this},eq:function(y,U,w){if(y===w)return this},contains:function(y,U,w){if(e(this).text().indexOf(w)>-1)return this},has:function(y,U,w){if(n.qsa(this,w).length)return this}},f=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),g=/^\s*>/,T="Zepto"+ +new Date;function m(y,U){y=y.replace(/=#\]/g,'="#"]');var w,I,K=f.exec(y);if(K&&K[2]in l&&(w=l[K[2]],I=K[3],y=K[1],I)){var F=Number(I);isNaN(F)?I=I.replace(/^["']|["']$/g,""):I=F}return U(y,w,I)}n.qsa=function(y,U){return m(U,function(w,I,K){try{var F;!w&&I?w="*":g.test(w)&&(F=e(y).addClass(T),w="."+T+" "+w);var j=a(y,w)}catch(X){throw console.error("error performing selector: %o",U),X}finally{F&&F.removeClass(T)}return I?n.uniq(e.map(j,function(X,$){return I.call(X,$,j,K)})):j})},n.matches=function(y,U){return m(U,function(w,I,K){return(!w||i(y,w))&&(!I||I.call(y,null,K)===y)})}})(Dr);var Be=Dr,Lh=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],Ih=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],Pe={},Oh=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch{return!1}},Ph=function(){try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!n}catch{return!!(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==void 0&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},Dh=function(n){var a=n.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],i;if(/trident/i.test(a[1]))return i=/\brv[ :]+(\d+)/g.exec(n)||[],{name:"IE",version:parseInt(i[1]||"")};if(a[1]==="Chrome"){if(i=n.match(/\bOPR\/(\d+)/),i!=null)return{name:"Opera",version:parseInt(i[1])};if(i=n.match(/\bEdge\/(\d+)/),i!=null)return{name:"Edge",version:parseInt(i[1])}}else/android/i.test(n)&&(i=n.match(/version\/(\d+)/i))&&(a.splice(1,1,"Android WebView"),a.splice(2,1,i[1]));return a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:a[0],version:parseInt(a[1])}},Nh=function(){var n={},a=Pe.userAgent.toLowerCase(),i=Il(Lh),r;try{for(i.s();!(r=i.n()).done;){var l=r.value,f=new RegExp(l.identifier.toLowerCase()),g=f.exec(a);if(g!=null&&g[1]){if(n.name=l.name,n.group=l.group,l.versionIdentifier){var T=new RegExp(l.versionIdentifier.toLowerCase()),m=T.exec(a);m!=null&&m[1]&&mo(m[1],n)}else mo(g[1],n);break}}}catch(y){i.e(y)}finally{i.f()}return n},mo=function(n,a){var i=n.split(".",2);a.fullVersion=n,i[0]&&(a.majorVersion=parseInt(i[0])),i[1]&&(a.minorVersion=parseInt(i[1]))},Fh=function(){var n={},a=Pe.userAgent.toLowerCase(),i=Il(Ih),r;try{for(i.s();!(r=i.n()).done;){var l=r.value,f=new RegExp(l.identifier.toLowerCase()),g=f.exec(a);if(g!=null){if(n.name=l.name,n.group=l.group,l.version)la(l.version,l.versionSeparator?l.versionSeparator:".",n);else if(g[1])la(g[1],l.versionSeparator?l.versionSeparator:".",n);else if(l.versionIdentifier){var T=new RegExp(l.versionIdentifier.toLowerCase()),m=T.exec(a);m!=null&&m[1]&&la(m[1],l.versionSeparator?l.versionSeparator:".",n)}break}}}catch(y){i.e(y)}finally{i.f()}return n},la=function(n,a,i){var r=a.substr(0,1)=="["?new RegExp(a,"g"):a,l=n.split(r,2);a!="."&&(n=n.replace(new RegExp(a,"g"),".")),i.fullVersion=n,l&&l[0]&&(i.majorVersion=parseInt(l[0])),l&&l[1]&&(i.minorVersion=parseInt(l[1]))},Mh=function(){var n={};return n.width=Be(window).width(),n.height=Be(window).height(),n},Bh=function(){switch(window.orientation){case-90:case 90:Pe.viewport.orientation="landscape";break;default:Pe.viewport.orientation="portrait";break}},Uh=function(n){var a=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,i=a.exec(n),r=i&&(i[1]||i[2])||"";return r},Dl=Dh(navigator.userAgent);Pe.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent);Pe.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!Pe.isEdge;Pe.isSafari=/Safari/i.test(navigator.userAgent)&&!Pe.isChrome&&!Pe.isEdge;Pe.isFirefox=/Firefox/i.test(navigator.userAgent);Pe.isLegacyIE=!!window.ActiveXObject;Pe.isIE=Pe.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent);Pe.isIE11=/trident.*rv:11/i.test(navigator.userAgent);Pe.isChromecast=Pe.isChrome&&/CrKey/i.test(navigator.userAgent);Pe.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent);Pe.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);Pe.isAndroid=/Android/i.test(navigator.userAgent);Pe.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent);Pe.isWin8App=/MSAppHost/i.test(navigator.userAgent);Pe.isWiiU=/WiiU/i.test(navigator.userAgent);Pe.isPS4=/PlayStation 4/i.test(navigator.userAgent);Pe.hasLocalstorage=Oh();Pe.hasFlash=Ph();Pe.name=Dl.name;Pe.version=Dl.version;Pe.userAgent=navigator.userAgent;Pe.data=Nh();Pe.os=Fh();Pe.isWindows=/^Windows$/i.test(Pe.os.group);Pe.isMacOS=/^Mac OS$/i.test(Pe.os.group);Pe.isLinux=/^Linux$/i.test(Pe.os.group);Pe.viewport=Mh();Pe.device=Uh(Pe.userAgent);typeof window.orientation<"u"&&Bh();var ua={},ca=[],Nl=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Fl=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function Ml(e,n){if(n)for(var a in n){var i=Object.getOwnPropertyDescriptor(n,a);i?Object.defineProperty(e,a,i):e[a]=n[a]}return e}function xi(e,n){var a=function(i){At(l,i);var r=Et(l);function l(){var f;nt(this,l);for(var g=arguments.length,T=new Array(g),m=0;m<g;m++)T[m]=arguments[m];return f=r.call.apply(r,[this].concat(T)),n.initialize&&n.initialize.apply(Vn(f),T),f}return at(l)}(e);return Ml(a.prototype,n),a}function Vh(e,n){if(!isFinite(e))return"--:--";e=e*1e3,e=parseInt(e/1e3);var a=e%60;e=parseInt(e/60);var i=e%60;e=parseInt(e/60);var r=e%24,l=parseInt(e/24),f="";return l&&l>0&&(f+=l+":",r<1&&(f+="00:")),(r&&r>0||n)&&(f+=("0"+r).slice(-2)+":"),f+=("0"+i).slice(-2)+":",f+=("0"+a).slice(-2),f.trim()}var Di={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(n){if(n.requestFullscreen)return n.requestFullscreen();if(n.webkitRequestFullscreen){if(typeof n.then=="function")return n.webkitRequestFullscreen();n.webkitRequestFullscreen()}else{if(n.mozRequestFullScreen)return n.mozRequestFullScreen();if(n.msRequestFullscreen)return n.msRequestFullscreen();n.querySelector&&n.querySelector("video")&&n.querySelector("video").webkitEnterFullScreen?n.querySelector("video").webkitEnterFullScreen():n.webkitEnterFullScreen&&n.webkitEnterFullScreen()}},cancelFullscreen:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;n.exitFullscreen?n.exitFullscreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},Kh=function(){function e(){nt(this,e)}return at(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(a){try{return this._defaultConfig()[a].parse(this._defaultConfig()[a].value)}catch{return}}},{key:"_createKeyspace",value:function(a){return"clappr.".concat(document.domain,".").concat(a)}},{key:"restore",value:function(a){return Pe.hasLocalstorage&&localStorage[this._createKeyspace(a)]?this._defaultConfig()[a].parse(localStorage[this._createKeyspace(a)]):this._defaultValueFor(a)}},{key:"persist",value:function(a,i){if(Pe.hasLocalstorage)try{return localStorage[this._createKeyspace(a)]=i,!0}catch{return!1}}}]),e}(),Ra=function(){function e(){nt(this,e)}return at(e,null,[{key:"params",get:function(){var a=window.location.search.substring(1);return a!==this.query&&(this._urlParams=this.parse(a),this.query=a),this._urlParams}},{key:"hashParams",get:function(){var a=window.location.hash.substring(1);return a!==this.hash&&(this._hashParams=this.parse(a),this.hash=a),this._hashParams}},{key:"parse",value:function(a){for(var i,r=/\+/g,l=/([^&=]+)=?([^&]*)/g,f=function(m){return decodeURIComponent(m.replace(r," "))},g={};i=l.exec(a);)g[f(i[1]).toLowerCase()]=f(i[2]);return g}}]),e}();function Bl(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"t",n=0,a=Ra.params[e]||Ra.hashParams[e]||"",i=a.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach(function(l){if(l){var f=l[l.length-1],g=parseInt(l.slice(0,l.length-1),10);n+=g*r[f]}})}else a&&(n=parseInt(a,10));return n}function $i(e){ua[e]||(ua[e]=0);var n=++ua[e];return e+n}function Sn(e){return e-parseFloat(e)+1>=0}function Ul(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function Vl(){return window.navigator&&window.navigator.language}function Gh(){return window.performance&&window.performance.now?performance.now():Date.now()}function Hh(e,n){var a=e.indexOf(n);a>=0&&e.splice(a,1)}function jh(e,n){return e===void 0||n===void 0?!1:n.find(function(a){return e.toLowerCase()===a.toLowerCase()})!==void 0}function Kl(e,n){n=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:Pl.mp4,element:null},n);var a=n.element?n.element:document.createElement(n.type);a.muted=n.muted,n.muted===!0&&a.setAttribute("muted","muted"),n.inline===!0&&a.setAttribute("playsinline","playsinline"),a.src=n.source;var i=a.play(),r=setTimeout(function(){l(!1,new Error("Timeout ".concat(n.timeout," ms has been reached")))},n.timeout),l=function(g){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;clearTimeout(r),e(g,T)};i!==void 0?i.then(function(){return l(!0)}).catch(function(f){return l(!1,f)}):l(!0)}var Ei=function(){function e(){nt(this,e)}return at(e,null,[{key:"configure",value:function(a){this.options=Be.extend(!0,this.options,a)}},{key:"create",value:function(a){return this.options.recycleVideo&&a==="video"&&ca.length>0?ca.shift():document.createElement(a)}},{key:"garbage",value:function(a){!this.options.recycleVideo||a.tagName.toUpperCase()!=="VIDEO"||(Be(a).children().remove(),Object.values(a.attributes).forEach(function(i){return a.removeAttribute(i.name)}),ca.push(a))}}]),e}();Ei.options={recycleVideo:!1};var Gl=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;nt(this,e),this.delay=n,this.lastTime=0}return at(e,[{key:"handle",value:function(a,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=new Date().getTime(),f=l-this.lastTime;f<this.delay&&f>0&&(i(),r&&a.preventDefault()),this.lastTime=l}}]),e}(),Nr={Config:Kh,Fullscreen:Di,QueryString:Ra,DomRecycler:Ei,assign:Ml,extend:xi,formatTime:Vh,seekStringToSeconds:Bl,uniqueId:$i,currentScriptUrl:Ul,isNumber:Sn,requestAnimationFrame:Nl,cancelAnimationFrame:Fl,getBrowserLanguage:Vl,now:Gh,removeArrayItem:Hh,listContainsIgnoreCase:jh,canAutoPlayMedia:Kl,Media:Pl,DoubleEventHandler:Gl},Kn="font-weight: bold; font-size: 13px;",Yh="color: #006600;"+Kn,Wh="color: #0000ff;"+Kn,Hl="color: #ff8000;"+Kn,yo="color: #ff0000;"+Kn,jl=0,wa=1,Yl=2,ts=3,zh=ts,$h=[Wh,Yh,Hl,yo,yo],Ao=["debug","info","warn","error","disabled"],ze=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wa,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zh;nt(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=n,this.previousLevel=this.level,this.offLevel=a}return at(e,[{key:"level",get:function(){return this._level},set:function(a){this._level=a}},{key:"debug",value:function(a){this.log(a,jl,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(a){this.log(a,wa,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(a){this.log(a,Yl,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(a){this.log(a,ts,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+Ao[this.level],Hl)}},{key:"log",value:function(a,i,r){if(!(this.EXCLUDE_LIST.indexOf(r[0])>=0)&&!(i<this.level)){r||(r=a,a=null);var l=$h[i],f="";a&&(f="["+a+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+Ao[i]+"]"+f,l].concat(r))}}}]),e}();ze.LEVEL_DEBUG=jl;ze.LEVEL_INFO=wa;ze.LEVEL_WARN=Yl;ze.LEVEL_ERROR=ts;ze.getInstance=function(){return this._instance===void 0&&(this._instance=new this),this._instance};ze.setLevel=function(e){this.getInstance().level=e};ze.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)};ze.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)};ze.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)};ze.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Xh=Array.prototype.slice,Eo=/\s+/,hn=function(n,a,i,r){if(!i)return!0;if(Ai(i)==="object"){for(var l in i)n[a].apply(n,[l,i[l]].concat(r));return!1}if(Eo.test(i)){for(var f=i.split(Eo),g=0,T=f.length;g<T;g++)n[a].apply(n,[f[g]].concat(r));return!1}return!0},_o=function(n,a,i,r){var l,f=-1,g=n.length,T=a[0],m=a[1],y=a[2];U();function U(){try{switch(a.length){case 0:for(;++f<g;)(l=n[f]).callback.call(l.ctx);return;case 1:for(;++f<g;)(l=n[f]).callback.call(l.ctx,T);return;case 2:for(;++f<g;)(l=n[f]).callback.call(l.ctx,T,m);return;case 3:for(;++f<g;)(l=n[f]).callback.call(l.ctx,T,m,y);return;default:for(;++f<g;)(l=n[f]).callback.apply(l.ctx,a);return}}catch(w){ze.error.apply(ze,[i,"error on event",r,"trigger","-",w]),U()}}},S=function(){function e(){nt(this,e)}return at(e,[{key:"on",value:function(a,i,r){if(!hn(this,"on",a,[i,r])||!i)return this;this._events||(this._events={});var l=this._events[a]||(this._events[a]=[]);return l.push({callback:i,context:r,ctx:r||this}),this}},{key:"once",value:function(a,i,r){var l=this,f;if(!hn(this,"once",a,[i,r])||!i)return this;var g=function(){return l.off(a,f)};return f=function(){g(),i.apply(this,arguments)},this.on(a,f,r)}},{key:"off",value:function(a,i,r){var l,f,g,T,m,y,U,w;if(!this._events||!hn(this,"off",a,[i,r]))return this;if(!a&&!i&&!r)return this._events=void 0,this;for(T=a?[a]:Object.keys(this._events),m=0,y=T.length;m<y;m++)if(a=T[m],g=this._events[a],g){if(this._events[a]=l=[],i||r)for(U=0,w=g.length;U<w;U++)f=g[U],(i&&i!==f.callback&&i!==f.callback._callback||r&&r!==f.context)&&l.push(f);l.length||delete this._events[a]}return this}},{key:"trigger",value:function(a){var i=this.name||this.constructor.name;if(ze.debug.apply(ze,[i].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var r=Xh.call(arguments,1);if(!hn(this,"trigger",a,r))return this;var l=this._events[a],f=this._events.all;return l&&_o(l,r,i,a),f&&_o(f,arguments,i,a),this}},{key:"stopListening",value:function(a,i,r){var l=this._listeningTo;if(!l)return this;var f=!i&&!r;!r&&Ai(i)==="object"&&(r=this),a&&((l={})[a._listenId]=a);for(var g in l)a=l[g],a.off(i,r,this),(f||Object.keys(a._events).length===0)&&delete this._listeningTo[g];return this}}],[{key:"register",value:function(a){e.Custom||(e.Custom={});var i=typeof a=="string"&&a.toUpperCase().trim();i&&!e.Custom[i]?e.Custom[i]=i.toLowerCase().split("_").map(function(r,l){return l===0?r:r=r[0].toUpperCase()+r.slice(1)}).join(""):ze.error("Events","Error when register event: "+a)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter(function(a){return typeof e.Custom[a]=="string"})}}]),e}(),bo={listenTo:"on",listenToOnce:"once"};Object.keys(bo).forEach(function(e){S.prototype[e]=function(n,a,i){var r=this._listeningTo||(this._listeningTo={}),l=n._listenId||(n._listenId=$i("l"));return r[l]=n,!i&&Ai(a)==="object"&&(i=this),n[bo[e]](a,i,this),this}});S.PLAYER_READY="ready";S.PLAYER_RESIZE="resize";S.PLAYER_FULLSCREEN="fullscreen";S.PLAYER_PLAY="play";S.PLAYER_PAUSE="pause";S.PLAYER_STOP="stop";S.PLAYER_ENDED="ended";S.PLAYER_SEEK="seek";S.PLAYER_ERROR="playererror";S.ERROR="error";S.PLAYER_TIMEUPDATE="timeupdate";S.PLAYER_VOLUMEUPDATE="volumeupdate";S.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable";S.PLAYBACK_PIP_ENTER="playback:picture-in-picture:enter";S.PLAYBACK_PIP_EXIT="playback:picture-in-picture:exit";S.PLAYBACK_PROGRESS="playback:progress";S.PLAYBACK_TIMEUPDATE="playback:timeupdate";S.PLAYBACK_READY="playback:ready";S.PLAYBACK_BUFFERING="playback:buffering";S.PLAYBACK_BUFFERFULL="playback:bufferfull";S.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate";S.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata";S.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate";S.PLAYBACK_BITRATE="playback:bitrate";S.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available";S.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start";S.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end";S.PLAYBACK_PLAYBACKSTATE="playback:playbackstate";S.PLAYBACK_DVR="playback:dvr";S.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable";S.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable";S.PLAYBACK_ENDED="playback:ended";S.PLAYBACK_PLAY_INTENT="playback:play:intent";S.PLAYBACK_PLAY="playback:play";S.PLAYBACK_PAUSE="playback:pause";S.PLAYBACK_SEEK="playback:seek";S.PLAYBACK_SEEKED="playback:seeked";S.PLAYBACK_STOP="playback:stop";S.PLAYBACK_ERROR="playback:error";S.PLAYBACK_STATS_ADD="playback:stats:add";S.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded";S.PLAYBACK_LEVEL_SWITCH="playback:level:switch";S.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available";S.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed";S.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available";S.PLAYBACK_AUDIO_CHANGED="playback:audio:changed";S.CORE_CONTAINERS_CREATED="core:containers:created";S.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed";S.CORE_OPTIONS_CHANGE="core:options:change";S.CORE_READY="core:ready";S.CORE_FULLSCREEN="core:fullscreen";S.CORE_RESIZE="core:resize";S.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed";S.CORE_MOUSE_MOVE="core:mousemove";S.CORE_MOUSE_LEAVE="core:mouseleave";S.CONTAINER_PLAYBACKSTATE="container:playbackstate";S.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr";S.CONTAINER_BITRATE="container:bitrate";S.CONTAINER_STATS_REPORT="container:stats:report";S.CONTAINER_DESTROYED="container:destroyed";S.CONTAINER_READY="container:ready";S.CONTAINER_RESIZE="container:resize";S.CONTAINER_ERROR="container:error";S.CONTAINER_LOADEDMETADATA="container:loadedmetadata";S.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available";S.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed";S.CONTAINER_AUDIO_AVAILABLE="container:audio:available";S.CONTAINER_AUDIO_CHANGED="container:audio:changed";S.CONTAINER_TIMEUPDATE="container:timeupdate";S.CONTAINER_PROGRESS="container:progress";S.CONTAINER_PLAY="container:play";S.CONTAINER_STOP="container:stop";S.CONTAINER_PAUSE="container:pause";S.CONTAINER_ENDED="container:ended";S.CONTAINER_CLICK="container:click";S.CONTAINER_DBLCLICK="container:dblclick";S.CONTAINER_CONTEXTMENU="container:contextmenu";S.CONTAINER_MOUSE_ENTER="container:mouseenter";S.CONTAINER_MOUSE_LEAVE="container:mouseleave";S.CONTAINER_MOUSE_UP="container:mouseup";S.CONTAINER_MOUSE_DOWN="container:mousedown";S.CONTAINER_PIP_ENTER="container:picture-in-picture:enter";S.CONTAINER_PIP_EXIT="container:picture-in-picture:exit";S.CONTAINER_SEEK="container:seek";S.CONTAINER_SEEKED="container:seeked";S.CONTAINER_VOLUME="container:volume";S.CONTAINER_FULLSCREEN="container:fullscreen";S.CONTAINER_STATE_BUFFERING="container:state:buffering";S.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull";S.CONTAINER_SETTINGSUPDATE="container:settingsupdate";S.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate";S.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show";S.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide";S.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable";S.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable";S.CONTAINER_STATS_ADD="container:stats:add";S.CONTAINER_OPTIONS_CHANGE="container:options:change";S.MEDIACONTROL_RENDERED="mediacontrol:rendered";S.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen";S.MEDIACONTROL_SHOW="mediacontrol:show";S.MEDIACONTROL_HIDE="mediacontrol:hide";S.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar";S.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar";S.MEDIACONTROL_PLAYING="mediacontrol:playing";S.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying";S.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged";S.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var ri=function(e){At(a,e);var n=Et(a);function a(){var i,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nt(this,a),i=n.call(this,r),i._options=r,i.uniqueId=$i("o"),i}return at(a,[{key:"options",get:function(){return this._options}}]),a}(S),Yr={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},fa=/(.)^/,qh={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Zh=/\\|'|\r|\n|\t|\u2028|\u2029/g,Qh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Jh=new RegExp(`[&<>"']`,"g"),To=function(n){return n===null?"":(""+n).replace(Jh,function(a){return Qh[a]})},eg=0,Xt=function(n,a){var i,r=new RegExp([(Yr.escape||fa).source,(Yr.interpolate||fa).source,(Yr.evaluate||fa).source].join("|")+"|$","g"),l=0,f="__p+='";n.replace(r,function(T,m,y,U,w){return f+=n.slice(l,w).replace(Zh,function(I){return"\\"+qh[I]}),m&&(f+=`'+
((__t=(`+m+`))==null?'':escapeExpr(__t))+
'`),y&&(f+=`'+
((__t=(`+y+`))==null?'':__t)+
'`),U&&(f+=`';
`+U+`
__p+='`),l=w+T.length,T}),f+=`';
`,Yr.variable||(f=`with(obj||{}){
`+f+`}
`),f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
//# sourceURL=/microtemplates/source[`+eg+++"]";try{i=new Function(Yr.variable||"obj","escapeExpr",f)}catch(T){throw T.source=f,T}if(a)return i(a,To);var g=function(m){return i.call(this,m,To)};return g.source="function("+(Yr.variable||"obj")+`){
`+f+"}",g};Xt.settings=Yr;var Kt={getStyleFor:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{baseUrl:""};return Be('<style class="clappr-style"></style>').html(Xt(n.toString())(a))}},tg=/^(\S+)\s*(.*)$/,Xi=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i),r.cid=$i("c"),r._ensureElement(),r.delegateEvents(),r}return at(a,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(r){return this.$el.find(r)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(r,l){return this.$el&&this.undelegateEvents(),this.$el=Be.zepto.isZ(r)?r:Be(r),this.el=this.$el[0],l!==!1&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(r){r||(r=this.events),this.undelegateEvents();for(var l in r){var f=r[l];if(f&&f.constructor!==Function&&(f=this[r[l]]),!!f){var g=l.match(tg),T=g[1],m=g[2];T+=".delegateEvents"+this.cid,m===""?this.$el.on(T,f.bind(this)):this.$el.on(T,m,f.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var r=Be.extend(!0,{},this.attributes);this.id&&(r.id=this.id),this.className&&(r.class=this.className);var l=Be(Ei.create(this.tagName)).attr(r);this.setElement(l,!1)}}}]),a}(ri),nr=function(e){At(a,e);var n=Et(a);function a(){var i,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;return nt(this,a),i=n.call(this,r),i.core=l,i}return at(a,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(r){if(!this.core){ze.warn(this.name,"Core is not set. Error: ",r);return}this.core.trigger(S.ERROR,r)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),a}(ri),Fr={createError:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{useCodePrefix:!0},i=this.constructor&&this.constructor.type||"",r=this.name||i,l=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,f="".concat(r,":").concat(n&&n.code||"unknown"),g={description:"",level:nr.Levels.FATAL,origin:r,scope:i,raw:{}},T=Object.assign({},g,n,{code:a.useCodePrefix?f:n.code});if(l&&T.level==nr.Levels.FATAL&&!T.UI){var m={title:l.t("default_error_title"),message:l.t("default_error_message")};T.UI=m}return this.playerError?this.playerError.createError(T):ze.warn(r,"PlayerError is not defined. Error: ",T),T}},vr=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i.options),r.core=i,r.enabled=!0,r.bindEvents(),r.render(),r}return at(a,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),a}(Xi);Object.assign(vr.prototype,Fr);vr.extend=function(e){return xi(vr,e)};vr.type="core";var rg=`.container[data-container] {
  position: absolute;
  background-color: black;
  height: 100%;
  width: 100%;
  max-width: 100%; }
  .container[data-container] .chromeless {
    cursor: default; }

[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {
  cursor: pointer; }
`,Wl=function(e){At(a,e);var n=Et(a);function a(i,r,l){var f;return nt(this,a),f=n.call(this,i),f._i18n=r,f.currentTime=0,f.volume=100,f.playback=i.playback,f.playerError=l,f.settings=Be.extend(!0,{},f.playback.settings),f.isReady=!1,f.mediaControlDisabled=!1,f.plugins=[f.playback],f.dblTapHandler=new Gl(500),f.clickTimer=null,f.clickDelay=200,f.actionsMetadata={},f.bindEvents(),f}return at(a,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(r){this.playback.closedCaptionsTrackId=r}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"isPiPActive",get:function(){return this.playback.isPiPActive}},{key:"bindEvents",value:function(){this.listenTo(this.playback,S.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,S.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,S.PLAYBACK_READY,this.ready),this.listenTo(this.playback,S.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,S.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,S.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,S.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,S.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,S.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,S.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,S.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,S.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,S.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,S.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,S.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,S.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,S.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,S.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,S.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,S.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,S.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,S.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,S.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,S.PLAYBACK_AUDIO_CHANGED,this.audioChanged),this.listenTo(this.playback,S.PLAYBACK_PIP_ENTER,this.onEnterPiP),this.listenTo(this.playback,S.PLAYBACK_PIP_EXIT,this.onExitPiP)}},{key:"subtitleAvailable",value:function(){this.trigger(S.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(r){this.trigger(S.CONTAINER_SUBTITLE_CHANGED,r)}},{key:"audioAvailable",value:function(r){this.trigger(S.CONTAINER_AUDIO_AVAILABLE,r)}},{key:"audioChanged",value:function(r){this.trigger(S.CONTAINER_AUDIO_CHANGED,r)}},{key:"playbackStateChanged",value:function(r){this.trigger(S.CONTAINER_PLAYBACKSTATE,r)}},{key:"playbackDvrStateChanged",value:function(r){this.settings=this.playback.settings,this.dvrInUse=r,this.trigger(S.CONTAINER_PLAYBACKDVRSTATECHANGED,r)}},{key:"updateBitrate",value:function(r){this.trigger(S.CONTAINER_BITRATE,r)}},{key:"statsReport",value:function(r){this.trigger(S.CONTAINER_STATS_REPORT,r)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(S.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach(function(r){return r.destroy()}),this.$el.remove()}},{key:"setStyle",value:function(r){this.$el.css(r)}},{key:"animate",value:function(r,l){return this.$el.animate(r,l).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(S.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(r){this.isReady||this.ready(),this.trigger(S.CONTAINER_ERROR,r,this.name)}},{key:"loadedMetadata",value:function(r){this.trigger(S.CONTAINER_LOADEDMETADATA,r)}},{key:"timeUpdated",value:function(r){this.currentTime=r.current,this.trigger(S.CONTAINER_TIMEUPDATE,r,this.name)}},{key:"onProgress",value:function(){for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];this.trigger.apply(this,[S.CONTAINER_PROGRESS].concat(l,[this.name]))}},{key:"playing",value:function(){this.trigger(S.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(S.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(S.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.actionsMetadata.playEvent=r,this.playback.play(r)}},{key:"stop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.actionsMetadata.stopEvent=r,this.playback.stop(r),this.currentTime=0}},{key:"switchAudioTrack",value:function(r){this.playback.switchAudioTrack(r)}},{key:"pause",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.actionsMetadata.pauseEvent=r,this.playback.pause(r)}},{key:"onEnded",value:function(){this.trigger(S.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var r=this;(!this.options.chromeless||this.options.allowUserInteraction)&&(this.clickTimer=setTimeout(function(){r.clickTimer&&r.trigger(S.CONTAINER_CLICK,r,r.name)},this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){(!this.options.chromeless||this.options.allowUserInteraction)&&(this.cancelClicked(),this.trigger(S.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(r){var l=this;(!this.options.chromeless||this.options.allowUserInteraction)&&this.dblTapHandler.handle(r,function(){l.cancelClicked(),l.trigger(S.CONTAINER_DBLCLICK,l,l.name)})}},{key:"onContextMenu",value:function(r){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(S.CONTAINER_CONTEXTMENU,r,this.name)}},{key:"seek",value:function(r){this.playback.seek(r)}},{key:"onSeek",value:function(r){this.trigger(S.CONTAINER_SEEK,r,this.name)}},{key:"onSeeked",value:function(){this.trigger(S.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(r){var l=this.getDuration();if(r>=0&&r<=100){var f=l*(r/100);this.seek(f)}}},{key:"setVolume",value:function(r){this.volume=parseFloat(r),this.trigger(S.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(S.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(S.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(S.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"onEnterPiP",value:function(){this.trigger(S.CONTAINER_PIP_ENTER,this.name)}},{key:"onExitPiP",value:function(){this.trigger(S.CONTAINER_PIP_EXIT,this.name)}},{key:"addPlugin",value:function(r){this.plugins.push(r)}},{key:"hasPlugin",value:function(r){return!!this.getPlugin(r)}},{key:"getPlugin",value:function(r){return this.plugins.filter(function(l){return l.name===r})[0]}},{key:"mouseEnter",value:function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(S.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(S.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(S.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(S.CONTAINER_MOUSE_DOWN)}},{key:"enterPiP",value:function(){this.playback.enterPiP()}},{key:"exitPiP",value:function(){this.playback.exitPiP()}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(S.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(r){this.trigger(S.CONTAINER_HIGHDEFINITIONUPDATE,r)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(S.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(S.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var r=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval(function(){return r.checkResize()},500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var r={width:this.el.clientWidth,height:this.el.clientHeight},l=this.currentSize||{},f=l.width,g=l.height,T=g!==r.height||f!==r.width;T&&(this.currentSize=r,this.trigger(S.CONTAINER_RESIZE,r))}},{key:"configure",value:function(r){this._options=Be.extend(!0,this._options,r),this.updateStyle(),this.playback.configure(this.options),this.trigger(S.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var r=Kt.getStyleFor(rg.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(r[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),a}(Xi);Object.assign(Wl.prototype,Fr);var He=function(e){At(a,e);var n=Et(a);function a(i,r,l){var f;return nt(this,a),f=n.call(this,i),f.settings={},f._i18n=r,f.playerError=l,f._consented=!1,f}return at(a,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"latency",get:function(){return null}},{key:"currentProgramDateTime",get:function(){return null}},{key:"isPiPActive",get:function(){return!1}},{key:"consent",value:function(r){typeof r=="function"&&r()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"enterPiP",value:function(){}},{key:"exitPiP",value:function(){}},{key:"seek",value:function(r){}},{key:"seekPercentage",value:function(r){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(r){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(r){}},{key:"getPlaybackType",value:function(){return a.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(r){}},{key:"configure",value:function(r){this._options=Be.extend(!0,this._options,r)}},{key:"attemptAutoPlay",value:function(){var r=this;this.canAutoPlay(function(l,f){l&&r.play()})}},{key:"canAutoPlay",value:function(r){r(!0,null)}}]),a}(Xi);Object.assign(He.prototype,Fr);He.extend=function(e){return xi(He,e)};He.canPlay=function(e,n){return!1};He.VOD="vod";He.AOD="aod";He.LIVE="live";He.NO_OP="no_op";He.type="playback";var ig=function(e){At(a,e);var n=Et(a);function a(i,r,l,f){var g;return nt(this,a),g=n.call(this,i),g._i18n=l,g.loader=r,g.playerError=f,g}return at(a,[{key:"options",get:function(){return this._options},set:function(r){this._options=r}},{key:"createContainers",value:function(){var r=this;return Be.Deferred(function(l){l.resolve(r.options.sources.map(function(f){return r.createContainer(f)}))})}},{key:"findPlaybackPlugin",value:function(r,l){return this.loader.playbackPlugins.filter(function(f){return f.canPlay(r,l)})[0]}},{key:"createContainer",value:function(r){var l=null,f=this.options.mimeType;Ai(r)==="object"?(l=r.source.toString(),r.mimeType&&(f=r.mimeType)):l=r.toString(),l.match(/^\/\//)&&(l=window.location.protocol+l);var g=dn(dn({},this.options),{},{src:l,mimeType:f}),T=this.findPlaybackPlugin(l,f),m=T?new T(g,this._i18n,this.playerError):new He;g=dn(dn({},g),{},{playback:m});var y=new Wl(g,this._i18n,this.playerError),U=Be.Deferred();return U.promise(y),this.addContainerPlugins(y),this.listenToOnce(y,S.CONTAINER_READY,function(){return U.resolve(y)}),y}},{key:"addContainerPlugins",value:function(r){this.loader.containerPlugins.forEach(function(l){r.addPlugin(new l(r))})}}]),a}(ri),ng=`[data-player] {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -o-user-select: none;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transform: translate3d(0, 0, 0);
  position: relative;
  margin: 0;
  padding: 0;
  border: 0;
  font-style: normal;
  font-weight: normal;
  text-align: center;
  overflow: hidden;
  font-size: 100%;
  font-family: "Roboto", "Open Sans", Arial, sans-serif;
  text-shadow: 0 0 0;
  box-sizing: border-box; }
  [data-player]:focus {
    outline: 0; }
  [data-player] * {
    box-sizing: inherit; }
  [data-player] > * {
    float: none;
    max-width: none; }
  [data-player] > div {
    display: block; }
  [data-player].fullscreen {
    width: 100% !important;
    height: 100% !important;
    top: 0;
    left: 0; }
  [data-player].nocursor {
    cursor: none; }

.clappr-style {
  display: none !important; }
`,ag=`[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,
[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,
[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,
[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,
[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,
[data-player] b, [data-player] u, [data-player] i, [data-player] center,
[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,
[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,
[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,
[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,
[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,
[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,
[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {
  margin: 0;
  padding: 0;
  border: 0;
  font: inherit;
  font-size: 100%;
  vertical-align: baseline; }

[data-player] table {
  border-collapse: collapse;
  border-spacing: 0; }

[data-player] caption, [data-player] th, [data-player] td {
  text-align: left;
  font-weight: normal;
  vertical-align: middle; }

[data-player] q, [data-player] blockquote {
  quotes: none; }
  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {
    content: "";
    content: none; }

[data-player] a img {
  border: none; }
`,zl=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i),r.playerError=new nr(i,Vn(r)),r.configureDomRecycler(),r.firstResize=!0,r.styleRendered=!1,r.plugins=[],r.containers=[],r._boundFullscreenHandler=function(){return r.handleFullscreenChange()},Be(document).bind("fullscreenchange",r._boundFullscreenHandler),Be(document).bind("MSFullscreenChange",r._boundFullscreenHandler),Be(document).bind("mozfullscreenchange",r._boundFullscreenHandler),Pe.isMobile&&Be(window).bind("resize",function(l){r.handleWindowResize(l)}),r}return at(a,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(l){return l}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl?this._dummyMediaControl:(this._dummyMediaControl=new vr(this),this._dummyMediaControl)}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(r){this._activeContainer=r,this.trigger(S.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.find("video")[0]:this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var r=this.options&&this.options.playback&&this.options.playback.recycleVideo;Ei.configure({recycleVideo:r})}},{key:"createContainers",value:function(r){this.defer=Be.Deferred(),this.defer.promise(this),this.containerFactory=new ig(r,r.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var r=this;this.containerFactory.createContainers().then(function(l){return r.setupContainers(l)}).then(function(l){return r.resolveOnContainersReady(l)})}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){Pe.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:Be(window).width(),height:Be(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:Be(window).width(),height:Be(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(r){!Sn(r.height)&&!Sn(r.width)?(this.el.style.height="".concat(r.height),this.el.style.width="".concat(r.width)):(this.el.style.height="".concat(r.height,"px"),this.el.style.width="".concat(r.width,"px")),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=r.width,this.options.height=r.height,this.currentSize=r,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var r=this;this.disableResizeObserver();var l=function(){r.triggerResize({width:r.el.clientWidth,height:r.el.clientHeight})};this.resizeObserverInterval=setInterval(l,500)}},{key:"triggerResize",value:function(r){var l=this.firstResize||this.oldHeight!==r.height||this.oldWidth!==r.width;l&&(this.oldHeight=r.height,this.oldWidth=r.width,this.computedSize=r,this.firstResize=!1,this.trigger(S.CORE_RESIZE,r))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(r){var l=this;Be.when.apply(Be,r).done(function(){l.defer.resolve(l),l.ready=!0,l.trigger(S.CORE_READY)})}},{key:"addPlugin",value:function(r){this.plugins.push(r)}},{key:"hasPlugin",value:function(r){return!!this.getPlugin(r)}},{key:"getPlugin",value:function(r){return this.plugins.filter(function(l){return l.name===r})[0]}},{key:"load",value:function(r,l){this.options.mimeType=l,r=r&&r.constructor===Array?r:[r],this.options.sources=r,this.containers.forEach(function(f){return f.destroy()}),this.containerFactory.options=Be.extend(!0,this.options,{sources:r}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach(function(r){return r.destroy()}),this.plugins.forEach(function(r){return r.destroy()}),this.$el.remove(),Be(document).unbind("fullscreenchange",this._boundFullscreenHandler),Be(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),Be(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(S.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(r){var l=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==l&&(this._screenOrientation=l,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(S.CORE_SCREEN_ORIENTATION_CHANGED,{event:r,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(r){this.stopListening(r),this.containers=this.containers.filter(function(l){return l!==r})}},{key:"setupContainer",value:function(r){this.listenTo(r,S.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(r)}},{key:"setupContainers",value:function(r){return r.forEach(this.setupContainer.bind(this)),this.trigger(S.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=r[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var r=this;this.containers.forEach(function(l){return r.el.appendChild(l.render().el)})}},{key:"createContainer",value:function(r,l){var f=this.containerFactory.createContainer(r,l);return this.setupContainer(f),this.el.appendChild(f.render().el),f}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var r=Di.fullscreenElement();return r&&r===this.el||r&&r===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var r=this;if(this.isFullscreen()){var l=Pe.isiOS?this.activePlaybackEl:document;Di.cancelFullscreen(l),!Pe.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var f=Pe.isiOS?this.activePlaybackEl:this.el;if(!f)return;Pe.isSafari||Pe.isiOS?Di.requestFullscreen(f):Di.requestFullscreen(f).then(function(g){return g},function(g){return setTimeout(function(){if(!r.isFullscreen())throw new ReferenceError(g)},600)}),!Pe.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(r){this.trigger(S.CORE_MOUSE_MOVE,r)}},{key:"onMouseLeave",value:function(r){this.trigger(S.CORE_MOUSE_LEAVE,r)}},{key:"configure",value:function(r){var l=this;this._options=Be.extend(!0,this._options,r),this.configureDomRecycler();var f=r.source||r.sources;f&&this.load(f,r.mimeType||this.options.mimeType),this.trigger(S.CORE_OPTIONS_CHANGE,r),this.containers.forEach(function(g){return g.configure(l.options)})}},{key:"appendToParent",value:function(){var r=this.$el.parent()&&this.$el.parent().length;!r&&this.$el.appendTo(this.options.parentElement)}},{key:"appendStyles",value:function(){if(!this.styleRendered){var r=Kt.getStyleFor(ng.toString(),{baseUrl:this.options.baseUrl});if(this.$el.append(r[0]),this.options.includeResetStyle){var l=Kt.getStyleFor(ag.toString(),{baseUrl:this.options.baseUrl});this.$el.append(l[0])}this.styleRendered=!0}}},{key:"render",value:function(){this.appendStyles(),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var r={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=r,this.updateSize(),this.enableResizeObserver(),this}}]),a}(Xi);Object.assign(zl.prototype,Fr);var sg=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i.options),r.player=i,r}return at(a,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new zl(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var r=this;return this.loader.corePlugins.forEach(function(l){var f=new l(r.core);r.core.addPlugin(f),r.setupExternalInterface(f)}),this.core}},{key:"setupExternalInterface",value:function(r){var l=r.getExternalInterface();for(var f in l)this.player[f]=l[f].bind(r)}}]),a}(ri),og=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,gn=function(){function e(n,a,i){nt(this,e),this.major=parseInt(n||0,10),this.minor=parseInt(a||0,10),this.patch=parseInt(i||0,10)}return at(e,[{key:"compare",value:function(a){var i=this.major-a.major;return i=i||this.minor-a.minor,i=i||this.patch-a.patch,i}},{key:"inc",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"patch";return typeof this[a]<"u"&&(this[a]+=1),this}},{key:"satisfies",value:function(a,i){return this.compare(a)>=0&&(!i||this.compare(i)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=a.match(og)||[],r=ka(i,4),l=r[1],f=r[2],g=r[3];return typeof l>"u"?null:new e(l,f,g)}}]),e}(),xo=function(n,a){return!n||!a?{}:Object.entries(n).filter(function(i){var r=ka(i,2),l=r[1];return l.type===a}).reduce(function(i,r){var l=ka(r,2),f=l[0],g=l[1];return i[f]=g,i},{})},ii=function(){var e={plugins:{},playbacks:[]},n="0.7.2";return function(){function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;nt(this,a),this.playerId=r,this.playbackPlugins=pi(e.playbacks);var l=a.registeredPlugins,f=l.core,g=l.container;this.containerPlugins=Object.values(g),this.corePlugins=Object.values(f),Array.isArray(i)||this.validateExternalPluginsType(i),this.addExternalPlugins(i)}return at(a,[{key:"groupPluginsByType",value:function(r){return Array.isArray(r)&&(r=r.reduce(function(l,f){return l[f.type]||(l[f.type]=[]),l[f.type].push(f),l},{})),r}},{key:"removeDups",value:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=function(U,w){return U[w.prototype.name]&&l||(U[w.prototype.name]&&delete U[w.prototype.name],U[w.prototype.name]=w),U},g=r.reduceRight(f,Object.create(null)),T=[];for(var m in g)T.unshift(g[m]);return T}},{key:"addExternalPlugins",value:function(r){var l=typeof r.loadExternalPluginsFirst=="boolean"?r.loadExternalPluginsFirst:!0,f=typeof r.loadExternalPlaybacksFirst=="boolean"?r.loadExternalPlaybacksFirst:!0;if(r=this.groupPluginsByType(r),r.playback){var g=r.playback.filter(function(y){return a.checkVersionSupport(y),!0});this.playbackPlugins=f?this.removeDups(g.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(g),!0)}if(r.container){var T=r.container.filter(function(y){return a.checkVersionSupport(y),!0});this.containerPlugins=l?this.removeDups(T.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(T),!0)}if(r.core){var m=r.core.filter(function(y){return a.checkVersionSupport(y),!0});this.corePlugins=l?this.removeDups(m.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(m),!0)}}},{key:"validateExternalPluginsType",value:function(r){var l=["playback","container","core"];l.forEach(function(f){(r[f]||[]).forEach(function(g){var T="external "+g.type+" plugin on "+f+" array";if(g.type!==f)throw new ReferenceError(T)})})}}],[{key:"registeredPlaybacks",get:function(){return pi(e.playbacks)}},{key:"registeredPlugins",get:function(){var r=e.plugins,l=xo(r,"core"),f=xo(r,"container");return{core:l,container:f}}},{key:"checkVersionSupport",value:function(r){var l=r.prototype,f=l.supportedVersion,g=l.name;if(!f||!f.min)return ze.warn("Loader","missing version information for ".concat(g)),!1;var T=f.max?gn.parse(f.max):gn.parse(f.min).inc("minor"),m=gn.parse(f.min);return gn.parse(n).satisfies(m,T)?!0:(ze.warn("Loader","unsupported plugin ".concat(g,": Clappr version ").concat(n," does not match required range [").concat(m,",").concat(T,")")),!1)}},{key:"registerPlugin",value:function(r){if(!r||!r.prototype.name)return ze.warn("Loader","missing information to register plugin: ".concat(r)),!1;a.checkVersionSupport(r);var l=e.plugins;if(!l)return!1;var f=l[r.prototype.name];return f&&ze.warn("Loader","overriding plugin entry: ".concat(r.prototype.name," - ").concat(f)),l[r.prototype.name]=r,!0}},{key:"registerPlayback",value:function(r){if(!r||!r.prototype.name)return!1;a.checkVersionSupport(r);var l=e.playbacks,f=l.findIndex(function(T){return T.prototype.name===r.prototype.name});if(f>=0){var g=l[f];l.splice(f,1),ze.warn("Loader","overriding playback entry: ".concat(g.name," - ").concat(g))}return e.playbacks=[r].concat(pi(l)),!0}},{key:"unregisterPlugin",value:function(r){if(!r)return!1;var l=e.plugins,f=l[r];return f?(delete l[r],!0):!1}},{key:"unregisterPlayback",value:function(r){if(!r)return!1;var l=e.playbacks,f=l.findIndex(function(g){return g.prototype.name===r});return f<0?!1:(l.splice(f,1),e.playbacks=l,!0)}},{key:"clearPlugins",value:function(){e.plugins={}}},{key:"clearPlaybacks",value:function(){e.playbacks=[]}}]),a}()}(),lg=Ul().replace(/\/[^/]+$/,""),$l=function(e){At(a,e);var n=Et(a);function a(i){var r;nt(this,a),r=n.call(this,i);var l={recycleVideo:!0},f={playerId:$i(""),persistConfig:!0,width:640,height:360,baseUrl:lg,allowUserInteraction:Pe.isMobile,includeResetStyle:!0,playback:l};r._options=Be.extend(!0,f,i),r.options.sources=r._normalizeSources(i),r.options.chromeless||(r.options.allowUserInteraction=!0),r.options.allowUserInteraction||(r.options.disableKeyboardShortcuts=!0),r._registerOptionEventListeners(r.options.events),r._coreFactory=new sg(Vn(r));var g=r._getParentElement(r.options);return g&&r.attachTo(g),r}return at(a,[{key:"loader",get:function(){return this._loader||(this._loader=new ii(this.options.plugins||{},this.options.playerId)),this._loader},set:function(r){this._loader=r}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:S.PLAYER_READY,onResize:S.PLAYER_RESIZE,onPlay:S.PLAYER_PLAY,onPause:S.PLAYER_PAUSE,onStop:S.PLAYER_STOP,onEnded:S.PLAYER_ENDED,onSeek:S.PLAYER_SEEK,onError:S.PLAYER_ERROR,onTimeUpdate:S.PLAYER_TIMEUPDATE,onVolumeUpdate:S.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:S.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(r){var l=r.parentId,f=r.parent;return l?document.querySelector(l):f}},{key:"attachTo",value:function(r){return this.options.parentElement=r,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,S.CORE_READY,this._onReady),this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,S.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,S.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var r=this.core.activeContainer;return r&&(this.listenTo(r,S.CONTAINER_PLAY,this._onPlay),this.listenTo(r,S.CONTAINER_PAUSE,this._onPause),this.listenTo(r,S.CONTAINER_STOP,this._onStop),this.listenTo(r,S.CONTAINER_ENDED,this._onEnded),this.listenTo(r,S.CONTAINER_SEEK,this._onSeek),this.listenTo(r,S.CONTAINER_ERROR,this._onError),this.listenTo(r,S.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(r,S.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(r,S.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var r=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=Object.keys(l).length>0;return g&&Object.keys(f).forEach(function(T){var m=r.eventsMapping[T];m&&r.off(m,f[T])}),Object.keys(l).forEach(function(T){var m=r.eventsMapping[T];if(m){var y=l[T];y=typeof y=="function"&&y,y&&r.on(m,y)}}),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(S.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(r){this.trigger(S.PLAYER_FULLSCREEN,r)}},{key:"_onVolumeUpdate",value:function(r){this.trigger(S.PLAYER_VOLUMEUPDATE,r)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(S.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(r){this.trigger(S.PLAYER_RESIZE,r)}},{key:"_onPlay",value:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.trigger(S.PLAYER_PLAY,l)}},{key:"_onPause",value:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.trigger(S.PLAYER_PAUSE,l)}},{key:"_onStop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.trigger(S.PLAYER_STOP,this.getCurrentTime(),r)}},{key:"_onEnded",value:function(){this.trigger(S.PLAYER_ENDED)}},{key:"_onSeek",value:function(r){this.trigger(S.PLAYER_SEEK,r)}},{key:"_onTimeUpdate",value:function(r){this.trigger(S.PLAYER_TIMEUPDATE,r)}},{key:"_onError",value:function(r){this.trigger(S.PLAYER_ERROR,r)}},{key:"_normalizeSources",value:function(r){var l=r.sources||(r.source!==void 0?[r.source]:[]);return l.length===0?[{source:"",mimeType:""}]:l}},{key:"resize",value:function(r){return this.core.resize(r),this}},{key:"load",value:function(r,l,f){return f!==void 0&&this.configure({autoPlay:!!f}),this.core.load(r,l),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(r){this.core.getCurrentPlayback().consent(r)}},{key:"play",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.core.activeContainer.play(r),this}},{key:"pause",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.core.activeContainer.pause(r),this}},{key:"stop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.core.activeContainer.stop(r),this}},{key:"seek",value:function(r){return this.core.activeContainer.seek(r),this}},{key:"seekPercentage",value:function(r){return this.core.activeContainer.seekPercentage(r),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._registerOptionEventListeners(r.events,this.options.events),this.core.configure(r),this}},{key:"getPlugin",value:function(r){var l=this.core.plugins.concat(this.core.activeContainer.plugins);return l.filter(function(f){return f.name===r})[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),a}(ri);Object.assign($l.prototype,Fr);var Qr=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i.options),r.container=i,r.enabled=!0,r.bindEvents(),r}return at(a,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),a}(ri);Object.assign(Qr.prototype,Fr);Qr.extend=function(e){return xi(Qr,e)};Qr.type="container";var Or=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i.options),r.core=i,r.enabled=!0,r.bindEvents(),r}return at(a,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),a}(ri);Object.assign(Or.prototype,Fr);Or.extend=function(e){return xi(Or,e)};Or.type="core";var Jr=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i.options),r.container=i,r.enabled=!0,r.bindEvents(),r}return at(a,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),a}(Xi);Object.assign(Jr.prototype,Fr);Jr.extend=function(e){return xi(Jr,e)};Jr.type="container";var ug=`<% for (var i = 0; i < tracks.length; i++) { %>
  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">
<% }; %>
`,cg=`[data-html5-video] {
  position: absolute;
  height: 100%;
  width: 100%;
  display: block; }
`,_i={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};_i.ogv=_i.ogg;_i["3gp"]=_i["3gpp"];var Wi={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},fg=Object.keys(Wi).reduce(function(e,n){return[].concat(pi(e),pi(Wi[n]))},[]),So={code:"unknown",message:"unknown"},gr=function(e){At(a,e);var n=Et(a);function a(){var i;nt(this,a);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];i=n.call.apply(n,[this].concat(l)),i._destroyed=!1,i._loadStarted=!1,i._isBuffering=!1,i._playheadMoving=!1,i._playheadMovingTimer=null,i._stopped=!1,i._ccTrackId=-1,i._playheadMovingCheckEnabled=!i.options.disablePlayheadMovingCheck,i._setupSrc(i.options.src),i._playheadMovingCheckInterval=i.options.playheadMovingCheckInterval||500,i.options.playback||(i.options.playback=i.options||{}),i.options.playback.disableContextMenu=i.options.playback.disableContextMenu||i.options.disableVideoTagContextMenu,i._minDvrSize=i.isValidMinimumDVRSizeConfig?i.minimumDVRSizeConfig:60;var g=i.options.playback,T=g.preload||(Pe.isSafari?"auto":i.options.preload),m;return i.options.poster&&(typeof i.options.poster=="string"?m=i.options.poster:typeof i.options.poster.url=="string"&&(m=i.options.poster.url)),Be.extend(!0,i.el,{muted:i.options.mute,defaultMuted:i.options.mute,loop:i.options.loop,poster:m,preload:T||"metadata",crossOrigin:g.crossOrigin,"x-webkit-playsinline":g.playInline}),(g.controls||i.options.useVideoTagDefaultControls)&&i.$el.attr("controls",""),g.playInline&&i.$el.attr({playsinline:"playsinline"}),g.crossOrigin&&i.$el.attr({crossorigin:g.crossOrigin}),i.settings={default:["seekbar"]},i.settings.left=["playpause","position","duration"],i.settings.right=["fullscreen","volume","hd-indicator"],g.externalTracks&&i._setupExternalTracks(g.externalTracks),i.options.autoPlay&&i.attemptAutoPlay(),i}return at(a,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var r=this.options.src,l=a._mimeTypesForUrl(r,Wi,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||fg.indexOf(l[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting",enterpictureinpicture:"_onEnterPiP",leavepictureinpicture:"_onExitPiP"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isPiPActive",get:function(){return this.el===document.pictureInPictureElement}},{key:"isLive",get:function(){return this.getPlaybackType()===He.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return typeof this.minimumDVRSizeConfig<"u"&&typeof this.minimumDVRSizeConfig=="number"}},{key:"sourceMedia",get:function(){return this._src}},{key:"configure",value:function(r){$r(Er(a.prototype),"configure",this).call(this,r),this.el.loop=!!r.loop}},{key:"attemptAutoPlay",value:function(){var r=this;this.canAutoPlay(function(l,f){f&&ze.warn(r.name,"autoplay error.",{result:l,error:f}),l&&setTimeout(function(){return!r._destroyed&&r.play()},0)})}},{key:"canAutoPlay",value:function(r){if(this.options.disableCanAutoPlay){r(!0,null);return}var l={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};Pe.isMobile&&Ei.options.recycleVideo&&(l.element=this.el),Kl(r,l)}},{key:"_setupExternalTracks",value:function(r){this._externalTracks=r.map(function(l){return{kind:l.kind||"subtitles",label:l.label,lang:l.lang,src:l.src}})}},{key:"load",value:function(r){this._setupSrc(r)}},{key:"_setupSrc",value:function(r){this.el.src!==r&&(this._ccIsSetup=!1,this.el.src=r,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(r){this._handleBufferingEvents(),this.trigger(S.PLAYBACK_LOADEDMETADATA,{duration:r.target.duration,data:r}),this._updateSettings();var l=typeof this._options.autoSeekFromUrl>"u"||this._options.autoSeekFromUrl;this.getPlaybackType()!==He.LIVE&&l&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===He.VOD||this.getPlaybackType()===He.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(S.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var r=this.tagName==="audio"?He.AOD:He.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?He.LIVE:r}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(r){var l=this;if(this.isPlaying()||this.el._consented)$r(Er(a.prototype),"consent",this).call(this,r);else{var f=function g(){l.el.removeEventListener("loadedmetadata",g,!1),l.el.removeEventListener("error",g,!1),l.el._consented=!0,$r(Er(a.prototype),"consent",l).call(l,r)};this.el.addEventListener("loadedmetadata",f,!1),this.el.addEventListener("error",f,!1),this.el.load()}}},{key:"play",value:function(){var r=this;this.trigger(S.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var l=this.el.play();return l&&l.catch&&l.catch(function(f){return ze.warn(r.name,"HTML5 play failed",f)}),l}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.PLAYBACK_STOP)}},{key:"volume",value:function(r){r===0?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=r/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return this.el.muted===!0||this.el.volume===0}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){this._playheadMovingTimer!==null||!this._playheadMovingCheckEnabled||(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),this._playheadMovingCheckInterval))}},{key:"_stopPlayheadMovingChecks",value:function(){this._playheadMovingTimer!==null&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var r=this._playheadMovingTimeOnCheck,l=this.el.currentTime;this._playheadMoving=r!==l,this._playheadMovingTimeOnCheck=l,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(S.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(S.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(S.PLAYBACK_ENDED,this.name)}},{key:"_onEnterPiP",value:function(){this.trigger(S.PLAYBACK_PIP_ENTER,this.name)}},{key:"_onExitPiP",value:function(){this.trigger(S.PLAYBACK_PIP_EXIT,this.name)}},{key:"enterPiP",value:function(){var r=this;this.el.requestPictureInPicture().then(function(){ze.info(r.name,"enter PIP success")}).catch(function(l){ze.warn(r.name,"enter PIP failed",l)})}},{key:"exitPiP",value:function(){var r=this;document.exitPictureInPicture().then(function(){ze.info(r.name,"exit PIP success")}).catch(function(l){ze.warn(r.name,"exit PIP failed",l)})}},{key:"_handleBufferingEvents",value:function(){var r=this._loadStarted&&!this.el.ended&&!this._stopped,l=this.el.readyState<this.el.HAVE_FUTURE_DATA,f=!this.el.ended&&!this.el.paused&&!this._playheadMoving,g=r&&l;this._playheadMovingCheckEnabled&&(g=g||r&&f),this._isBuffering!==g&&(this._isBuffering=g,g?this.trigger(S.PLAYBACK_BUFFERING,this.name):this.trigger(S.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var r=this.el.error||So,l=r.code,f=r.message,g=l===So.code,T=this.createError({code:l,description:f,raw:this.el.error,level:g?nr.Levels.WARN:nr.Levels.FATAL});g?ze.warn(this.name,"HTML5 unknown error: ",T):this.trigger(S.PLAYBACK_ERROR,T)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),this.$el.off("contextmenu"),$r(Er(a.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,Ei.garbage(this.el)}},{key:"_updateDvr",value:function(r){this.trigger(S.PLAYBACK_DVR,r),this.trigger(S.PLAYBACK_STATS_ADD,{dvr:r})}},{key:"seek",value:function(r){r<0&&(ze.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),r=this.getDuration()),this.dvrEnabled&&this._updateDvr(r<this.getDuration()-3),r+=this.el.seekable.start(0),this.el.currentTime=r}},{key:"seekPercentage",value:function(r){var l=this.el.duration*(r/100);this.seek(l)}},{key:"_checkInitialSeek",value:function(){var r=Bl();r!==0&&this.seek(r)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var r=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout(function(){r._updateSettings(),r._updateSettingsCheckInFlight=null},1e3))}},{key:"_onTimeUpdate",value:function(){var r=this.isLive?this.getDuration():this.el.duration;this.trigger(S.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:r},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var r=[],l=0,f=0;f<this.el.buffered.length;f++)r=[].concat(pi(r),[{start:this.el.buffered.start(f),end:this.el.buffered.end(f)}]),this.el.currentTime>=r[f].start&&this.el.currentTime<=r[f].end&&(l=f);var g={start:r[l].start,current:r[l].end,total:this.el.duration};this.trigger(S.PLAYBACK_PROGRESS,g,r)}}},{key:"_typeFor",value:function(r){var l=a._mimeTypesForUrl(r,_i,this.options.mimeType);l.length===0&&(l=a._mimeTypesForUrl(r,Wi,this.options.mimeType));var f=l[0]||"";return f.split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(S.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(S.PLAYBACK_SUBTITLE_AVAILABLE);var r=this.closedCaptionsTrackId;this.closedCaptionsTrackId=r,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var r=this.closedCaptionsTracks,l=r.find(function(f){return f.track.mode==="showing"})||{id:-1};this._ccTrackId!==l.id&&(this._ccTrackId=l.id,this.trigger(S.PLAYBACK_SUBTITLE_CHANGED,{id:l.id}))}},{key:"isHTML5Video",get:function(){return this.name===a.prototype.name}},{key:"closedCaptionsTracks",get:function(){var r=0,l=function(){return r++},f=this.el.textTracks?Array.from(this.el.textTracks):[];return f.filter(function(g){return g.kind==="subtitles"||g.kind==="captions"}).map(function(g){return{id:l(),name:g.label,track:g}})}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(r){if(Sn(r)){var l=this.closedCaptionsTracks,f;r!==-1&&(f=l.find(function(g){return g.id===r}),!f||f.track.mode==="showing")||(l.filter(function(g){return g.track.mode!=="hidden"}).forEach(function(g){return g.track.mode="hidden"}),f&&(f.track.mode="showing"),this._ccTrackId=r,this.trigger(S.PLAYBACK_SUBTITLE_CHANGED,{id:r}))}}},{key:"template",get:function(){return Xt(ug)}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",function(){return!1}),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var r=Kt.getStyleFor(cg.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(r[0]),this}}]),a}(He);gr._mimeTypesForUrl=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=a||i&&n[i.toLowerCase()]||[];return r.constructor===Array?r:[r]};gr._canPlay=function(e,n,a,i){var r=gr._mimeTypesForUrl(a,n,i),l=document.createElement(e);return!!r.filter(function(f){return!!l.canPlayType(f).replace(/no/,"")})[0]};gr.canPlay=function(e,n){return gr._canPlay("audio",Wi,e,n)||gr._canPlay("video",_i,e,n)};var Xl=function(e){At(a,e);var n=Et(a);function a(){return nt(this,a),n.apply(this,arguments)}return at(a,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(S.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return He.AOD}}]),a}(gr);Xl.canPlay=function(e,n){var a={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return gr._canPlay("audio",a,e,n)};var dg=`[data-html-img] {
  max-width: 100%;
  max-height: 100%; }
`,ql=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i),r.el.src=i.src,r}return at(a,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return He.NO_OP}},{key:"render",value:function(){var r=Kt.getStyleFor(dg.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(r[0]),this.trigger(S.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(S.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(r){var l=r.type==="error"?"load error":"loading aborted";this.trigger(S.PLAYBACK_ERROR,{message:l},this.name)}}]),a}(He);ql.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var hg=`<canvas data-no-op-canvas></canvas>
<p data-no-op-msg><%=message%></p><p>
</p>`,gg=`[data-no-op] {
  position: absolute;
  height: 100%;
  width: 100%;
  text-align: center; }

[data-no-op] p[data-no-op-msg] {
  position: absolute;
  text-align: center;
  font-size: 25px;
  left: 0;
  right: 0;
  color: white;
  padding: 10px;
  /* center vertically */
  top: 50%;
  transform: translateY(-50%);
  max-height: 100%;
  overflow: auto; }

[data-no-op] canvas[data-no-op-canvas] {
  background-color: #777;
  height: 100%;
  width: 100%; }
`,Zl=function(e){At(a,e);var n=Et(a);function a(){var i;nt(this,a);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=n.call.apply(n,[this].concat(l)),i._noiseFrameNum=-1,i}return at(a,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"template",get:function(){return Xt(hg)}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var r=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),l=Kt.getStyleFor(gg.toString(),{baseUrl:this.options.baseUrl});this.$el.append(l[0]),this.$el.html(this.template({message:r})),this.trigger(S.PLAYBACK_READY,this.name);var f=!!(this.options.poster&&this.options.poster.showForNoOp);return(this.options.autoPlay||!f)&&this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var r=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),l;try{l=new Uint32Array(r.data.buffer)}catch{l=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var f=r.data,g=0;g<f.length;g++)l[g]=f[g]}for(var T=l.length,m=Math.random()*6+4,y=0,U=0,w=0;w<T;){if(y<0){y=m*Math.random();var I=Math.pow(Math.random(),.4);U=255*I<<24}y-=1,l[w++]=U}this.context.putImageData(r,0,0)}}},{key:"_loop",value:function(){var r=this;this._stop||(this._noise(),this._animationHandle=Nl(function(){return r._loop()}))}},{key:"destroy",value:function(){this._animationHandle&&(Fl(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),a}(He);Zl.canPlay=function(e){return!0};var pg=function(e){At(a,e);var n=Et(a);function a(i){var r;return nt(this,a),r=n.call(this,i),r._initializeMessages(),r}return at(a,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"t",value:function(r){var l=this._language(),f=this._messages.en,g=l&&this._messages[l]||f;return g[r]||f[r]||r}},{key:"_language",value:function(){return this.core.options.language||Vl()}},{key:"_initializeMessages",value:function(){var r={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não suporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}};this._messages=Be.extend(!0,r,this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}]),a}(Or),vg=function(e){At(a,e);var n=Et(a);function a(){return nt(this,a),n.apply(this,arguments)}return at(a,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.7.2"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,S.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var r=this.core.containers.filter(function(l){return l.playback.name!=="no_op"})[0]||this.core.containers[0];r&&this.core.containers.forEach(function(l){l!==r&&l.destroy()})}}]),a}(Or);ii.registerPlugin(pg);ii.registerPlugin(vg);ii.registerPlayback(Zl);ii.registerPlayback(ql);ii.registerPlayback(Xl);ii.registerPlayback(gr);function Ht(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ko(e,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_g(i.key),i)}}function jt(e,n,a){return n&&ko(e.prototype,n),a&&ko(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yt(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&La(e,n)}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Pr(e)}function La(e,n){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},La(e,n)}function mg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ql(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yg(e)}function Wt(e){var n=mg();return function(){var i=Pr(e),r;if(n){var l=Pr(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return Ql(this,r)}}function Ag(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=Pr(e),e!==null););return e}function vi(){return typeof Reflect<"u"&&Reflect.get?vi=Reflect.get.bind():vi=function(n,a,i){var r=Ag(n,a);if(r){var l=Object.getOwnPropertyDescriptor(r,a);return l.get?l.get.call(arguments.length<3?n:i):l.value}},vi.apply(this,arguments)}function Eg(e,n){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,n||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _g(e){var n=Eg(e,"string");return typeof n=="symbol"?n:String(n)}var bg=function(e){Yt(a,e);var n=Wt(a);function a(i){return Ht(this,a),n.call(this,i)}return jt(a,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,S.CONTAINER_CLICK,this.click),this.listenTo(this.container,S.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var r=this.config.onClickPayload;(this.container.getPlaybackType()!==He.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(r):this.container.play(r))}},{key:"settingsUpdate",value:function(){var r=this.container.getPlaybackType()!==He.LIVE||this.container.isDvrEnabled();if(r!==this.pointerEnabled){var l=r?"addClass":"removeClass";this.container.$el[l]("pointer-enabled"),this.pointerEnabled=r}}}]),a}(Qr),Tg=`<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve">
<path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1
	c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4
	c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9
	C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4
	c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"/>
</svg>`,xg=`<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>
<ul>
  <% if (title) { %>
  <li data-title><%= title %></li>
  <% }; %>
  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>
  <% for (var i = 0; i < tracks.length; i++) { %>
    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>
  <% }; %>
</ul>
`,Sg=`.cc-controls[data-cc-controls] {
  float: right;
  position: relative;
  display: none; }
  .cc-controls[data-cc-controls].available {
    display: block; }
  .cc-controls[data-cc-controls] .cc-button {
    padding: 6px !important; }
    .cc-controls[data-cc-controls] .cc-button.enabled {
      display: block;
      opacity: 1.0; }
      .cc-controls[data-cc-controls] .cc-button.enabled:hover {
        opacity: 1.0;
        text-shadow: none; }
  .cc-controls[data-cc-controls] > ul {
    list-style-type: none;
    position: absolute;
    bottom: 25px;
    border: 1px solid black;
    display: none;
    background-color: #e6e6e6; }
  .cc-controls[data-cc-controls] li {
    font-size: 10px; }
    .cc-controls[data-cc-controls] li[data-title] {
      background-color: #c3c2c2;
      padding: 5px; }
    .cc-controls[data-cc-controls] li a {
      color: #444;
      padding: 2px 10px;
      display: block;
      text-decoration: none; }
      .cc-controls[data-cc-controls] li a:hover {
        background-color: #555;
        color: white; }
        .cc-controls[data-cc-controls] li a:hover a {
          color: white;
          text-decoration: none; }
    .cc-controls[data-cc-controls] li.current a {
      color: #f00; }
`,kg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;Ht(this,a),r=n.call(this,i);var l=i.options.closedCaptionsConfig;return r._title=l&&l.title?l.title:null,r._ariaLabel=l&&l.ariaLabel?l.ariaLabel:"cc-button",r._labelCb=l&&l.labelCallback&&typeof l.labelCallback=="function"?l.labelCallback:function(f){return f.name},r}return jt(a,[{key:"name",get:function(){return"closed_captions"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Xt(xg)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,S.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,S.MEDIACONTROL_HIDE,this.hideContextMenu),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,S.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,S.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,S.CONTAINER_STOP,this.onContainerStop))}},{key:"onContainerStop",value:function(){this.ccAvailable(!1)}},{key:"containerChanged",value:function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()}},{key:"onSubtitleAvailable",value:function(){this.renderCcButton(),this.ccAvailable(!0)}},{key:"onSubtitleChanged",value:function(r){this.setCurrentContextMenuElement(r.id)}},{key:"onTrackSelect",value:function(r){var l=parseInt(r.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=l,this.hideContextMenu(),r.stopPropagation(),!1}},{key:"ccAvailable",value:function(r){var l=r?"addClass":"removeClass";this.$el[l]("available")}},{key:"toggleContextMenu",value:function(){this.$el.find("ul").toggle()}},{key:"hideContextMenu",value:function(){this.$el.find("ul").hide()}},{key:"contextMenuElement",value:function(r){return this.$el.find("ul a"+(isNaN(r)?"":'[data-cc-select="'+r+'"]')).parent()}},{key:"setCurrentContextMenuElement",value:function(r){if(this._trackId!==r){this.contextMenuElement().removeClass("current"),this.contextMenuElement(r).addClass("current");var l=r>-1?"addClass":"removeClass";this.$ccButton[l]("enabled"),this._trackId=r}}},{key:"renderCcButton",value:function(){for(var r=this.container?this.container.closedCaptionsTracks:[],l=0;l<r.length;l++)r[l].label=this._labelCb(r[l]);var f=Kt.getStyleFor(Sg,{baseUrl:this.options.baseUrl});this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:r})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(Tg),this.$el.append(f[0])}},{key:"render",value:function(){this.renderCcButton();var r=this.core.mediaControl.$el.find("button[data-fullscreen]");return r[0]?this.$el.insertAfter(r):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this}}]),a}(vr),Cg=`<div class="live-info"><%= live %></div>
<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>
`,Rg=`.dvr-controls[data-dvr-controls] {
  display: inline-block;
  float: left;
  color: #fff;
  line-height: 32px;
  font-size: 10px;
  font-weight: bold;
  margin-left: 6px; }
  .dvr-controls[data-dvr-controls] .live-info {
    cursor: default;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase; }
    .dvr-controls[data-dvr-controls] .live-info:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #ff0101; }
    .dvr-controls[data-dvr-controls] .live-info.disabled {
      opacity: 0.3; }
      .dvr-controls[data-dvr-controls] .live-info.disabled:before {
        background-color: #fff; }
  .dvr-controls[data-dvr-controls] .live-button {
    cursor: pointer;
    outline: none;
    display: none;
    border: 0;
    color: #fff;
    background-color: transparent;
    height: 32px;
    padding: 0;
    opacity: 0.7;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase;
    transition: all 0.1s ease; }
    .dvr-controls[data-dvr-controls] .live-button:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #fff; }
    .dvr-controls[data-dvr-controls] .live-button:hover {
      opacity: 1;
      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }

.dvr .dvr-controls[data-dvr-controls] .live-info {
  display: none; }

.dvr .dvr-controls[data-dvr-controls] .live-button {
  display: block; }

.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #005aff; }

.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #ff0101; }
`,wg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.settingsUpdate(),r}return jt(a,[{key:"template",get:function(){return Xt(Cg)}},{key:"name",get:function(){return"dvr_controls"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}},{key:"bindEvents",value:function(){this.bindCoreEvents(),this.bindContainerEvents()}},{key:"bindCoreEvents",value:function(){var r=this;this.core.mediaControl.settings?(this.listenTo(this.core.mediaControl,S.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,S.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,S.CORE_OPTIONS_CHANGE,this.render)):setTimeout(function(){return r.bindCoreEvents()},100)}},{key:"bindContainerEvents",value:function(){this.core.activeContainer&&(this.listenToOnce(this.core.activeContainer,S.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.activeContainer,S.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"dvrChanged",value:function(r){this.core.getPlaybackType()===He.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),r?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))}},{key:"click",value:function(){var r=this.core.mediaControl,l=r.container;l.isPlaying()||l.play(),r.$el.hasClass("dvr")&&l.seek(l.getDuration())}},{key:"settingsUpdate",value:function(){var r=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click(function(){return r.click()})),this.bindEvents()}},{key:"shouldRender",value:function(){var r=this.core.options.useDvrControls===void 0||!!this.core.options.useDvrControls;return r&&this.core.getPlaybackType()===He.LIVE}},{key:"render",value:function(){var r=Kt.getStyleFor(Rg,{baseUrl:this.options.baseUrl});return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.$el.append(r[0]),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this}}]),a}(vr),Lg=function(e){Yt(a,e);var n=Wt(a);function a(){return Ht(this,a),n.apply(this,arguments)}return jt(a,[{key:"name",get:function(){return"end_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var r=this.core.activeContainer;r&&(this.listenTo(r,S.CONTAINER_ENDED,this.ended),this.listenTo(r,S.CONTAINER_STOP,this.ended))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"ended",value:function(){var r=typeof this.core.options.exitFullscreenOnEnd>"u"||this.core.options.exitFullscreenOnEnd;r&&this.core.isFullscreen()&&this.core.toggleFullscreen()}}]),a}(Or),Ig=`<svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`,Og=`<div class="player-error-screen__content" data-error-screen>
  <% if (icon) { %>
  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>
  <% } %>
  <div class="player-error-screen__title" data-error-screen><%= title %></div>
  <div class="player-error-screen__message" data-error-screen><%= message %></div>
  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>
  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>
</div>
`,Pg=`[data-player] .player-error-screen {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: #CCCACA;
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 2000;
  display: flex;
  flex-direction: column;
  justify-content: center; }
  [data-player] .player-error-screen__content[data-error-screen] {
    font-size: 14px;
    color: #CCCACA;
    margin-top: 45px; }
  [data-player] .player-error-screen__title[data-error-screen] {
    font-weight: bold;
    line-height: 30px;
    font-size: 18px; }
  [data-player] .player-error-screen__message[data-error-screen] {
    width: 90%;
    margin: 0 auto; }
  [data-player] .player-error-screen__code[data-error-screen] {
    font-size: 13px;
    margin-top: 15px; }
  [data-player] .player-error-screen__reload {
    cursor: pointer;
    width: 30px;
    margin: 15px auto 0 !important; }
`,Dg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.options.disableErrorScreen?Ql(r,r.disable()):r}return jt(a,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Xt(Og)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,S.ERROR,this.onError),this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindReload",value:function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))}},{key:"reload",value:function(){var r=this;this.listenToOnce(this.core,S.CORE_READY,function(){return r.container.play()}),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()}},{key:"unbindReload",value:function(){this.reloadButton&&this.reloadButton.off("click")}},{key:"onContainerChanged",value:function(){this.err=null,this.unbindReload(),this.hide()}},{key:"onError",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.level===nr.Levels.FATAL&&(this.err=r,this.container.disableMediaControl(),this.container.stop(),this.show())}},{key:"show",value:function(){this.render(),this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){if(this.err){var r=Kt.getStyleFor(Pg,{baseUrl:this.options.baseUrl});return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:Ig})),this.$el.append(r[0]),this.core.$el.append(this.el),this.bindReload(),this}}}]),a}(vr),zr=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"/>
</svg>`,Ia=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"/>
</svg>`,Ng=Be('link[rel="shortcut icon"]'),Fg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r._container=null,r.configure(),r}return jt(a,[{key:"name",get:function(){return"favicon"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"oldIcon",get:function(){return Ng}},{key:"configure",value:function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,S.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,S.CORE_OPTIONS_CHANGE,this.configure))}},{key:"bindEvents",value:function(){this.listenTo(this.core,S.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}},{key:"containerChanged",value:function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,S.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,S.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,S.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,S.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,S.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}},{key:"disable",value:function(){vi(Pr(a.prototype),"disable",this).call(this),this.resetIcon()}},{key:"destroy",value:function(){vi(Pr(a.prototype),"destroy",this).call(this),this.resetIcon()}},{key:"createIcon",value:function(r){var l=Be("<canvas/>");l[0].width=16,l[0].height=16;var f=l[0].getContext("2d");f.fillStyle="#000";var g=Be(r).find("path").attr("d"),T=new Path2D(g);f.fill(T);var m=Be('<link rel="shortcut icon" type="image/png"/>');return m.attr("href",l[0].toDataURL("image/png")),m}},{key:"setPlayIcon",value:function(){this.playIcon||(this.playIcon=this.createIcon(zr)),this.changeIcon(this.playIcon)}},{key:"setPauseIcon",value:function(){this.pauseIcon||(this.pauseIcon=this.createIcon(Ia)),this.changeIcon(this.pauseIcon)}},{key:"resetIcon",value:function(){Be('link[rel="shortcut icon"]').remove(),Be("head").append(this.oldIcon)}},{key:"changeIcon",value:function(r){r&&(Be('link[rel="shortcut icon"]').remove(),Be("head").append(r))}}]),a}(Or),Mg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.container.options.gaAccount&&(r.account=r.container.options.gaAccount,r.trackerName=r.container.options.gaTrackerName?r.container.options.gaTrackerName+".":"Clappr.",r.domainName=r.container.options.gaDomainName,r.currentHDState=void 0,r.embedScript()),r}return jt(a,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"embedScript",value:function(){var r=this;if(window._gat)this.addEventListeners();else{var l=document.createElement("script");l.setAttribute("type","text/javascript"),l.setAttribute("async","async"),l.setAttribute("src","//www.google-analytics.com/ga.js"),l.onload=function(){return r.addEventListeners()},document.body.appendChild(l)}}},{key:"addEventListeners",value:function(){var r=this;this.container&&(this.listenTo(this.container,S.CONTAINER_READY,this.onReady),this.listenTo(this.container,S.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,S.CONTAINER_STOP,this.onStop),this.listenTo(this.container,S.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,S.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,S.CONTAINER_ERROR,this.onError),this.listenTo(this.container,S.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,S.CONTAINER_VOLUME,function(l){return r.onVolumeChanged(l)}),this.listenTo(this.container,S.CONTAINER_SEEK,function(l){return r.onSeek(l)}),this.listenTo(this.container,S.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,S.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,S.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])}},{key:"onReady",value:function(){this.push(["Video","Playback",this.container.playback.name])}},{key:"onPlay",value:function(){this.push(["Video","Play",this.container.playback.src])}},{key:"onStop",value:function(){this.push(["Video","Stop",this.container.playback.src])}},{key:"onEnded",value:function(){this.push(["Video","Ended",this.container.playback.src])}},{key:"onBuffering",value:function(){this.push(["Video","Buffering",this.container.playback.src])}},{key:"onBufferFull",value:function(){this.push(["Video","Bufferfull",this.container.playback.src])}},{key:"onError",value:function(){this.push(["Video","Error",this.container.playback.src])}},{key:"onHD",value:function(r){var l=r?"ON":"OFF";l!==this.currentHDState&&(this.currentHDState=l,this.push(["Video","HD - "+l,this.container.playback.src]))}},{key:"onPlaybackChanged",value:function(r){r.type!==null&&this.push(["Video","Playback Type - "+r.type,this.container.playback.src])}},{key:"onDVR",value:function(r){var l=r?"ON":"OFF";this.push(["Interaction","DVR - "+l,this.container.playback.src])}},{key:"onPause",value:function(){this.push(["Video","Pause",this.container.playback.src])}},{key:"onSeek",value:function(){this.push(["Video","Seek",this.container.playback.src])}},{key:"onVolumeChanged",value:function(){this.push(["Interaction","Volume",this.container.playback.src])}},{key:"onFullscreen",value:function(){this.push(["Interaction","Fullscreen",this.container.playback.src])}},{key:"push",value:function(r){var l=[this.trackerName+"_trackEvent"].concat(r);_gaq.push(l)}}]),a}(Qr),Se=function(n){this.element=n||window.document,this.initialize()};Se.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"};Se.KEY_CODES_BY_NAME={};(function(){for(var e in Se.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(Se.KEY_NAMES_BY_CODE,e)&&(Se.KEY_CODES_BY_NAME[Se.KEY_NAMES_BY_CODE[e]]=+e)})();Se.MODIFIERS=["shift","ctrl","alt"];Se.registerEvent=function(){if(document.addEventListener)return function(e,n,a){e.addEventListener(n,a,!1)};if(document.attachEvent)return function(e,n,a){e.attachEvent("on"+n,a)}}();Se.unregisterEvent=function(){if(document.removeEventListener)return function(e,n,a){e.removeEventListener(n,a,!1)};if(document.detachEvent)return function(e,n,a){e.detachEvent("on"+n,a)}}();Se.stringContains=function(e,n){return e.indexOf(n)!==-1};Se.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")};Se.capitalize=function(e){return e.toLowerCase().replace(/^./,function(n){return n.toUpperCase()})};Se.isString=function(e){return Se.stringContains(Object.prototype.toString.call(e),"String")};Se.arrayIncludes=function(){return Array.prototype.indexOf?function(e,n){return e.indexOf(n)!==-1}:function(e,n){for(var a=0;a<e.length;a++)if(e[a]===n)return!0;return!1}}();Se.extractModifiers=function(e){var n,a;for(n=[],a=0;a<Se.MODIFIERS.length;a++)Se.stringContains(e,Se.MODIFIERS[a])&&n.push(Se.MODIFIERS[a]);return n};Se.extractKey=function(e){var n,a;for(n=Se.neatString(e).split(" "),a=0;a<n.length;a++)if(!Se.arrayIncludes(Se.MODIFIERS,n[a]))return n[a]};Se.modifiersAndKey=function(e){var n,a;return Se.stringContains(e,"any")?Se.neatString(e).split(" ").slice(0,2).join(" "):(n=Se.extractModifiers(e),a=Se.extractKey(e),a&&!Se.arrayIncludes(Se.MODIFIERS,a)&&n.push(a),n.join(" "))};Se.keyName=function(e){return Se.KEY_NAMES_BY_CODE[e+""]};Se.keyCode=function(e){return+Se.KEY_CODES_BY_NAME[e]};Se.prototype.initialize=function(){var e,n=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<Se.MODIFIERS.length;e++)this.lastModifiers[Se.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),Se.registerEvent(this.element,"keydown",this.downHandler),Se.registerEvent(this.element,"keyup",this.upHandler),Se.registerEvent(window,"unload",function a(){Se.unregisterEvent(n.element,"keydown",n.downHandler),Se.unregisterEvent(n.element,"keyup",n.upHandler),Se.unregisterEvent(window,"unload",a)})};Se.prototype.handler=function(e){var n=this;return function(a){var i,r,l;for(a=a||window.event,n.lastKeyCode=a.keyCode,i=0;i<Se.MODIFIERS.length;i++)n.lastModifiers[Se.MODIFIERS[i]]=a[Se.MODIFIERS[i]+"Key"];for(Se.arrayIncludes(Se.MODIFIERS,Se.keyName(n.lastKeyCode))&&(n.lastModifiers[Se.keyName(n.lastKeyCode)]=!0),r=n["keys"+Se.capitalize(e)],i=0;i<r.any.length;i++)r.any[i](a)===!1&&a.preventDefault&&a.preventDefault();if(l=n.lastModifiersAndKey(),r[l])for(i=0;i<r[l].length;i++)r[l][i](a)===!1&&a.preventDefault&&a.preventDefault()}};Se.prototype.registerKeys=function(e,n,a){var i,r,l=this["keys"+Se.capitalize(e)];for(Se.isString(n)&&(n=[n]),i=0;i<n.length;i++)r=n[i],r=Se.modifiersAndKey(r+""),l[r]?l[r].push(a):l[r]=[a];return this};Se.prototype.unregisterKeys=function(e,n,a){var i,r,l,f=this["keys"+Se.capitalize(e)];for(Se.isString(n)&&(n=[n]),i=0;i<n.length;i++)if(l=n[i],l=Se.modifiersAndKey(l+""),a===null)delete f[l];else if(f[l]){for(r=0;r<f[l].length;r++)if(String(f[l][r])===String(a)){f[l].splice(r,1);break}}return this};Se.prototype.off=function(e){return this.unregisterKeys("down",e,null)};Se.prototype.delegate=function(e,n,a){return a!==null||a!==void 0?this.registerKeys(e,n,a):this.unregisterKeys(e,n,a)};Se.prototype.down=function(e,n){return this.delegate("down",e,n)};Se.prototype.up=function(e,n){return this.delegate("up",e,n)};Se.prototype.lastKey=function(e){return e?this.lastModifiers[e]:Se.keyName(this.lastKeyCode)};Se.prototype.lastModifiersAndKey=function(){var e,n;for(e=[],n=0;n<Se.MODIFIERS.length;n++)this.lastKey(Se.MODIFIERS[n])&&e.push(Se.MODIFIERS[n]);return Se.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var Bg=`.media-control-notransition {
  transition: none !important; }

.media-control[data-media-control] {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 9999;
  pointer-events: none; }
  .media-control[data-media-control].dragging {
    pointer-events: auto;
    cursor: grabbing !important;
    cursor: url("closed-hand.cur"), move; }
    .media-control[data-media-control].dragging * {
      cursor: grabbing !important;
      cursor: url("closed-hand.cur"), move; }
  .media-control[data-media-control] .media-control-background[data-background] {
    position: absolute;
    height: 40%;
    width: 100%;
    bottom: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
    will-change: transform, opacity;
    transition: opacity 0.6s ease-out; }
  .media-control[data-media-control] .media-control-icon {
    line-height: 0;
    letter-spacing: 0;
    speak: none;
    color: #fff;
    opacity: 0.5;
    vertical-align: middle;
    text-align: left;
    transition: all 0.1s ease; }
  .media-control[data-media-control] .media-control-icon:hover {
    color: white;
    opacity: 0.75;
    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }
  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {
    opacity: 0; }
  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {
    transform: translateY(50px); }
    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
      opacity: 0; }
  .media-control[data-media-control] .media-control-layer[data-controls] {
    position: absolute;
    transform: translateY(-7px);
    bottom: 0;
    width: 100%;
    height: 32px;
    font-size: 0;
    vertical-align: middle;
    pointer-events: auto;
    transition: bottom 0.4s ease-out; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {
      position: absolute;
      top: 0;
      left: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {
      height: 100%;
      text-align: center;
      line-height: 32px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {
      position: absolute;
      top: 0;
      right: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {
      background-color: transparent;
      border: 0;
      margin: 0 6px;
      padding: 0;
      cursor: pointer;
      display: inline-block;
      width: 32px;
      height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {
        width: 100%;
        height: 22px; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {
          fill: white; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {
        outline: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {
        float: right;
        background-color: transparent;
        border: 0;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {
        background-color: transparent;
        border: 0;
        cursor: default;
        display: none;
        float: right;
        height: 100%; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {
          display: block;
          opacity: 1.0; }
          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {
            opacity: 1.0;
            text-shadow: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {
        float: left; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {
        float: left; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      display: inline-block;
      font-size: 10px;
      color: white;
      cursor: default;
      line-height: 32px;
      position: relative; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {
      margin: 0 6px 0 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      color: rgba(255, 255, 255, 0.5);
      margin-right: 6px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {
        content: "|";
        margin-right: 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {
      position: absolute;
      top: -20px;
      left: 0;
      display: inline-block;
      vertical-align: middle;
      width: 100%;
      height: 25px;
      cursor: pointer; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {
        width: 100%;
        height: 1px;
        position: relative;
        top: 12px;
        background-color: #666666; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #c2c2c2;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #005aff;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0;
          position: absolute;
          top: -3px;
          width: 5px;
          height: 7px;
          background-color: rgba(255, 255, 255, 0.5);
          transition: opacity 0.1s ease; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
        opacity: 1; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {
        cursor: default; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
        position: absolute;
        transform: translateX(-50%);
        top: 2px;
        left: 0;
        width: 20px;
        height: 20px;
        opacity: 1;
        transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {
          position: absolute;
          left: 6px;
          top: 6px;
          width: 8px;
          height: 8px;
          border-radius: 10px;
          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
          background-color: white; }
    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {
      float: right;
      display: inline-block;
      height: 32px;
      cursor: pointer;
      margin: 0 6px;
      box-sizing: border-box; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {
        float: left;
        bottom: 0; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {
          background-color: transparent;
          border: 0;
          box-sizing: content-box;
          width: 32px;
          height: 32px;
          opacity: 0.5; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {
            opacity: 0.75; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {
            height: 24px;
            position: relative;
            top: 3px; }
            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {
              fill: white; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {
            margin-left: 2px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {
        float: left;
        position: relative;
        overflow: hidden;
        top: 6px;
        width: 42px;
        height: 18px;
        padding: 3px 0;
        transition: width .2s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {
          height: 1px;
          position: relative;
          top: 7px;
          margin: 0 3px;
          background-color: #666666; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #c2c2c2;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #005aff;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {
            opacity: 0;
            position: absolute;
            top: -3px;
            width: 5px;
            height: 7px;
            background-color: rgba(255, 255, 255, 0.5);
            transition: opacity 0.1s ease; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {
          position: absolute;
          transform: translateX(-50%);
          top: 0px;
          left: 0;
          width: 20px;
          height: 20px;
          opacity: 1;
          transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {
            position: absolute;
            left: 6px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 10px;
            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
            background-color: white; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {
          float: left;
          width: 4px;
          padding-left: 2px;
          height: 12px;
          opacity: 0.5;
          box-shadow: inset 2px 0 0 white;
          transition: transform .2s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {
            box-shadow: inset 2px 0 0 #fff;
            opacity: 1; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {
            padding-left: 0; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {
            transform: scaleY(1.5); }
  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {
    width: 0;
    height: 12px;
    top: 9px;
    padding: 0; }
`,Ug=`<div class="media-control-background" data-background></div>
<div class="media-control-layer" data-controls>
  <%  var renderBar = function(name) { %>
      <div class="bar-container" data-<%= name %>>
        <div class="bar-background" data-<%= name %>>
          <div class="bar-fill-1" data-<%= name %>></div>
          <div class="bar-fill-2" data-<%= name %>></div>
          <div class="bar-hover" data-<%= name %>></div>
        </div>
        <div class="bar-scrubber" data-<%= name %>>
          <div class="bar-scrubber-icon" data-<%= name %>></div>
        </div>
      </div>
  <%  }; %>
  <%  var renderSegmentedBar = function(name, segments) {
      segments = segments || 10; %>
    <div class="bar-container" data-<%= name %>>
    <% for (var i = 0; i < segments; i++) { %>
      <div class="segmented-bar-element" data-<%= name %>></div>
    <% } %>
    </div>
  <% }; %>
  <% var renderDrawer = function(name, renderContent) { %>
      <div class="drawer-container" data-<%= name %>>
        <div class="drawer-icon-container" data-<%= name %>>
          <div class="drawer-icon media-control-icon" data-<%= name %>></div>
          <span class="drawer-text" data-<%= name %>></span>
        </div>
        <% renderContent(name); %>
      </div>
  <% }; %>
  <% var renderIndicator = function(name) { %>
      <div class="media-control-indicator" data-<%= name %>></div>
  <% }; %>
  <% var renderButton = function(name) { %>
    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>
  <% }; %>
  <%  var templates = {
        bar: renderBar,
        segmentedBar: renderSegmentedBar,
      };
      var render = function(settingsList) {
        settingsList.forEach(function(setting) {
          if(setting === "seekbar") {
            renderBar(setting);
          } else if (setting === "volume") {
            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });
          } else if (setting === "duration" || setting === "position") {
            renderIndicator(setting);
          } else {
            renderButton(setting);
          }
        });
      }; %>
  <% if (settings.default && settings.default.length) { %>
  <div class="media-control-center-panel" data-media-control>
    <% render(settings.default); %>
  </div>
  <% } %>
  <% if (settings.left && settings.left.length) { %>
  <div class="media-control-left-panel" data-media-control>
    <% render(settings.left); %>
  </div>
  <% } %>
  <% if (settings.right && settings.right.length) { %>
  <div class="media-control-right-panel" data-media-control>
    <% render(settings.right); %>
  </div>
  <% } %>
</div>
`,Co=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"/>
</svg>`,Ro=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"/>
</svg>`,Vg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"/>
</svg>`,wo=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"/>
</svg>`,Kg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"/>
</svg>`,Gg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"/>
</svg>`,Lo=Nr.Config,Io=Nr.Fullscreen,Oo=Nr.formatTime,Hg=Nr.extend,da=Nr.removeArrayItem,Oa=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.persistConfig=r.options.persistConfig,r.currentPositionValue=null,r.currentDurationValue=null,r.keepVisible=!1,r.fullScreenOnVideoTagSupported=null,r.setInitialVolume(),r.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},r.kibo=new Se(r.options.focusElement),r.bindKeyEvents(),r.container?Be.isEmptyObject(r.container.settings)||(r.settings=Be.extend({},r.container.settings)):r.settings={},r.userDisabled=!1,(r.container&&r.container.mediaControlDisabled||r.options.chromeless)&&r.disable(),r.stopDragHandler=function(l){return r.stopDrag(l)},r.updateDragHandler=function(l){return r.updateDrag(l)},Be(document).bind("mouseup",r.stopDragHandler),Be(document).bind("mousemove",r.updateDragHandler),r}return jt(a,[{key:"name",get:function(){return"media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"disabled",get:function(){var r=this.container&&this.container.getPlaybackType()===He.NO_OP;return this.userDisabled||r}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return Xt(Ug)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return this.volume===0}},{key:"getExternalInterface",value:function(){var r=this;return{setVolume:this.setVolume,getVolume:function(){return r.volume}}}},{key:"bindEvents",value:function(){var r=this;this.stopListening(),this.listenTo(this.core,S.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,S.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,S.CORE_MOUSE_LEAVE,function(){return r.hide(r.options.hideMediaControlDelay)}),this.listenTo(this.core,S.CORE_FULLSCREEN,this.show),this.listenTo(this.core,S.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,S.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&(this.listenTo(this.container,S.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,S.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,S.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,S.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,S.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,S.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,S.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,S.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,S.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,S.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,S.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,S.CONTAINER_ENDED,this.ended),this.listenTo(this.container,S.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,S.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),this.container.playback.el.nodeName.toLowerCase()==="video"&&this.listenToOnce(this.container,S.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}},{key:"disable",value:function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}},{key:"enable",value:function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}},{key:"play",value:function(){this.container&&this.container.play()}},{key:"pause",value:function(){this.container&&this.container.pause()}},{key:"stop",value:function(){this.container&&this.container.stop()}},{key:"setInitialVolume",value:function(){var r=this.persistConfig?Lo.restore("volume"):100,l=this.container&&this.container.options||this.options;this.setVolume(l.mute?0:r,!0)}},{key:"onVolumeChanged",value:function(){this.updateVolumeUI()}},{key:"onLoadedMetadataOnVideoTag",value:function(){var r=this.playback&&this.playback.el;!Io.fullscreenEnabled()&&r.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}},{key:"updateVolumeUI",value:function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var r=this.$volumeBarContainer.width(),l=this.$volumeBarBackground.width(),f=(r-l)/2,g=l*this.volume/100+f;this.$volumeBarFill.css({width:"".concat(this.volume,"%")}),this.$volumeBarScrubber.css({left:g}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var T=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,T).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(Vg),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(Ro),this.applyButtonStyle(this.$volumeIcon)}}},{key:"changeTogglePlay",value:function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(Ia),this.$playStopToggle.append(Co),this.trigger(S.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(zr),this.$playStopToggle.append(zr),this.trigger(S.MEDIACONTROL_NOTPLAYING),Pe.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}},{key:"mousemoveOnSeekBar",value:function(r){if(this.settings.seekEnabled){var l=r.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:l})}this.trigger(S.MEDIACONTROL_MOUSEMOVE_SEEKBAR,r)}},{key:"mouseleaveOnSeekBar",value:function(r){this.trigger(S.MEDIACONTROL_MOUSELEAVE_SEEKBAR,r)}},{key:"onVolumeClick",value:function(r){this.setVolume(this.getVolumeFromUIEvent(r))}},{key:"mousemoveOnVolumeBar",value:function(r){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(r))}},{key:"playerResize",value:function(r){this.$fullscreenToggle.html("");var l=this.core.isFullscreen()?Kg:wo;this.$fullscreenToggle.append(l),this.applyButtonStyle(this.$fullscreenToggle),this.$el.find(".media-control").length!==0&&this.$el.removeClass("w320"),(r.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}},{key:"togglePlayPause",value:function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}},{key:"togglePlayStop",value:function(){this.container.isPlaying()?this.container.stop():this.container.play()}},{key:"startSeekDrag",value:function(r){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),r&&r.preventDefault())}},{key:"startVolumeDrag",value:function(r){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),r&&r.preventDefault()}},{key:"stopDrag",value:function(r){this.draggingSeekBar&&this.seek(r),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}},{key:"updateDrag",value:function(r){if(this.draggingSeekBar){r.preventDefault();var l=r.pageX-this.$seekBarContainer.offset().left,f=l/this.$seekBarContainer.width()*100;f=Math.min(100,Math.max(f,0)),this.setSeekPercentage(f)}else this.draggingVolumeBar&&(r.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(r)))}},{key:"getVolumeFromUIEvent",value:function(r){var l=r.pageX-this.$volumeBarContainer.offset().left,f=l/this.$volumeBarContainer.width()*100;return f}},{key:"toggleMute",value:function(){this.setVolume(this.muted?100:0)}},{key:"setVolume",value:function(r){var l=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r=Math.min(100,Math.max(r,0)),this.intendedVolume=r,this.persistConfig&&!f&&Lo.persist("volume",r);var g=function(){l.container&&l.container.isReady?l.container.setVolume(r):l.listenToOnce(l.container,S.CONTAINER_READY,function(){l.container.setVolume(r)})};this.container?g():this.listenToOnce(this,S.MEDIACONTROL_CONTAINERCHANGED,function(){return g()})}},{key:"toggleFullscreen",value:function(){this.trigger(S.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}},{key:"onActiveContainerChanged",value:function(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(S.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(S.MEDIACONTROL_CONTAINERCHANGED)}},{key:"showVolumeBar",value:function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}},{key:"hideVolumeBar",value:function(){var r=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return r.hideVolumeBar()},l):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return r.$volumeBarContainer.addClass("volume-bar-hide")},l)))}},{key:"ended",value:function(){this.changeTogglePlay()}},{key:"updateProgressBar",value:function(r){var l=r.start/r.total*100,f=r.current/r.total*100;this.$seekBarLoaded.css({left:"".concat(l,"%"),width:"".concat(f-l,"%")})}},{key:"onTimeUpdate",value:function(r){if(!this.draggingSeekBar){var l=r.current<0?r.total:r.current;this.currentPositionValue=l,this.currentDurationValue=r.total,this.renderSeekBar()}}},{key:"renderSeekBar",value:function(){if(!(this.currentPositionValue===null||this.currentDurationValue===null)){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==He.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var r=Oo(this.currentPositionValue),l=Oo(this.currentDurationValue);r!==this.displayedPosition&&(this.$position.text(r),this.displayedPosition=r),l!==this.displayedDuration&&(this.$duration.text(l),this.displayedDuration=l)}}},{key:"seek",value:function(r){if(this.settings.seekEnabled){var l=r.pageX-this.$seekBarContainer.offset().left,f=l/this.$seekBarContainer.width()*100;return f=Math.min(100,Math.max(f,0)),this.container&&this.container.seekPercentage(f),this.setSeekPercentage(f),!1}}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible=!0}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible=!1}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(r){var l=this;if(!this.disabled){var f=2e3,g=r&&r.clientX!==this.lastMouseX&&r.clientY!==this.lastMouseY;(!r||g||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(S.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(S.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return l.hide()},f),r&&(this.lastMouseX=r.clientX,this.lastMouseY=r.clientY));var T=!0;this.updateCursorStyle(T)}}},{key:"hide",value:function(){var r=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this.isVisible()){var f=l||2e3;if(clearTimeout(this.hideId),!(!this.disabled&&this.options.hideMediaControl===!1)){var g=this.userKeepVisible||this.keepVisible,T=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(l||g||T))this.hideId=setTimeout(function(){return r.hide()},f);else{this.trigger(S.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(S.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var m=!1;this.updateCursorStyle(m)}}}}},{key:"updateCursorStyle",value:function(r){r?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}},{key:"settingsUpdate",value:function(){var r=this.getSettings();r&&!this.fullScreenOnVideoTagSupported&&!Io.fullscreenEnabled()&&(r.default&&da(r.default,"fullscreen"),r.left&&da(r.left,"fullscreen"),r.right&&da(r.right,"fullscreen"));var l=JSON.stringify(this.settings)!==JSON.stringify(r);l&&(this.settings=r,this.render())}},{key:"getSettings",value:function(){return Be.extend(!0,{},this.container&&this.container.settings)}},{key:"highDefinitionUpdate",value:function(r){this.isHD=r;var l=r?"addClass":"removeClass";this.$hdIndicator[l]("enabled")}},{key:"createCachedElements",value:function(){var r=this.$el.find(".media-control-layer");this.$duration=r.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=r.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=r.find("button.media-control-button[data-playpause]"),this.$playStopToggle=r.find("button.media-control-button[data-playstop]"),this.$position=r.find(".media-control-indicator[data-position]"),this.$seekBarContainer=r.find(".bar-container[data-seekbar]"),this.$seekBarHover=r.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=r.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=r.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=r.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=r.find(".bar-container[data-volume]"),this.$volumeContainer=r.find(".drawer-container[data-volume]"),this.$volumeIcon=r.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}},{key:"resetIndicators",value:function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}},{key:"initializeIcons",value:function(){var r=this.$el.find(".media-control-layer");r.find("button.media-control-button[data-play]").append(zr),r.find("button.media-control-button[data-pause]").append(Ia),r.find("button.media-control-button[data-stop]").append(Co),this.$playPauseToggle.append(zr),this.$playStopToggle.append(zr),this.$volumeIcon.append(Ro),this.$fullscreenToggle.append(wo),this.$hdIndicator.append(Gg)}},{key:"setSeekPercentage",value:function(r){r=Math.max(Math.min(r,100),0),this.displayedSeekBarPercentage!==r&&(this.displayedSeekBarPercentage=r,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:"".concat(r,"%")}),this.$seekBarScrubber.css({left:"".concat(r,"%")}))}},{key:"seekRelative",value:function(r){if(this.settings.seekEnabled){var l=this.container.getCurrentTime(),f=this.container.getDuration(),g=Math.min(Math.max(l+r,0),f);g=Math.min(g*100/f,100),this.container.seekPercentage(g)}}},{key:"bindKeyAndShow",value:function(r,l){var f=this;this.kibo.down(r,function(){return f.show(),l()})}},{key:"bindKeyEvents",value:function(){var r=this;if(!(Pe.isMobile||this.options.disableKeyboardShortcuts)){this.unbindKeyEvents(),this.kibo=new Se(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",function(){return r.togglePlayPause()}),this.bindKeyAndShow("left",function(){return r.seekRelative(-5)}),this.bindKeyAndShow("right",function(){return r.seekRelative(5)}),this.bindKeyAndShow("shift left",function(){return r.seekRelative(-10)}),this.bindKeyAndShow("shift right",function(){return r.seekRelative(10)}),this.bindKeyAndShow("shift ctrl left",function(){return r.seekRelative(-15)}),this.bindKeyAndShow("shift ctrl right",function(){return r.seekRelative(15)});var l=["1","2","3","4","5","6","7","8","9","0"];l.forEach(function(f){r.bindKeyAndShow(f,function(){r.settings.seekEnabled&&r.container&&r.container.seekPercentage(f*10)})})}}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}},{key:"parseColors",value:function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var r=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",r),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}},{key:"applyButtonStyle",value:function(r){this.buttonsColor&&r&&Be(r).find("svg path").css("fill",this.buttonsColor)}},{key:"destroy",value:function(){Be(document).unbind("mouseup",this.stopDragHandler),Be(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),vi(Pr(a.prototype),"destroy",this).call(this)}},{key:"configure",value:function(r){this.options.chromeless||r.source||r.sources?this.disable():this.enable(),this.trigger(S.MEDIACONTROL_OPTIONS_CHANGE)}},{key:"render",value:function(){var r=this,l=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings}));var f=Kt.getStyleFor(Bg,{baseUrl:this.options.baseUrl});this.$el.append(f[0]),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout(function(){return r.hide()},l),this.disabled&&this.hide()),Pe.isSafari&&Pe.isMobile&&(Pe.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var g=0;return this.displayedSeekBarPercentage&&(g=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(g),setTimeout(function(){!r.settings.seekEnabled&&r.$seekBarContainer.addClass("seek-disabled"),!Pe.isMobile&&!r.options.disableKeyboardShortcuts&&r.bindKeyEvents(),r.playerResize({width:r.options.width,height:r.options.height}),r.hideVolumeBar(0)},0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(S.MEDIACONTROL_RENDERED),this}}]),a}(vr);Oa.extend=function(e){return Hg(Oa,e)};var jg=`<div class="play-wrapper" data-poster></div>
`,Yg=`.player-poster[data-poster] {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  height: 100%;
  width: 100%;
  z-index: 998;
  top: 0;
  left: 0;
  background-color: transparent;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: 50% 50%; }
  .player-poster[data-poster].clickable {
    cursor: pointer; }
  .player-poster[data-poster]:hover .play-wrapper[data-poster] {
    opacity: 1; }
  .player-poster[data-poster] .play-wrapper[data-poster] {
    width: 100%;
    height: 25%;
    margin: 0 auto;
    opacity: 0.75;
    transition: opacity 0.1s ease; }
    .player-poster[data-poster] .play-wrapper[data-poster] svg {
      height: 100%; }
      .player-poster[data-poster] .play-wrapper[data-poster] svg path {
        fill: #fff; }
`,Wg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.hasStartedPlaying=!1,r.playRequested=!1,r.render(),setTimeout(function(){return r.update()},0),r}return jt(a,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Xt(jg)}},{key:"shouldRender",get:function(){var r=!!(this.options.poster&&this.options.poster.showForNoOp);return this.container.playback.name!=="html_img"&&(this.container.playback.getPlaybackType()!==He.NO_OP||r)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||this.options.poster.showOnVideoEnd===void 0}},{key:"bindEvents",value:function(){this.listenTo(this.container,S.CONTAINER_STOP,this.onStop),this.listenTo(this.container,S.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,S.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,S.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,S.CONTAINER_ENDED,this.onStop)}},{key:"onError",value:function(r){this.hasFatalError=r.level===nr.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())}},{key:"onPlay",value:function(){this.hasStartedPlaying=!0,this.update()}},{key:"onStop",value:function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()}},{key:"updatePlayButton",value:function(r){r&&(!this.options.chromeless||this.options.allowUserInteraction)?this.showPlayButton():this.hidePlayButton()}},{key:"showPlayButton",value:function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.$el.removeClass("clickable")}},{key:"clicked",value:function(){if(!this.hasStartedPlaying)return(!this.options.chromeless||this.options.allowUserInteraction)&&(this.playRequested=!0,this.update(),this.container.playback&&(this.container.playback._consented=!0),this.container.play()),!1}},{key:"shouldHideOnPlay",value:function(){return!this.container.playback.isAudioOnly}},{key:"update",value:function(){if(this.shouldRender){var r=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(r),this.updatePoster()}}},{key:"updatePoster",value:function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}},{key:"showPoster",value:function(){this.container.disableMediaControl(),this.$el.show()}},{key:"hidePoster",value:function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()}},{key:"render",value:function(){if(this.shouldRender){var r=Kt.getStyleFor(Yg,{baseUrl:this.options.baseUrl});this.$el.html(this.template()),this.$el.append(r[0]);var l=this.options.poster&&this.options.poster.custom===void 0;if(l){var f=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+f+")"}),this.removeVideoElementPoster()}else this.options.poster&&(this.$el.css({background:this.options.poster.custom}),this.removeVideoElementPoster());this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(zr),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var g=this.options.mediacontrol&&this.options.mediacontrol.buttons;return g&&this.$el.find("svg path").css("fill",g),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(g=this.options.mediacontrol.buttons,this.$playButton.css("color",g)),this.update(),this}}},{key:"removeVideoElementPoster",value:function(){this.container.playback&&this.container.playback.$el&&this.container.playback.$el[0]&&this.container.playback.$el[0].removeAttribute&&this.container.playback.$el[0].removeAttribute("poster")}}]),a}(Jr),zg=`<span data-seek-time></span>
<span data-duration></span>
`,$g=`.seek-time[data-seek-time] {
  position: absolute;
  white-space: nowrap;
  height: 20px;
  line-height: 20px;
  font-size: 0;
  left: -100%;
  bottom: 55px;
  background-color: rgba(2, 2, 2, 0.5);
  z-index: 9999;
  transition: opacity 0.1s ease; }
  .seek-time[data-seek-time].hidden[data-seek-time] {
    opacity: 0; }
  .seek-time[data-seek-time] [data-seek-time] {
    display: inline-block;
    color: white;
    font-size: 10px;
    padding-left: 7px;
    padding-right: 7px;
    vertical-align: top; }
  .seek-time[data-seek-time] [data-duration] {
    display: inline-block;
    color: rgba(255, 255, 255, 0.5);
    font-size: 10px;
    padding-right: 7px;
    vertical-align: top; }
    .seek-time[data-seek-time] [data-duration]:before {
      content: "|";
      margin-right: 7px; }
`,Po=Nr.formatTime,Xg=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.hoveringOverSeekBar=!1,r.hoverPosition=null,r.duration=null,r.firstFragDateTime=null,r.actualLiveTime=!!r.mediaControl.options.actualLiveTime,r.actualLiveTime&&(r.mediaControl.options.actualLiveServerTime?r.actualLiveServerTimeDiff=new Date().getTime()-new Date(r.mediaControl.options.actualLiveServerTime).getTime():r.actualLiveServerTimeDiff=0),r}return jt(a,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Xt(zg)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===He.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,S.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,S.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,S.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,S.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,S.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,S.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(r){this.duration=r.total,this.firstFragDateTime=r.firstFragDateTime,this.update()}},{key:"showTime",value:function(r){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(r),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(r){var l=r.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(l/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var r,l,f,g;return this.useActualLiveTime?(this.firstFragDateTime?(g=new Date(this.firstFragDateTime),f=new Date(this.firstFragDateTime),f.setHours(0,0,0,0),l=(g.getTime()-f.getTime())/1e3+this.duration):(f=new Date(new Date().getTime()-this.actualLiveServerTimeDiff),g=new Date(f),l=(g-f.setHours(0,0,0,0))/1e3),r=l-this.duration+this.hoverPosition*this.duration,r<0&&(r+=86400)):r=this.hoverPosition*this.duration,{seekTime:r,secondsSinceMidnight:l}}},{key:"update",value:function(){if(this.rendered)if(!this.shouldBeVisible())this.$el.hide(),this.$el.css("left","-100%");else{var r=this.getSeekTime(),l=Po(r.seekTime,this.useActualLiveTime);if(l!==this.displayedSeekTime&&(this.$seekTimeEl.text(l),this.displayedSeekTime=l),this.durationShown){this.$durationEl.show();var f=Po(this.actualLiveTime?r.secondsSinceMidnight:this.duration,this.actualLiveTime);f!==this.displayedDuration&&(this.$durationEl.text(f),this.displayedDuration=f)}else this.$durationEl.hide();this.$el.show();var g=this.mediaControl.$seekBarContainer.width(),T=this.$el.width(),m=this.hoverPosition*g;m-=T/2,m=Math.max(0,Math.min(m,g-T)),this.$el.css("left",m)}}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&this.hoverPosition!==null&&this.duration!==null}},{key:"render",value:function(){var r=Kt.getStyleFor($g,{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(r[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),a}(vr),qg=`<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>
`,Zg=`.spinner-three-bounce[data-spinner] {
  position: absolute;
  margin: 0 auto;
  width: 70px;
  text-align: center;
  z-index: 999;
  left: 0;
  right: 0;
  margin-left: auto;
  margin-right: auto;
  /* center vertically */
  top: 50%;
  transform: translateY(-50%); }
  .spinner-three-bounce[data-spinner] > div {
    width: 18px;
    height: 18px;
    background-color: #FFFFFF;
    border-radius: 100%;
    display: inline-block;
    animation: bouncedelay 1.4s infinite ease-in-out;
    /* Prevent first frame from flickering when animation starts */
    animation-fill-mode: both; }
  .spinner-three-bounce[data-spinner] [data-bounce1] {
    animation-delay: -0.32s; }
  .spinner-three-bounce[data-spinner] [data-bounce2] {
    animation-delay: -0.16s; }

@keyframes bouncedelay {
  0%, 80%, 100% {
    transform: scale(0); }
  40% {
    transform: scale(1); } }
`,Do=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.template=Xt(qg),r.showTimeout=null,r.listenTo(r.container,S.CONTAINER_STATE_BUFFERING,r.onBuffering),r.listenTo(r.container,S.CONTAINER_STATE_BUFFERFULL,r.onBufferFull),r.listenTo(r.container,S.CONTAINER_STOP,r.onStop),r.listenTo(r.container,S.CONTAINER_ENDED,r.onStop),r.listenTo(r.container,S.CONTAINER_ERROR,r.onStop),r.render(),r}return jt(a,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}},{key:"onBuffering",value:function(){this.show()}},{key:"onBufferFull",value:function(){this.hide()}},{key:"onStop",value:function(){this.hide()}},{key:"show",value:function(){var r=this;this.showTimeout===null&&(this.showTimeout=setTimeout(function(){return r.$el.show()},300))}},{key:"hide",value:function(){this.showTimeout!==null&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()}},{key:"render",value:function(){var r=Kt.getStyleFor(Zg,{baseUrl:this.options.baseUrl});return this.$el.html(this.template()),this.$el.append(r[0]),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this}}]),a}(Jr),No=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.setInitialAttrs(),r.reportInterval=r.options.reportInterval||5e3,r.state="IDLE",r}return jt(a,[{key:"name",get:function(){return"stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,S.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,S.CONTAINER_STOP,this.onStop),this.listenTo(this.container,S.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,S.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,S.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,S.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,S.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,S.PLAYBACK_STATS_ADD,this.onStatsAdd)}},{key:"setInitialAttrs",value:function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}}},{key:"onPlay",value:function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))}},{key:"onStop",value:function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"}},{key:"onBuffering",value:function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++}},{key:"onBufferFull",value:function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"}},{key:"getRebufferingTime",value:function(){return Date.now()-this.rebufferingTimeInit}},{key:"getWatchingTime",value:function(){var r=Date.now()-this.watchingTimeInit;return r-this.rebufferingTime}},{key:"isRebuffering",value:function(){return!!this.rebufferingTimeInit}},{key:"onStatsAdd",value:function(r){Be.extend(this.externalMetrics,r)}},{key:"getStats",value:function(){var r={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return Be.extend(r,this.externalMetrics),r}},{key:"report",value:function(){this.container.statsReport(this.getStats())}}]),a}(Qr),Qg=`<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>
<% if(typeof imageLink !== 'undefined') { %>
<a target="_blank" href="<%= imageLink %>">
<% } %>
<img src="<%= imageUrl %>">
<% if(typeof imageLink !== 'undefined') { %>
</a>
<% } %>
</div>
`,Jg=`.clappr-watermark[data-watermark] {
  position: absolute;
  min-width: 70px;
  max-width: 200px;
  width: 12%;
  text-align: center;
  z-index: 10; }

.clappr-watermark[data-watermark] a {
  outline: none;
  cursor: pointer; }

.clappr-watermark[data-watermark] img {
  max-width: 100%; }

.clappr-watermark[data-watermark-bottom-left] {
  bottom: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-bottom-right] {
  bottom: 10px;
  right: 42px; }

.clappr-watermark[data-watermark-top-left] {
  top: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-top-right] {
  top: 10px;
  right: 37px; }
`,Fo=function(e){Yt(a,e);var n=Wt(a);function a(i){var r;return Ht(this,a),r=n.call(this,i),r.configure(),r}return jt(a,[{key:"name",get:function(){return"watermark"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Xt(Qg)}},{key:"bindEvents",value:function(){this.listenTo(this.container,S.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,S.CONTAINER_STOP,this.onStop),this.listenTo(this.container,S.CONTAINER_OPTIONS_CHANGE,this.configure)}},{key:"configure",value:function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()}},{key:"onPlay",value:function(){this.hidden||this.$el.show()}},{key:"onStop",value:function(){this.$el.hide()}},{key:"render",value:function(){this.$el.hide();var r=Kt.getStyleFor(Jg,{baseUrl:this.options.baseUrl}),l={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(l)),this.$el.append(r[0]),this.container.$el.append(this.$el),this}}]),a}(Jr);function Mo(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,i)}return a}function ha(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Mo(Object(a),!0).forEach(function(i){rp(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mo(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function ep(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Bo(e,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tp(e,n,a){return n&&Bo(e.prototype,n),a&&Bo(e,a),e}function rp(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function ip(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Pa(e,n)}function hr(e){return hr=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},hr(e)}function Pa(e,n){return Pa=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Pa(e,n)}function np(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ap(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sp(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:ap(e)}function op(e){var n=np();return function(){var i=hr(e),r;if(n){var l=hr(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return sp(this,r)}}function lp(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=hr(e),e!==null););return e}function Rr(e,n,a){return typeof Reflect<"u"&&Reflect.get?Rr=Reflect.get:Rr=function(r,l,f){var g=lp(r,l);if(g){var T=Object.getOwnPropertyDescriptor(g,l);return T.get?T.get.call(f):T.value}},Rr(e,n,a||e)}function up(e){return cp(e)||fp(e)||dp(e)||hp()}function cp(e){if(Array.isArray(e))return Da(e)}function fp(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dp(e,n){if(e){if(typeof e=="string")return Da(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Da(e,n)}}function Da(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,i=new Array(n);a<n;a++)i[a]=e[a];return i}function hp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jl={exports:{}};(function(e,n){typeof window<"u"&&function(i,r){e.exports=r()}(gp,function(){return function(a){var i={};function r(l){if(i[l])return i[l].exports;var f=i[l]={i:l,l:!1,exports:{}};return a[l].call(f.exports,f,f.exports,r),f.l=!0,f.exports}return r.m=a,r.c=i,r.d=function(l,f,g){r.o(l,f)||Object.defineProperty(l,f,{enumerable:!0,get:g})},r.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},r.t=function(l,f){if(f&1&&(l=r(l)),f&8||f&4&&typeof l=="object"&&l&&l.__esModule)return l;var g=Object.create(null);if(r.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:l}),f&2&&typeof l!="string")for(var T in l)r.d(g,T,(function(m){return l[m]}).bind(null,T));return g},r.n=function(l){var f=l&&l.__esModule?function(){return l.default}:function(){return l};return r.d(f,"a",f),f},r.o=function(l,f){return Object.prototype.hasOwnProperty.call(l,f)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(a,i,r){var l=Object.prototype.hasOwnProperty,f="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(f=!1));function T(w,I,K){this.fn=w,this.context=I,this.once=K||!1}function m(w,I,K,F,j){if(typeof K!="function")throw new TypeError("The listener must be a function");var X=new T(K,F||w,j),$=f?f+I:I;return w._events[$]?w._events[$].fn?w._events[$]=[w._events[$],X]:w._events[$].push(X):(w._events[$]=X,w._eventsCount++),w}function y(w,I){--w._eventsCount===0?w._events=new g:delete w._events[I]}function U(){this._events=new g,this._eventsCount=0}U.prototype.eventNames=function(){var I=[],K,F;if(this._eventsCount===0)return I;for(F in K=this._events)l.call(K,F)&&I.push(f?F.slice(1):F);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(K)):I},U.prototype.listeners=function(I){var K=f?f+I:I,F=this._events[K];if(!F)return[];if(F.fn)return[F.fn];for(var j=0,X=F.length,$=new Array(X);j<X;j++)$[j]=F[j].fn;return $},U.prototype.listenerCount=function(I){var K=f?f+I:I,F=this._events[K];return F?F.fn?1:F.length:0},U.prototype.emit=function(I,K,F,j,X,$){var re=f?f+I:I;if(!this._events[re])return!1;var ee=this._events[re],te=arguments.length,se,pe;if(ee.fn){switch(ee.once&&this.removeListener(I,ee.fn,void 0,!0),te){case 1:return ee.fn.call(ee.context),!0;case 2:return ee.fn.call(ee.context,K),!0;case 3:return ee.fn.call(ee.context,K,F),!0;case 4:return ee.fn.call(ee.context,K,F,j),!0;case 5:return ee.fn.call(ee.context,K,F,j,X),!0;case 6:return ee.fn.call(ee.context,K,F,j,X,$),!0}for(pe=1,se=new Array(te-1);pe<te;pe++)se[pe-1]=arguments[pe];ee.fn.apply(ee.context,se)}else{var _e=ee.length,W;for(pe=0;pe<_e;pe++)switch(ee[pe].once&&this.removeListener(I,ee[pe].fn,void 0,!0),te){case 1:ee[pe].fn.call(ee[pe].context);break;case 2:ee[pe].fn.call(ee[pe].context,K);break;case 3:ee[pe].fn.call(ee[pe].context,K,F);break;case 4:ee[pe].fn.call(ee[pe].context,K,F,j);break;default:if(!se)for(W=1,se=new Array(te-1);W<te;W++)se[W-1]=arguments[W];ee[pe].fn.apply(ee[pe].context,se)}}return!0},U.prototype.on=function(I,K,F){return m(this,I,K,F,!1)},U.prototype.once=function(I,K,F){return m(this,I,K,F,!0)},U.prototype.removeListener=function(I,K,F,j){var X=f?f+I:I;if(!this._events[X])return this;if(!K)return y(this,X),this;var $=this._events[X];if($.fn)$.fn===K&&(!j||$.once)&&(!F||$.context===F)&&y(this,X);else{for(var re=0,ee=[],te=$.length;re<te;re++)($[re].fn!==K||j&&!$[re].once||F&&$[re].context!==F)&&ee.push($[re]);ee.length?this._events[X]=ee.length===1?ee[0]:ee:y(this,X)}return this},U.prototype.removeAllListeners=function(I){var K;return I?(K=f?f+I:I,this._events[K]&&y(this,K)):(this._events=new g,this._eventsCount=0),this},U.prototype.off=U.prototype.removeListener,U.prototype.addListener=U.prototype.on,U.prefixed=f,U.EventEmitter=U,a.exports=U},"./node_modules/url-toolkit/src/url-toolkit.js":function(a,i,r){(function(l){var f=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,g=/^([^\/?#]*)(.*)$/,T=/(?:\/|^)\.(?=\/)/g,m=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,y={buildAbsoluteURL:function(U,w,I){if(I=I||{},U=U.trim(),w=w.trim(),!w){if(!I.alwaysNormalize)return U;var K=y.parseURL(U);if(!K)throw new Error("Error trying to parse base URL.");return K.path=y.normalizePath(K.path),y.buildURLFromParts(K)}var F=y.parseURL(w);if(!F)throw new Error("Error trying to parse relative URL.");if(F.scheme)return I.alwaysNormalize?(F.path=y.normalizePath(F.path),y.buildURLFromParts(F)):w;var j=y.parseURL(U);if(!j)throw new Error("Error trying to parse base URL.");if(!j.netLoc&&j.path&&j.path[0]!=="/"){var X=g.exec(j.path);j.netLoc=X[1],j.path=X[2]}j.netLoc&&!j.path&&(j.path="/");var $={scheme:j.scheme,netLoc:F.netLoc,path:null,params:F.params,query:F.query,fragment:F.fragment};if(!F.netLoc&&($.netLoc=j.netLoc,F.path[0]!=="/"))if(!F.path)$.path=j.path,F.params||($.params=j.params,F.query||($.query=j.query));else{var re=j.path,ee=re.substring(0,re.lastIndexOf("/")+1)+F.path;$.path=y.normalizePath(ee)}return $.path===null&&($.path=I.alwaysNormalize?y.normalizePath(F.path):F.path),y.buildURLFromParts($)},parseURL:function(U){var w=f.exec(U);return w?{scheme:w[1]||"",netLoc:w[2]||"",path:w[3]||"",params:w[4]||"",query:w[5]||"",fragment:w[6]||""}:null},normalizePath:function(U){for(U=U.split("").reverse().join("").replace(T,"");U.length!==(U=U.replace(m,"")).length;);return U.split("").reverse().join("")},buildURLFromParts:function(U){return U.scheme+U.netLoc+U.path+U.params+U.query+U.fragment}};a.exports=y})()},"./node_modules/webworkify-webpack/index.js":function(a,i,r){function l(I){var K={};function F(X){if(K[X])return K[X].exports;var $=K[X]={i:X,l:!1,exports:{}};return I[X].call($.exports,$,$.exports,F),$.l=!0,$.exports}F.m=I,F.c=K,F.i=function(X){return X},F.d=function(X,$,re){F.o(X,$)||Object.defineProperty(X,$,{configurable:!1,enumerable:!0,get:re})},F.r=function(X){Object.defineProperty(X,"__esModule",{value:!0})},F.n=function(X){var $=X&&X.__esModule?function(){return X.default}:function(){return X};return F.d($,"a",$),$},F.o=function(X,$){return Object.prototype.hasOwnProperty.call(X,$)},F.p="/",F.oe=function(X){throw console.error(X),X};var j=F(F.s=ENTRY_MODULE);return j.default||j}var f="[\\.|\\-|\\+|\\w|/|@]+",g="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+f+").*?\\)";function T(I){return(I+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function m(I){return!isNaN(1*I)}function y(I,K,F){var j={};j[F]=[];var X=K.toString(),$=X.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!$)return j;for(var re=$[1],ee=new RegExp("(\\\\n|\\W)"+T(re)+g,"g"),te;te=ee.exec(X);)te[3]!=="dll-reference"&&j[F].push(te[3]);for(ee=new RegExp("\\("+T(re)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+g,"g");te=ee.exec(X);)I[te[2]]||(j[F].push(te[1]),I[te[2]]=r(te[1]).m),j[te[2]]=j[te[2]]||[],j[te[2]].push(te[4]);for(var se=Object.keys(j),pe=0;pe<se.length;pe++)for(var _e=0;_e<j[se[pe]].length;_e++)m(j[se[pe]][_e])&&(j[se[pe]][_e]=1*j[se[pe]][_e]);return j}function U(I){var K=Object.keys(I);return K.reduce(function(F,j){return F||I[j].length>0},!1)}function w(I,K){for(var F={main:[K]},j={main:[]},X={main:{}};U(F);)for(var $=Object.keys(F),re=0;re<$.length;re++){var ee=$[re],te=F[ee],se=te.pop();if(X[ee]=X[ee]||{},!(X[ee][se]||!I[ee][se])){X[ee][se]=!0,j[ee]=j[ee]||[],j[ee].push(se);for(var pe=y(I,I[ee][se],ee),_e=Object.keys(pe),W=0;W<_e.length;W++)F[_e[W]]=F[_e[W]]||[],F[_e[W]]=F[_e[W]].concat(pe[_e[W]])}}return j}a.exports=function(I,K){K=K||{};var F={main:r.m},j=K.all?{main:Object.keys(F.main)}:w(F,I),X="";Object.keys(j).filter(function(se){return se!=="main"}).forEach(function(se){for(var pe=0;j[se][pe];)pe++;j[se].push(pe),F[se][pe]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",X=X+"var "+se+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(pe))+")({"+j[se].map(function(_e){return""+JSON.stringify(_e)+": "+F[se][_e].toString()}).join(",")+`});
`}),X=X+"new (("+l.toString().replace("ENTRY_MODULE",JSON.stringify(I))+")({"+j.main.map(function(se){return""+JSON.stringify(se)+": "+F.main[se].toString()}).join(",")+"}))(self);";var $=new window.Blob([X],{type:"text/javascript"});if(K.bare)return $;var re=window.URL||window.webkitURL||window.mozURL||window.msURL,ee=re.createObjectURL($),te=new window.Worker(ee);return te.objectURL=ee,te}},"./src/crypt/decrypter.js":function(a,i,r){r.r(i);var l=function(){function X(re,ee){this.subtle=re,this.aesIV=ee}var $=X.prototype;return $.decrypt=function(ee,te){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},te,ee)},X}(),f=function(){function X(re,ee){this.subtle=re,this.key=ee}var $=X.prototype;return $.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},X}(),g=f;function T(X){var $=X.byteLength,re=$&&new DataView(X).getUint8($-1);return re?X.slice(0,$-re):X}var m=function(){function X(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var $=X.prototype;return $.uint8ArrayToUint32Array_=function(ee){for(var te=new DataView(ee),se=new Uint32Array(4),pe=0;pe<4;pe++)se[pe]=te.getUint32(pe*4);return se},$.initTable=function(){var ee=this.sBox,te=this.invSBox,se=this.subMix,pe=se[0],_e=se[1],W=se[2],z=se[3],ge=this.invSubMix,Z=ge[0],q=ge[1],ue=ge[2],Te=ge[3],me=new Uint32Array(256),ye=0,be=0,Ce=0;for(Ce=0;Ce<256;Ce++)Ce<128?me[Ce]=Ce<<1:me[Ce]=Ce<<1^283;for(Ce=0;Ce<256;Ce++){var De=be^be<<1^be<<2^be<<3^be<<4;De=De>>>8^De&255^99,ee[ye]=De,te[De]=ye;var Ie=me[ye],ke=me[Ie],Ne=me[ke],qe=me[De]*257^De*16843008;pe[ye]=qe<<24|qe>>>8,_e[ye]=qe<<16|qe>>>16,W[ye]=qe<<8|qe>>>24,z[ye]=qe,qe=Ne*16843009^ke*65537^Ie*257^ye*16843008,Z[De]=qe<<24|qe>>>8,q[De]=qe<<16|qe>>>16,ue[De]=qe<<8|qe>>>24,Te[De]=qe,ye?(ye=Ie^me[me[me[Ne^Ie]]],be^=me[me[be]]):ye=be=1}},$.expandKey=function(ee){for(var te=this.uint8ArrayToUint32Array_(ee),se=!0,pe=0;pe<te.length&&se;)se=te[pe]===this.key[pe],pe++;if(!se){this.key=te;var _e=this.keySize=te.length;if(_e!==4&&_e!==6&&_e!==8)throw new Error("Invalid aes key size="+_e);var W=this.ksRows=(_e+6+1)*4,z,ge,Z=this.keySchedule=new Uint32Array(W),q=this.invKeySchedule=new Uint32Array(W),ue=this.sBox,Te=this.rcon,me=this.invSubMix,ye=me[0],be=me[1],Ce=me[2],De=me[3],Ie,ke;for(z=0;z<W;z++){if(z<_e){Ie=Z[z]=te[z];continue}ke=Ie,z%_e===0?(ke=ke<<8|ke>>>24,ke=ue[ke>>>24]<<24|ue[ke>>>16&255]<<16|ue[ke>>>8&255]<<8|ue[ke&255],ke^=Te[z/_e|0]<<24):_e>6&&z%_e===4&&(ke=ue[ke>>>24]<<24|ue[ke>>>16&255]<<16|ue[ke>>>8&255]<<8|ue[ke&255]),Z[z]=Ie=(Z[z-_e]^ke)>>>0}for(ge=0;ge<W;ge++)z=W-ge,ge&3?ke=Z[z]:ke=Z[z-4],ge<4||z<=4?q[ge]=ke:q[ge]=ye[ue[ke>>>24]]^be[ue[ke>>>16&255]]^Ce[ue[ke>>>8&255]]^De[ue[ke&255]],q[ge]=q[ge]>>>0}},$.networkToHostOrderSwap=function(ee){return ee<<24|(ee&65280)<<8|(ee&16711680)>>8|ee>>>24},$.decrypt=function(ee,te,se,pe){for(var _e=this.keySize+6,W=this.invKeySchedule,z=this.invSBox,ge=this.invSubMix,Z=ge[0],q=ge[1],ue=ge[2],Te=ge[3],me=this.uint8ArrayToUint32Array_(se),ye=me[0],be=me[1],Ce=me[2],De=me[3],Ie=new Int32Array(ee),ke=new Int32Array(Ie.length),Ne,qe,pt,ut,Me,rt,ht,ct,xt,Lt,B,H,Q,ce,le=this.networkToHostOrderSwap;te<Ie.length;){for(xt=le(Ie[te]),Lt=le(Ie[te+1]),B=le(Ie[te+2]),H=le(Ie[te+3]),Me=xt^W[0],rt=H^W[1],ht=B^W[2],ct=Lt^W[3],Q=4,ce=1;ce<_e;ce++)Ne=Z[Me>>>24]^q[rt>>16&255]^ue[ht>>8&255]^Te[ct&255]^W[Q],qe=Z[rt>>>24]^q[ht>>16&255]^ue[ct>>8&255]^Te[Me&255]^W[Q+1],pt=Z[ht>>>24]^q[ct>>16&255]^ue[Me>>8&255]^Te[rt&255]^W[Q+2],ut=Z[ct>>>24]^q[Me>>16&255]^ue[rt>>8&255]^Te[ht&255]^W[Q+3],Me=Ne,rt=qe,ht=pt,ct=ut,Q=Q+4;Ne=z[Me>>>24]<<24^z[rt>>16&255]<<16^z[ht>>8&255]<<8^z[ct&255]^W[Q],qe=z[rt>>>24]<<24^z[ht>>16&255]<<16^z[ct>>8&255]<<8^z[Me&255]^W[Q+1],pt=z[ht>>>24]<<24^z[ct>>16&255]<<16^z[Me>>8&255]<<8^z[rt&255]^W[Q+2],ut=z[ct>>>24]<<24^z[Me>>16&255]<<16^z[rt>>8&255]<<8^z[ht&255]^W[Q+3],Q=Q+3,ke[te]=le(Ne^ye),ke[te+1]=le(ut^be),ke[te+2]=le(pt^Ce),ke[te+3]=le(qe^De),ye=xt,be=Lt,Ce=B,De=H,te=te+4}return pe?T(ke.buffer):ke.buffer},$.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},X}(),y=m,U=r("./src/errors.ts"),w=r("./src/utils/logger.js"),I=r("./src/events.js"),K=r("./src/utils/get-self-scope.js"),F=Object(K.getSelfScope)(),j=function(){function X(re,ee,te){var se=te===void 0?{}:te,pe=se.removePKCS7Padding,_e=pe===void 0?!0:pe;if(this.logEnabled=!0,this.observer=re,this.config=ee,this.removePKCS7Padding=_e,_e)try{var W=F.crypto;W&&(this.subtle=W.subtle||W.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}var $=X.prototype;return $.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},$.decrypt=function(ee,te,se,pe){var _e=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(w.logger.log("JS AES decrypt"),this.logEnabled=!1);var W=this.decryptor;W||(this.decryptor=W=new y),W.expandKey(te),pe(W.decrypt(ee,0,se,this.removePKCS7Padding))}else{this.logEnabled&&(w.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var z=this.subtle;this.key!==te&&(this.key=te,this.fastAesKey=new g(z,te)),this.fastAesKey.expandKey().then(function(ge){var Z=new l(z,se);Z.decrypt(ee,ge).catch(function(q){_e.onWebCryptoError(q,ee,te,se,pe)}).then(function(q){pe(q)})}).catch(function(ge){_e.onWebCryptoError(ge,ee,te,se,pe)})}},$.onWebCryptoError=function(ee,te,se,pe,_e){this.config.enableSoftwareAES?(w.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(te,se,pe,_e)):(w.logger.error("decrypting error : "+ee.message),this.observer.trigger(I.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:ee.message}))},$.destroy=function(){var ee=this.decryptor;ee&&(ee.destroy(),this.decryptor=void 0)},X}();i.default=j},"./src/demux/demuxer-inline.js":function(a,i,r){r.r(i);var l=r("./src/events.js"),f=r("./src/errors.ts"),g=r("./src/crypt/decrypter.js"),T=r("./src/polyfills/number.js"),m=r("./src/utils/logger.js"),y=r("./src/utils/get-self-scope.js");function U(_,R,x,v){var k,L,D,M,V,Y=navigator.userAgent.toLowerCase(),ie=v,oe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(k=((R[x+2]&192)>>>6)+1,L=(R[x+2]&60)>>>2,L>oe.length-1){_.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+L});return}return M=(R[x+2]&1)<<2,M|=(R[x+3]&192)>>>6,m.logger.log("manifest codec:"+v+",ADTS data:type:"+k+",sampleingIndex:"+L+"["+oe[L]+"Hz],channelConfig:"+M),/firefox/i.test(Y)?L>=6?(k=5,V=new Array(4),D=L-3):(k=2,V=new Array(2),D=L):Y.indexOf("android")!==-1?(k=2,V=new Array(2),D=L):(k=5,V=new Array(4),v&&(v.indexOf("mp4a.40.29")!==-1||v.indexOf("mp4a.40.5")!==-1)||!v&&L>=6?D=L-3:((v&&v.indexOf("mp4a.40.2")!==-1&&(L>=6&&M===1||/vivaldi/i.test(Y))||!v&&M===1)&&(k=2,V=new Array(2)),D=L)),V[0]=k<<3,V[0]|=(L&14)>>1,V[1]|=(L&1)<<7,V[1]|=M<<3,k===5&&(V[1]|=(D&14)>>1,V[2]=(D&1)<<7,V[2]|=8,V[3]=0),{config:V,samplerate:oe[L],channelCount:M,codec:"mp4a.40."+k,manifestCodec:ie}}function w(_,R){return _[R]===255&&(_[R+1]&246)===240}function I(_,R){return _[R+1]&1?7:9}function K(_,R){return(_[R+3]&3)<<11|_[R+4]<<3|(_[R+5]&224)>>>5}function F(_,R){return!!(R+1<_.length&&w(_,R))}function j(_,R){if(F(_,R)){var x=I(_,R);if(R+x>=_.length)return!1;var v=K(_,R);if(v<=x)return!1;var k=R+v;if(k===_.length||k+1<_.length&&w(_,k))return!0}return!1}function X(_,R,x,v,k){if(!_.samplerate){var L=U(R,x,v,k);_.config=L.config,_.samplerate=L.samplerate,_.channelCount=L.channelCount,_.codec=L.codec,_.manifestCodec=L.manifestCodec,m.logger.log("parsed codec:"+_.codec+",rate:"+L.samplerate+",nb channel:"+L.channelCount)}}function $(_){return 1024*9e4/_}function re(_,R,x,v,k){var L,D,M,V=_.length;if(L=I(_,R),D=K(_,R),D-=L,D>0&&R+L+D<=V)return M=x+v*k,{headerLength:L,frameLength:D,stamp:M}}function ee(_,R,x,v,k){var L=$(_.samplerate),D=re(R,x,v,k,L);if(D){var M=D.stamp,V=D.headerLength,Y=D.frameLength,ie={unit:R.subarray(x+V,x+V+Y),pts:M,dts:M};return _.samples.push(ie),{sample:ie,length:Y+V}}}var te=r("./src/demux/id3.js"),se=function(){function _(x,v,k){this.observer=x,this.config=k,this.remuxer=v}var R=_.prototype;return R.resetInitSegment=function(v,k,L,D){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:k,duration:D,inputTimeScale:9e4}},R.resetTimeStamp=function(){},_.probe=function(v){if(!v)return!1;for(var k=te.default.getID3Data(v,0)||[],L=k.length,D=v.length;L<D;L++)if(j(v,L))return m.logger.log("ADTS sync word found !"),!0;return!1},R.append=function(v,k,L,D){for(var M=this._audioTrack,V=te.default.getID3Data(v,0)||[],Y=te.default.getTimeStamp(V),ie=Object(T.isFiniteNumber)(Y)?Y*90:k*9e4,oe=0,ne=ie,ve=v.length,de=V.length,Ee=[{pts:ne,dts:ne,data:V}];de<ve-1;)if(F(v,de)&&de+5<ve){X(M,this.observer,v,de,M.manifestCodec);var fe=ee(M,v,de,ie,oe);if(fe)de+=fe.length,ne=fe.sample.pts,oe++;else{m.logger.log("Unable to parse AAC frame");break}}else te.default.isHeader(v,de)?(V=te.default.getID3Data(v,de),Ee.push({pts:ne,dts:ne,data:V}),de+=V.length):de++;this.remuxer.remux(M,{samples:[]},{samples:Ee,inputTimeScale:9e4},{samples:[]},k,L,D)},R.destroy=function(){},_}(),pe=se,_e=r("./src/demux/mp4demuxer.js"),W={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(R,x,v,k,L){if(!(v+24>x.length)){var D=this.parseHeader(x,v);if(D&&v+D.frameLength<=x.length){var M=D.samplesPerFrame*9e4/D.sampleRate,V=k+L*M,Y={unit:x.subarray(v,v+D.frameLength),pts:V,dts:V};return R.config=[],R.channelCount=D.channelCount,R.samplerate=D.sampleRate,R.samples.push(Y),{sample:Y,length:D.frameLength}}}},parseHeader:function(R,x){var v=R[x+1]>>3&3,k=R[x+1]>>1&3,L=R[x+2]>>4&15,D=R[x+2]>>2&3,M=R[x+2]>>1&1;if(v!==1&&L!==0&&L!==15&&D!==3){var V=v===3?3-k:k===3?3:4,Y=W.BitratesMap[V*14+L-1]*1e3,ie=v===3?0:v===2?1:2,oe=W.SamplingRateMap[ie*3+D],ne=R[x+3]>>6===3?1:2,ve=W.SamplesCoefficients[v][k],de=W.BytesInSlot[k],Ee=ve*8*de,fe=parseInt(ve*Y/oe+M,10)*de;return{sampleRate:oe,channelCount:ne,frameLength:fe,samplesPerFrame:Ee}}},isHeaderPattern:function(R,x){return R[x]===255&&(R[x+1]&224)===224&&(R[x+1]&6)!==0},isHeader:function(R,x){return!!(x+1<R.length&&this.isHeaderPattern(R,x))},probe:function(R,x){if(x+1<R.length&&this.isHeaderPattern(R,x)){var v=4,k=this.parseHeader(R,x),L=v;k&&k.frameLength&&(L=k.frameLength);var D=x+L;if(D===R.length||D+1<R.length&&this.isHeaderPattern(R,D))return!0}return!1}},z=W,ge=function(){function _(x){this.data=x,this.bytesAvailable=x.byteLength,this.word=0,this.bitsAvailable=0}var R=_.prototype;return R.loadWord=function(){var v=this.data,k=this.bytesAvailable,L=v.byteLength-k,D=new Uint8Array(4),M=Math.min(4,k);if(M===0)throw new Error("no bytes available");D.set(v.subarray(L,L+M)),this.word=new DataView(D.buffer).getUint32(0),this.bitsAvailable=M*8,this.bytesAvailable-=M},R.skipBits=function(v){var k;this.bitsAvailable>v?(this.word<<=v,this.bitsAvailable-=v):(v-=this.bitsAvailable,k=v>>3,v-=k>>3,this.bytesAvailable-=k,this.loadWord(),this.word<<=v,this.bitsAvailable-=v)},R.readBits=function(v){var k=Math.min(this.bitsAvailable,v),L=this.word>>>32-k;return v>32&&m.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=k,this.bitsAvailable>0?this.word<<=k:this.bytesAvailable>0&&this.loadWord(),k=v-k,k>0&&this.bitsAvailable?L<<k|this.readBits(k):L},R.skipLZ=function(){var v;for(v=0;v<this.bitsAvailable;++v)if(this.word&2147483648>>>v)return this.word<<=v,this.bitsAvailable-=v,v;return this.loadWord(),v+this.skipLZ()},R.skipUEG=function(){this.skipBits(1+this.skipLZ())},R.skipEG=function(){this.skipBits(1+this.skipLZ())},R.readUEG=function(){var v=this.skipLZ();return this.readBits(v+1)-1},R.readEG=function(){var v=this.readUEG();return 1&v?1+v>>>1:-1*(v>>>1)},R.readBoolean=function(){return this.readBits(1)===1},R.readUByte=function(){return this.readBits(8)},R.readUShort=function(){return this.readBits(16)},R.readUInt=function(){return this.readBits(32)},R.skipScalingList=function(v){var k=8,L=8,D,M;for(D=0;D<v;D++)L!==0&&(M=this.readEG(),L=(k+M+256)%256),k=L===0?k:L},R.readSPS=function(){var v=0,k=0,L=0,D=0,M,V,Y,ie,oe,ne,ve,de=this.readUByte.bind(this),Ee=this.readBits.bind(this),fe=this.readUEG.bind(this),xe=this.readBoolean.bind(this),we=this.skipBits.bind(this),Ve=this.skipEG.bind(this),Qe=this.skipUEG.bind(this),Ke=this.skipScalingList.bind(this);if(de(),M=de(),Ee(5),we(3),de(),Qe(),M===100||M===110||M===122||M===244||M===44||M===83||M===86||M===118||M===128){var st=fe();if(st===3&&we(1),Qe(),Qe(),we(1),xe())for(ne=st!==3?8:12,ve=0;ve<ne;ve++)xe()&&(ve<6?Ke(16):Ke(64))}Qe();var Ze=fe();if(Ze===0)fe();else if(Ze===1)for(we(1),Ve(),Ve(),V=fe(),ve=0;ve<V;ve++)Ve();Qe(),we(1),Y=fe(),ie=fe(),oe=Ee(1),oe===0&&we(1),we(1),xe()&&(v=fe(),k=fe(),L=fe(),D=fe());var We=[1,1];if(xe()&&xe()){var et=de();switch(et){case 1:We=[1,1];break;case 2:We=[12,11];break;case 3:We=[10,11];break;case 4:We=[16,11];break;case 5:We=[40,33];break;case 6:We=[24,11];break;case 7:We=[20,11];break;case 8:We=[32,11];break;case 9:We=[80,33];break;case 10:We=[18,11];break;case 11:We=[15,11];break;case 12:We=[64,33];break;case 13:We=[160,99];break;case 14:We=[4,3];break;case 15:We=[3,2];break;case 16:We=[2,1];break;case 255:{We=[de()<<8|de(),de()<<8|de()];break}}}return{width:Math.ceil((Y+1)*16-v*2-k*2),height:(2-oe)*(ie+1)*16-(oe?2:4)*(L+D),pixelRatio:We}},R.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_}(),Z=ge,q=function(){function _(x,v,k,L){this.decryptdata=k,this.discardEPB=L,this.decrypter=new g.default(x,v,{removePKCS7Padding:!1})}var R=_.prototype;return R.decryptBuffer=function(v,k){this.decrypter.decrypt(v,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,k)},R.decryptAacSample=function(v,k,L,D){var M=v[k].unit,V=M.subarray(16,M.length-M.length%16),Y=V.buffer.slice(V.byteOffset,V.byteOffset+V.length),ie=this;this.decryptBuffer(Y,function(oe){oe=new Uint8Array(oe),M.set(oe,16),D||ie.decryptAacSamples(v,k+1,L)})},R.decryptAacSamples=function(v,k,L){for(;;k++){if(k>=v.length){L();return}if(!(v[k].unit.length<32)){var D=this.decrypter.isSync();if(this.decryptAacSample(v,k,L,D),!D)return}}},R.getAvcEncryptedData=function(v){for(var k=Math.floor((v.length-48)/160)*16+16,L=new Int8Array(k),D=0,M=32;M<=v.length-16;M+=160,D+=16)L.set(v.subarray(M,M+16),D);return L},R.getAvcDecryptedUnit=function(v,k){k=new Uint8Array(k);for(var L=0,D=32;D<=v.length-16;D+=160,L+=16)v.set(k.subarray(L,L+16),D);return v},R.decryptAvcSample=function(v,k,L,D,M,V){var Y=this.discardEPB(M.data),ie=this.getAvcEncryptedData(Y),oe=this;this.decryptBuffer(ie.buffer,function(ne){M.data=oe.getAvcDecryptedUnit(Y,ne),V||oe.decryptAvcSamples(v,k,L+1,D)})},R.decryptAvcSamples=function(v,k,L,D){for(;;k++,L=0){if(k>=v.length){D();return}for(var M=v[k].units;!(L>=M.length);L++){var V=M[L];if(!(V.data.length<=48||V.type!==1&&V.type!==5)){var Y=this.decrypter.isSync();if(this.decryptAvcSample(v,k,L,D,V,Y),!Y)return}}}},_}(),ue=q,Te={video:1,audio:2,id3:3,text:4},me=function(){function _(x,v,k,L){this.observer=x,this.config=k,this.typeSupported=L,this.remuxer=v,this.sampleAes=null,this.pmtUnknownTypes={}}var R=_.prototype;return R.setDecryptData=function(v){v!=null&&v.key!=null&&v.method==="SAMPLE-AES"?this.sampleAes=new ue(this.observer,this.config,v,this.discardEPB):this.sampleAes=null},_.probe=function(v){var k=_._syncOffset(v);return k<0?!1:(k&&m.logger.warn("MPEG2-TS detected but first sync word found @ offset "+k+", junk ahead ?"),!0)},_._syncOffset=function(v){for(var k=Math.min(1e3,v.length-564),L=0;L<k;){if(v[L]===71&&v[L+188]===71&&v[L+2*188]===71)return L;L++}return-1},_.createTrack=function(v,k){return{container:v==="video"||v==="audio"?"video/mp2t":void 0,type:v,id:Te[v],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:v==="video"?0:void 0,isAAC:v==="audio"?!0:void 0,duration:v==="audio"?k:void 0}},R.resetInitSegment=function(v,k,L,D){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=_.createTrack("video",D),this._audioTrack=_.createTrack("audio",D),this._id3Track=_.createTrack("id3",D),this._txtTrack=_.createTrack("text",D),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=k,this.videoCodec=L,this._duration=D},R.resetTimeStamp=function(){},R.append=function(v,k,L,D){var M,V=v.length,Y,ie,oe,ne,ve,de=!1;this.pmtUnknownTypes={},this.contiguous=L;var Ee=this.pmtParsed,fe=this._avcTrack,xe=this._audioTrack,we=this._id3Track,Ve=fe.pid,Qe=xe.pid,Ke=we.pid,st=this._pmtId,Ze=fe.pesData,We=xe.pesData,et=we.pesData,it=this._parsePAT,St=this._parsePMT.bind(this),_t=this._parsePES,ot=this._parseAVCPES.bind(this),It=this._parseAACPES.bind(this),bt=this._parseMPEGPES.bind(this),Dt=this._parseID3PES.bind(this),vt=_._syncOffset(v);for(V-=(V+vt)%188,M=vt;M<V;M+=188)if(v[M]===71){if(Y=!!(v[M+1]&64),ie=((v[M+1]&31)<<8)+v[M+2],oe=(v[M+3]&48)>>4,oe>1){if(ne=M+5+v[M+4],ne===M+188)continue}else ne=M+4;switch(ie){case Ve:Y&&(Ze&&(ve=_t(Ze))&&ot(ve,!1),Ze={data:[],size:0}),Ze&&(Ze.data.push(v.subarray(ne,M+188)),Ze.size+=M+188-ne);break;case Qe:Y&&(We&&(ve=_t(We))&&(xe.isAAC?It(ve):bt(ve)),We={data:[],size:0}),We&&(We.data.push(v.subarray(ne,M+188)),We.size+=M+188-ne);break;case Ke:Y&&(et&&(ve=_t(et))&&Dt(ve),et={data:[],size:0}),et&&(et.data.push(v.subarray(ne,M+188)),et.size+=M+188-ne);break;case 0:Y&&(ne+=v[ne]+1),st=this._pmtId=it(v,ne);break;case st:Y&&(ne+=v[ne]+1);var lt=St(v,ne,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);Ve=lt.avc,Ve>0&&(fe.pid=Ve),Qe=lt.audio,Qe>0&&(xe.pid=Qe,xe.isAAC=lt.isAAC),Ke=lt.id3,Ke>0&&(we.pid=Ke),de&&!Ee&&(m.logger.log("reparse from beginning"),de=!1,M=vt-188),Ee=this.pmtParsed=!0;break;case 17:case 8191:break;default:de=!0;break}}else this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});Ze&&(ve=_t(Ze))?(ot(ve,!0),fe.pesData=null):fe.pesData=Ze,We&&(ve=_t(We))?(xe.isAAC?It(ve):bt(ve),xe.pesData=null):(We&&We.size&&m.logger.log("last AAC PES packet truncated,might overlap between fragments"),xe.pesData=We),et&&(ve=_t(et))?(Dt(ve),we.pesData=null):we.pesData=et,this.sampleAes==null?this.remuxer.remux(xe,fe,we,this._txtTrack,k,L,D):this.decryptAndRemux(xe,fe,we,this._txtTrack,k,L,D)},R.decryptAndRemux=function(v,k,L,D,M,V,Y){if(v.samples&&v.isAAC){var ie=this;this.sampleAes.decryptAacSamples(v.samples,0,function(){ie.decryptAndRemuxAvc(v,k,L,D,M,V,Y)})}else this.decryptAndRemuxAvc(v,k,L,D,M,V,Y)},R.decryptAndRemuxAvc=function(v,k,L,D,M,V,Y){if(k.samples){var ie=this;this.sampleAes.decryptAvcSamples(k.samples,0,0,function(){ie.remuxer.remux(v,k,L,D,M,V,Y)})}else this.remuxer.remux(v,k,L,D,M,V,Y)},R.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},R._parsePAT=function(v,k){return(v[k+10]&31)<<8|v[k+11]},R._trackUnknownPmt=function(v,k,L){var D=this.pmtUnknownTypes[v]||0;return D===0&&(this.pmtUnknownTypes[v]=0,k.call(m.logger,L)),this.pmtUnknownTypes[v]++,D},R._parsePMT=function(v,k,L,D){var M,V,Y,ie,oe={audio:-1,avc:-1,id3:-1,isAAC:!0};for(M=(v[k+1]&15)<<8|v[k+2],V=k+3+M-4,Y=(v[k+10]&15)<<8|v[k+11],k+=12+Y;k<V;){switch(ie=(v[k+1]&31)<<8|v[k+2],v[k]){case 207:if(!D){this._trackUnknownPmt(v[k],m.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:oe.audio===-1&&(oe.audio=ie);break;case 21:oe.id3===-1&&(oe.id3=ie);break;case 219:if(!D){this._trackUnknownPmt(v[k],m.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:oe.avc===-1&&(oe.avc=ie);break;case 3:case 4:L?oe.audio===-1&&(oe.audio=ie,oe.isAAC=!1):this._trackUnknownPmt(v[k],m.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(v[k],m.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(v[k],m.logger.log,"Unknown stream type:"+v[k]);break}k+=((v[k+3]&15)<<8|v[k+4])+5}return oe},R._parsePES=function(v){var k=0,L,D,M,V,Y,ie,oe,ne,ve,de=v.data;if(!v||v.size===0)return null;for(;de[0].length<19&&de.length>1;){var Ee=new Uint8Array(de[0].length+de[1].length);Ee.set(de[0]),Ee.set(de[1],de[0].length),de[0]=Ee,de.splice(1,1)}if(L=de[0],M=(L[0]<<16)+(L[1]<<8)+L[2],M===1){if(V=(L[4]<<8)+L[5],V&&V>v.size-6||(D=L[7],D&192&&(oe=(L[9]&14)*536870912+(L[10]&255)*4194304+(L[11]&254)*16384+(L[12]&255)*128+(L[13]&254)/2,D&64?(ne=(L[14]&14)*536870912+(L[15]&255)*4194304+(L[16]&254)*16384+(L[17]&255)*128+(L[18]&254)/2,oe-ne>60*9e4&&(m.logger.warn(Math.round((oe-ne)/9e4)+"s delta between PTS and DTS, align them"),oe=ne)):ne=oe),Y=L[8],ve=Y+9,v.size<=ve))return null;v.size-=ve,ie=new Uint8Array(v.size);for(var fe=0,xe=de.length;fe<xe;fe++){L=de[fe];var we=L.byteLength;if(ve)if(ve>we){ve-=we;continue}else L=L.subarray(ve),we-=ve,ve=0;ie.set(L,k),k+=we}return V&&(V-=Y+3),{data:ie,pts:oe,dts:ne,len:V}}else return null},R.pushAccesUnit=function(v,k){if(v.units.length&&v.frame){var L=k.samples,D=L.length;if(isNaN(v.pts))if(D){var M=L[D-1];v.pts=M.pts,v.dts=M.dts}else{k.dropped++;return}!this.config.forceKeyFrameOnDiscontinuity||v.key===!0||k.sps&&(D||this.contiguous)?(v.id=D,L.push(v)):k.dropped++}v.debug.length&&m.logger.log(v.pts+"/"+v.dts+":"+v.debug)},R._parseAVCPES=function(v,k){var L=this,D=this._avcTrack,M=this._parseAVCNALu(v.data),V,Y=this.avcSample,ie,oe=!1,ne,ve=this.pushAccesUnit.bind(this),de=function(fe,xe,we,Ve){return{key:fe,pts:xe,dts:we,units:[],debug:Ve}};v.data=null,Y&&M.length&&!D.audFound&&(ve(Y,D),Y=this.avcSample=de(!1,v.pts,v.dts,"")),M.forEach(function(Ee){switch(Ee.type){case 1:ie=!0,Y||(Y=L.avcSample=de(!0,v.pts,v.dts,"")),Y.frame=!0;var fe=Ee.data;if(oe&&fe.length>4){var xe=new Z(fe).readSliceType();(xe===2||xe===4||xe===7||xe===9)&&(Y.key=!0)}break;case 5:ie=!0,Y||(Y=L.avcSample=de(!0,v.pts,v.dts,"")),Y.key=!0,Y.frame=!0;break;case 6:ie=!0,V=new Z(L.discardEPB(Ee.data)),V.readUByte();for(var we=0,Ve=0,Qe=!1,Ke=0;!Qe&&V.bytesAvailable>1;){we=0;do Ke=V.readUByte(),we+=Ke;while(Ke===255);Ve=0;do Ke=V.readUByte(),Ve+=Ke;while(Ke===255);if(we===4&&V.bytesAvailable!==0){Qe=!0;var st=V.readUByte();if(st===181){var Ze=V.readUShort();if(Ze===49){var We=V.readUInt();if(We===1195456820){var et=V.readUByte();if(et===3){var it=V.readUByte(),St=V.readUByte(),_t=31&it,ot=[it,St];for(ne=0;ne<_t;ne++)ot.push(V.readUByte()),ot.push(V.readUByte()),ot.push(V.readUByte());L._insertSampleInOrder(L._txtTrack.samples,{type:3,pts:v.pts,bytes:ot})}}}}}else if(we===5&&V.bytesAvailable!==0){if(Qe=!0,Ve>16){var It=[];for(ne=0;ne<16;ne++)It.push(V.readUByte().toString(16)),(ne===3||ne===5||ne===7||ne===9)&&It.push("-");var bt=Ve-16,Dt=new Uint8Array(bt);for(ne=0;ne<bt;ne++)Dt[ne]=V.readUByte();L._insertSampleInOrder(L._txtTrack.samples,{pts:v.pts,payloadType:we,uuid:It.join(""),userDataBytes:Dt,userData:Object(te.utf8ArrayToStr)(Dt.buffer)})}}else if(Ve<V.bytesAvailable)for(ne=0;ne<Ve;ne++)V.readUByte()}break;case 7:if(ie=!0,oe=!0,!D.sps){V=new Z(Ee.data);var vt=V.readSPS();D.width=vt.width,D.height=vt.height,D.pixelRatio=vt.pixelRatio,D.sps=[Ee.data],D.duration=L._duration;var lt=Ee.data.subarray(1,4),qt="avc1.";for(ne=0;ne<3;ne++){var Zt=lt[ne].toString(16);Zt.length<2&&(Zt="0"+Zt),qt+=Zt}D.codec=qt}break;case 8:ie=!0,D.pps||(D.pps=[Ee.data]);break;case 9:ie=!1,D.audFound=!0,Y&&ve(Y,D),Y=L.avcSample=de(!1,v.pts,v.dts,"");break;case 12:ie=!1;break;default:ie=!1,Y&&(Y.debug+="unknown NAL "+Ee.type+" ");break}if(Y&&ie){var Mt=Y.units;Mt.push(Ee)}}),k&&Y&&(ve(Y,D),this.avcSample=null)},R._insertSampleInOrder=function(v,k){var L=v.length;if(L>0){if(k.pts>=v[L-1].pts)v.push(k);else for(var D=L-1;D>=0;D--)if(k.pts<v[D].pts){v.splice(D,0,k);break}}else v.push(k)},R._getLastNalUnit=function(){var v=this.avcSample,k;if(!v||v.units.length===0){var L=this._avcTrack,D=L.samples;v=D[D.length-1]}if(v){var M=v.units;k=M[M.length-1]}return k},R._parseAVCNALu=function(v){var k=0,L=v.byteLength,D,M,V=this._avcTrack,Y=V.naluState||0,ie=Y,oe=[],ne,ve,de=-1,Ee;for(Y===-1&&(de=0,Ee=v[0]&31,Y=0,k=1);k<L;){if(D=v[k++],!Y){Y=D?0:1;continue}if(Y===1){Y=D?0:2;continue}if(!D)Y=3;else if(D===1){if(de>=0)ne={data:v.subarray(de,k-Y-1),type:Ee},oe.push(ne);else{var fe=this._getLastNalUnit();if(fe&&(ie&&k<=4-ie&&fe.state&&(fe.data=fe.data.subarray(0,fe.data.byteLength-ie)),M=k-Y-1,M>0)){var xe=new Uint8Array(fe.data.byteLength+M);xe.set(fe.data,0),xe.set(v.subarray(0,M),fe.data.byteLength),fe.data=xe}}k<L?(ve=v[k]&31,de=k,Ee=ve,Y=0):Y=-1}else Y=0}if(de>=0&&Y>=0&&(ne={data:v.subarray(de,L),type:Ee,state:Y},oe.push(ne)),oe.length===0){var we=this._getLastNalUnit();if(we){var Ve=new Uint8Array(we.data.byteLength+v.byteLength);Ve.set(we.data,0),Ve.set(v,we.data.byteLength),we.data=Ve}}return V.naluState=Y,oe},R.discardEPB=function(v){for(var k=v.byteLength,L=[],D=1,M,V;D<k-2;)v[D]===0&&v[D+1]===0&&v[D+2]===3?(L.push(D+2),D+=2):D++;if(L.length===0)return v;M=k-L.length,V=new Uint8Array(M);var Y=0;for(D=0;D<M;Y++,D++)Y===L[0]&&(Y++,L.shift()),V[D]=v[Y];return V},R._parseAACPES=function(v){var k=this._audioTrack,L=v.data,D=v.pts,M=0,V=this.aacOverFlow,Y=this.aacLastPTS,ie,oe,ne,ve,de;if(V){var Ee=new Uint8Array(V.byteLength+L.byteLength);Ee.set(V,0),Ee.set(L,V.byteLength),L=Ee}for(ne=M,de=L.length;ne<de-1&&!F(L,ne);ne++);if(ne){var fe,xe;if(ne<de-1?(fe="AAC PES did not start with ADTS header,offset:"+ne,xe=!1):(fe="no ADTS header found in AAC PES",xe=!0),m.logger.warn("parsing error:"+fe),this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:xe,reason:fe}),xe)return}if(X(k,this.observer,L,ne,this.audioCodec),oe=0,ie=$(k.samplerate),V&&Y){var we=Y+ie;Math.abs(we-D)>1&&(m.logger.log("AAC: align PTS for overlapping frames by "+Math.round((we-D)/90)),D=we)}for(;ne<de;)if(F(L,ne)){if(ne+5<de){var Ve=ee(k,L,ne,D,oe);if(Ve){ne+=Ve.length,ve=Ve.sample.pts,oe++;continue}}break}else ne++;ne<de?V=L.subarray(ne,de):V=null,this.aacOverFlow=V,this.aacLastPTS=ve},R._parseMPEGPES=function(v){for(var k=v.data,L=k.length,D=0,M=0,V=v.pts;M<L;)if(z.isHeader(k,M)){var Y=z.appendFrame(this._audioTrack,k,M,V,D);if(Y)M+=Y.length,D++;else break}else M++},R._parseID3PES=function(v){this._id3Track.samples.push(v)},_}(),ye=me,be=function(){function _(x,v,k){this.observer=x,this.config=k,this.remuxer=v}var R=_.prototype;return R.resetInitSegment=function(v,k,L,D){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:k,duration:D,inputTimeScale:9e4}},R.resetTimeStamp=function(){},_.probe=function(v){var k,L,D=te.default.getID3Data(v,0);if(D&&te.default.getTimeStamp(D)!==void 0){for(k=D.length,L=Math.min(v.length-1,k+100);k<L;k++)if(z.probe(v,k))return m.logger.log("MPEG Audio sync word found !"),!0}return!1},R.append=function(v,k,L,D){for(var M=te.default.getID3Data(v,0)||[],V=te.default.getTimeStamp(M),Y=V!==void 0?90*V:k*9e4,ie=M.length,oe=v.length,ne=0,ve=0,de=this._audioTrack,Ee=[{pts:Y,dts:Y,data:M}];ie<oe;)if(z.isHeader(v,ie)){var fe=z.appendFrame(de,v,ie,Y,ne);if(fe)ie+=fe.length,ve=fe.sample.pts,ne++;else break}else te.default.isHeader(v,ie)?(M=te.default.getID3Data(v,ie),Ee.push({pts:ve,dts:ve,data:M}),ie+=M.length):ie++;this.remuxer.remux(de,{samples:[]},{samples:Ee,inputTimeScale:9e4},{samples:[]},k,L,D)},R.destroy=function(){},_}(),Ce=be,De=function(){function _(){}return _.getSilentFrame=function(x,v){switch(x){case"mp4a.40.2":if(v===1)return new Uint8Array([0,200,0,128,35,128]);if(v===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(v===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(v===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(v===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(v===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(v===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(v===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(v===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},_}(),Ie=De,ke=Math.pow(2,32)-1,Ne=function(){function _(){}return _.init=function(){_.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var x;for(x in _.types)_.types.hasOwnProperty(x)&&(_.types[x]=[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]);var v=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),k=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);_.HDLR_TYPES={video:v,audio:k};var L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]);_.STTS=_.STSC=_.STCO=D,_.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),_.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),_.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),_.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var M=new Uint8Array([105,115,111,109]),V=new Uint8Array([97,118,99,49]),Y=new Uint8Array([0,0,0,1]);_.FTYP=_.box(_.types.ftyp,M,Y,M,V),_.DINF=_.box(_.types.dinf,_.box(_.types.dref,L))},_.box=function(x){for(var v=Array.prototype.slice.call(arguments,1),k=8,L=v.length,D=L,M;L--;)k+=v[L].byteLength;for(M=new Uint8Array(k),M[0]=k>>24&255,M[1]=k>>16&255,M[2]=k>>8&255,M[3]=k&255,M.set(x,4),L=0,k=8;L<D;L++)M.set(v[L],k),k+=v[L].byteLength;return M},_.hdlr=function(x){return _.box(_.types.hdlr,_.HDLR_TYPES[x])},_.mdat=function(x){return _.box(_.types.mdat,x)},_.mdhd=function(x,v){v*=x;var k=Math.floor(v/(ke+1)),L=Math.floor(v%(ke+1));return _.box(_.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,x>>24&255,x>>16&255,x>>8&255,x&255,k>>24,k>>16&255,k>>8&255,k&255,L>>24,L>>16&255,L>>8&255,L&255,85,196,0,0]))},_.mdia=function(x){return _.box(_.types.mdia,_.mdhd(x.timescale,x.duration),_.hdlr(x.type),_.minf(x))},_.mfhd=function(x){return _.box(_.types.mfhd,new Uint8Array([0,0,0,0,x>>24,x>>16&255,x>>8&255,x&255]))},_.minf=function(x){return x.type==="audio"?_.box(_.types.minf,_.box(_.types.smhd,_.SMHD),_.DINF,_.stbl(x)):_.box(_.types.minf,_.box(_.types.vmhd,_.VMHD),_.DINF,_.stbl(x))},_.moof=function(x,v,k){return _.box(_.types.moof,_.mfhd(x),_.traf(k,v))},_.moov=function(x){for(var v=x.length,k=[];v--;)k[v]=_.trak(x[v]);return _.box.apply(null,[_.types.moov,_.mvhd(x[0].timescale,x[0].duration)].concat(k).concat(_.mvex(x)))},_.mvex=function(x){for(var v=x.length,k=[];v--;)k[v]=_.trex(x[v]);return _.box.apply(null,[_.types.mvex].concat(k))},_.mvhd=function(x,v){v*=x;var k=Math.floor(v/(ke+1)),L=Math.floor(v%(ke+1)),D=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,x>>24&255,x>>16&255,x>>8&255,x&255,k>>24,k>>16&255,k>>8&255,k&255,L>>24,L>>16&255,L>>8&255,L&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return _.box(_.types.mvhd,D)},_.sdtp=function(x){var v=x.samples||[],k=new Uint8Array(4+v.length),L,D;for(D=0;D<v.length;D++)L=v[D].flags,k[D+4]=L.dependsOn<<4|L.isDependedOn<<2|L.hasRedundancy;return _.box(_.types.sdtp,k)},_.stbl=function(x){return _.box(_.types.stbl,_.stsd(x),_.box(_.types.stts,_.STTS),_.box(_.types.stsc,_.STSC),_.box(_.types.stsz,_.STSZ),_.box(_.types.stco,_.STCO))},_.avc1=function(x){var v=[],k=[],L,D,M;for(L=0;L<x.sps.length;L++)D=x.sps[L],M=D.byteLength,v.push(M>>>8&255),v.push(M&255),v=v.concat(Array.prototype.slice.call(D));for(L=0;L<x.pps.length;L++)D=x.pps[L],M=D.byteLength,k.push(M>>>8&255),k.push(M&255),k=k.concat(Array.prototype.slice.call(D));var V=_.box(_.types.avcC,new Uint8Array([1,v[3],v[4],v[5],255,224|x.sps.length].concat(v).concat([x.pps.length]).concat(k))),Y=x.width,ie=x.height,oe=x.pixelRatio[0],ne=x.pixelRatio[1];return _.box(_.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Y>>8&255,Y&255,ie>>8&255,ie&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),V,_.box(_.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),_.box(_.types.pasp,new Uint8Array([oe>>24,oe>>16&255,oe>>8&255,oe&255,ne>>24,ne>>16&255,ne>>8&255,ne&255])))},_.esds=function(x){var v=x.config.length;return new Uint8Array([0,0,0,0,3,23+v,0,1,0,4,15+v,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([v]).concat(x.config).concat([6,1,2]))},_.mp4a=function(x){var v=x.samplerate;return _.box(_.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,x.channelCount,0,16,0,0,0,0,v>>8&255,v&255,0,0]),_.box(_.types.esds,_.esds(x)))},_.mp3=function(x){var v=x.samplerate;return _.box(_.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,x.channelCount,0,16,0,0,0,0,v>>8&255,v&255,0,0]))},_.stsd=function(x){return x.type==="audio"?!x.isAAC&&x.codec==="mp3"?_.box(_.types.stsd,_.STSD,_.mp3(x)):_.box(_.types.stsd,_.STSD,_.mp4a(x)):_.box(_.types.stsd,_.STSD,_.avc1(x))},_.tkhd=function(x){var v=x.id,k=x.duration*x.timescale,L=x.width,D=x.height,M=Math.floor(k/(ke+1)),V=Math.floor(k%(ke+1));return _.box(_.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,v&255,0,0,0,0,M>>24,M>>16&255,M>>8&255,M&255,V>>24,V>>16&255,V>>8&255,V&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,L>>8&255,L&255,0,0,D>>8&255,D&255,0,0]))},_.traf=function(x,v){var k=_.sdtp(x),L=x.id,D=Math.floor(v/(ke+1)),M=Math.floor(v%(ke+1));return _.box(_.types.traf,_.box(_.types.tfhd,new Uint8Array([0,0,0,0,L>>24,L>>16&255,L>>8&255,L&255])),_.box(_.types.tfdt,new Uint8Array([1,0,0,0,D>>24,D>>16&255,D>>8&255,D&255,M>>24,M>>16&255,M>>8&255,M&255])),_.trun(x,k.length+16+20+8+16+8+8),k)},_.trak=function(x){return x.duration=x.duration||4294967295,_.box(_.types.trak,_.tkhd(x),_.mdia(x))},_.trex=function(x){var v=x.id;return _.box(_.types.trex,new Uint8Array([0,0,0,0,v>>24,v>>16&255,v>>8&255,v&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},_.trun=function(x,v){var k=x.samples||[],L=k.length,D=12+16*L,M=new Uint8Array(D),V,Y,ie,oe,ne,ve;for(v+=8+D,M.set([0,0,15,1,L>>>24&255,L>>>16&255,L>>>8&255,L&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255],0),V=0;V<L;V++)Y=k[V],ie=Y.duration,oe=Y.size,ne=Y.flags,ve=Y.cts,M.set([ie>>>24&255,ie>>>16&255,ie>>>8&255,ie&255,oe>>>24&255,oe>>>16&255,oe>>>8&255,oe&255,ne.isLeading<<2|ne.dependsOn,ne.isDependedOn<<6|ne.hasRedundancy<<4|ne.paddingValue<<1|ne.isNonSync,ne.degradPrio&61440,ne.degradPrio&15,ve>>>24&255,ve>>>16&255,ve>>>8&255,ve&255],12+16*V);return _.box(_.types.trun,M)},_.initSegment=function(x){_.types||_.init();var v=_.moov(x),k;return k=new Uint8Array(_.FTYP.byteLength+v.byteLength),k.set(_.FTYP),k.set(v,_.FTYP.byteLength),k},_}(),qe=Ne,pt=9e4;function ut(_,R,x,v){x===void 0&&(x=1),v===void 0&&(v=!1);var k=_*R*x;return v?Math.round(k):k}function Me(_,R){return R===void 0&&(R=!1),ut(_,1e3,1/pt,R)}function rt(_,R){return R===void 0&&(R=1),ut(_,pt,1/R)}var ht=rt(10),ct=rt(.2),xt=null,Lt=function(){function _(x,v,k,L){if(this.observer=x,this.config=v,this.typeSupported=k,this.ISGenerated=!1,xt===null){var D=navigator.userAgent.match(/Chrome\/(\d+)/i);xt=D?parseInt(D[1]):0}}var R=_.prototype;return R.destroy=function(){},R.resetTimeStamp=function(v){this._initPTS=this._initDTS=v},R.resetInitSegment=function(){this.ISGenerated=!1},R.getVideoStartPts=function(v){var k=!1,L=v.reduce(function(D,M){var V=M.pts-D;return V<-4294967296?(k=!0,B(D,M.pts)):V>0?D:M.pts},v[0].pts);return k&&m.logger.debug("PTS rollover detected"),L},R.remux=function(v,k,L,D,M,V,Y){if(this.ISGenerated||this.generateIS(v,k,M),this.ISGenerated){var ie=v.samples.length,oe=k.samples.length,ne=M,ve=M;if(ie&&oe){var de=this.getVideoStartPts(k.samples),Ee=B(v.samples[0].pts,de)-de,fe=Ee/k.inputTimeScale;ne+=Math.max(0,fe),ve+=Math.max(0,-fe)}if(ie){v.timescale||(m.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(v,k,M));var xe=this.remuxAudio(v,ne,V,Y);if(oe){var we;xe&&(we=xe.endPTS-xe.startPTS),k.timescale||(m.logger.warn("regenerate InitSegment as video detected"),this.generateIS(v,k,M)),this.remuxVideo(k,ve,V,we)}}else if(oe){var Ve=this.remuxVideo(k,ve,V,0,Y);Ve&&v.codec&&this.remuxEmptyAudio(v,ne,V,Ve)}}L.samples.length&&this.remuxID3(L,M),D.samples.length&&this.remuxText(D,M),this.observer.trigger(l.default.FRAG_PARSED)},R.generateIS=function(v,k,L){var D=this.observer,M=v.samples,V=k.samples,Y=this.typeSupported,ie="audio/mp4",oe={},ne={tracks:oe},ve=this._initPTS===void 0,de,Ee;if(ve&&(de=Ee=1/0),v.config&&M.length&&(v.timescale=v.samplerate,m.logger.log("audio sampling rate : "+v.samplerate),v.isAAC||(Y.mpeg?(ie="audio/mpeg",v.codec=""):Y.mp3&&(v.codec="mp3")),oe.audio={container:ie,codec:v.codec,initSegment:!v.isAAC&&Y.mpeg?new Uint8Array:qe.initSegment([v]),metadata:{channelCount:v.channelCount}},ve&&(de=Ee=M[0].pts-Math.round(v.inputTimeScale*L))),k.sps&&k.pps&&V.length){var fe=k.inputTimeScale;if(k.timescale=fe,oe.video={container:"video/mp4",codec:k.codec,initSegment:qe.initSegment([k]),metadata:{width:k.width,height:k.height}},ve){var xe=this.getVideoStartPts(V),we=Math.round(fe*L);Ee=Math.min(Ee,B(V[0].dts,xe)-we),de=Math.min(de,xe-we),this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:de})}}else ve&&oe.audio&&this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:de});Object.keys(oe).length?(D.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,ne),this.ISGenerated=!0,ve&&(this._initPTS=de,this._initDTS=Ee)):D.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},R.remuxVideo=function(v,k,L,D){var M=v.timescale,V=v.samples,Y=[],ie=V.length,oe=this._initPTS,ne=8,ve,de,Ee,fe,xe,we=Number.POSITIVE_INFINITY,Ve=Number.NEGATIVE_INFINITY,Qe=0,Ke=!1,st=this.nextAvcDts;if(ie!==0){if(!L){var Ze=k*M,We=V[0].pts-B(V[0].dts,V[0].pts);st=Ze-We}for(var et=0;et<ie;et++){var it=V[et];it.pts=B(it.pts-oe,st),it.dts=B(it.dts-oe,st),it.dts>it.pts&&(Qe=Math.max(Math.min(Qe,it.pts-it.dts),-1*ct)),it.dts<V[et>0?et-1:et].dts&&(Ke=!0)}Ke&&V.sort(function(ai,Ri){var jn=ai.dts-Ri.dts,Yn=ai.pts-Ri.pts;return jn||Yn||ai.id-Ri.id}),fe=V[0].dts,xe=V[ie-1].dts;var St=Math.round((xe-fe)/(ie-1));if(Qe<0){if(Qe<St*-2){m.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Me(-St,!0)+" ms");for(var _t=Qe,ot=0;ot<ie;ot++)V[ot].dts=_t=Math.max(_t,V[ot].pts-St),V[ot].pts=Math.max(_t,V[ot].pts)}else{m.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Me(Qe,!0)+" ms to overcome this issue");for(var It=0;It<ie;It++)V[It].dts=V[It].dts+Qe}fe=V[0].dts,xe=V[ie-1].dts}if(L){var bt=fe-st,Dt=bt>St,vt=bt<-1;if(Dt||vt){Dt?m.logger.warn("AVC: "+Me(bt,!0)+" ms ("+bt+"dts) hole between fragments detected, filling it"):m.logger.warn("AVC: "+Me(-bt,!0)+" ms ("+bt+"dts) overlapping between fragments detected"),fe=st;var lt=V[0].pts-bt;V[0].dts=fe,V[0].pts=lt,m.logger.log("Video: First PTS/DTS adjusted: "+Me(lt,!0)+"/"+Me(fe,!0)+", delta: "+Me(bt,!0)+" ms")}}xt&&xt<75&&(fe=Math.max(0,fe));for(var qt=0,Zt=0,Mt=0;Mt<ie;Mt++){for(var kt=V[Mt],zt=kt.units,Qt=zt.length,lr=0,Mr=0;Mr<Qt;Mr++)lr+=zt[Mr].data.length;Zt+=lr,qt+=Qt,kt.length=lr,kt.dts=Math.max(kt.dts,fe),kt.pts=Math.max(kt.pts,kt.dts,0),we=Math.min(kt.pts,we),Ve=Math.max(kt.pts,Ve)}xe=V[ie-1].dts;var ur=Zt+4*qt+8;try{de=new Uint8Array(ur)}catch{this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MUX_ERROR,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ur,reason:"fail allocating video mdat "+ur});return}var Br=new DataView(de.buffer);Br.setUint32(0,ur),de.set(qe.types.mdat,4);for(var ae=0;ae<ie;ae++){for(var Nt=V[ae],Tr=Nt.units,Ur=0,Jt=void 0,Si=0,Gn=Tr.length;Si<Gn;Si++){var qi=Tr[Si],Zi=qi.data,ki=qi.data.byteLength;Br.setUint32(ne,ki),ne+=4,de.set(Zi,ne),ne+=ki,Ur+=4+ki}if(ae<ie-1)ve=V[ae+1].dts-Nt.dts;else{var Qi=this.config,Vr=Nt.dts-V[ae>0?ae-1:ae].dts;if(Qi.stretchShortVideoTrack){var Hn=Qi.maxBufferHole,Ci=Math.floor(Hn*M),ni=(D?we+D*M:this.nextAudioPts)-Nt.pts;ni>Ci?(ve=ni-Vr,ve<0&&(ve=Vr),m.logger.log("It is approximately "+Me(ni,!1)+" ms to the next segment; using duration "+Me(ve,!1)+" ms for the last video frame.")):ve=Vr}else ve=Vr}Jt=Math.round(Nt.pts-Nt.dts),Y.push({size:Ur,duration:ve,cts:Jt,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Nt.key?2:1,isNonSync:Nt.key?0:1}})}this.nextAvcDts=xe+ve;var Kr=v.dropped;if(v.nbNalu=0,v.dropped=0,Y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Ji=Y[0].flags;Ji.dependsOn=2,Ji.isNonSync=0}v.samples=Y,Ee=qe.moof(v.sequenceNumber++,fe,v),v.samples=[];var en={data1:Ee,data2:de,startPTS:we/M,endPTS:(Ve+ve)/M,startDTS:fe/M,endDTS:this.nextAvcDts/M,type:"video",hasAudio:!1,hasVideo:!0,nb:Y.length,dropped:Kr};return this.observer.trigger(l.default.FRAG_PARSING_DATA,en),en}},R.remuxAudio=function(v,k,L,D){var M=v.inputTimeScale,V=v.timescale,Y=M/V,ie=v.isAAC?1024:1152,oe=ie*Y,ne=this._initPTS,ve=!v.isAAC&&this.typeSupported.mpeg,de,Ee,fe,xe,we,Ve,Qe=ve?0:8,Ke=v.samples,st=[],Ze=this.nextAudioPts;if(L|=Ke.length&&Ze&&(D&&Math.abs(k-Ze/M)<.1||Math.abs(Ke[0].pts-Ze-ne)<20*oe),Ke.forEach(function(Jt){Jt.pts=Jt.dts=B(Jt.pts-ne,k*M)}),Ke=Ke.filter(function(Jt){return Jt.pts>=0}),Ke.length!==0){if(L||(D?Ze=Math.max(0,k*M):Ze=Ke[0].pts),v.isAAC)for(var We=this.config.maxAudioFramesDrift,et=0,it=Ze;et<Ke.length;){var St=Ke[et],_t=St.pts,ot=_t-it;if(ot<=-We*oe)L||et>0?(m.logger.warn("Dropping 1 audio frame @ "+Me(it,!0)/1e3+"s due to "+Me(ot,!0)+" ms overlap."),Ke.splice(et,1)):(m.logger.warn("Audio frame @ "+Me(_t,!0)/1e3+"s overlaps nextAudioPts by "+Me(ot,!0)+" ms."),it=_t+oe,et++);else if(ot>=We*oe&&ot<ht&&it){var It=Math.round(ot/oe);m.logger.warn("Injecting "+It+" audio frames @ "+Me(it,!0)/1e3+"s due to "+Me(ot,!0)+" ms gap.");for(var bt=0;bt<It;bt++){var Dt=Math.max(it,0);Ee=Ie.getSilentFrame(v.manifestCodec||v.codec,v.channelCount),Ee||(m.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Ee=St.unit.subarray()),Ke.splice(et,0,{unit:Ee,pts:Dt,dts:Dt}),it+=oe,et++}St.pts=St.dts=it,it+=oe,et++}else St.pts=St.dts=it,it+=oe,et++}for(var vt=Ke.length,lt=0;vt--;)lt+=Ke[vt].unit.byteLength;for(var qt=0,Zt=Ke.length;qt<Zt;qt++){var Mt=Ke[qt],kt=Mt.unit,zt=Mt.pts;if(Ve!==void 0&&de)de.duration=Math.round((zt-Ve)/Y);else{var Qt=zt-Ze,lr=0;if(L&&v.isAAC&&Qt){if(Qt>0&&Qt<ht)lr=Math.round((zt-Ze)/oe),m.logger.log(Me(Qt,!0)+" ms hole between AAC samples detected,filling it"),lr>0&&(Ee=Ie.getSilentFrame(v.manifestCodec||v.codec,v.channelCount),Ee||(Ee=kt.subarray()),lt+=lr*Ee.length);else if(Qt<-12){m.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+Me(Ze,!0)+" ms / "+Me(zt,!0)+" ms / "+Me(-Qt,!0)+" ms"),lt-=kt.byteLength;continue}zt=Ze}if(we=zt,lt>0){lt+=Qe;try{fe=new Uint8Array(lt)}catch{this.observer.trigger(l.default.ERROR,{type:f.ErrorTypes.MUX_ERROR,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:lt,reason:"fail allocating audio mdat "+lt});return}if(!ve){var Mr=new DataView(fe.buffer);Mr.setUint32(0,lt),fe.set(qe.types.mdat,4)}}else return;for(var ur=0;ur<lr;ur++)Ee=Ie.getSilentFrame(v.manifestCodec||v.codec,v.channelCount),Ee||(m.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),Ee=kt.subarray()),fe.set(Ee,Qe),Qe+=Ee.byteLength,de={size:Ee.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},st.push(de)}fe.set(kt,Qe);var Br=kt.byteLength;Qe+=Br,de={size:Br,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},st.push(de),Ve=zt}var ae=0;if(vt=st.length,vt>=2&&(ae=st[vt-2].duration,de.duration=ae),vt){this.nextAudioPts=Ze=Ve+Y*ae,v.samples=st,ve?xe=new Uint8Array:xe=qe.moof(v.sequenceNumber++,we/Y,v),v.samples=[];var Nt=we/M,Tr=Ze/M,Ur={data1:xe,data2:fe,startPTS:Nt,endPTS:Tr,startDTS:Nt,endDTS:Tr,type:"audio",hasAudio:!0,hasVideo:!1,nb:vt};return this.observer.trigger(l.default.FRAG_PARSING_DATA,Ur),Ur}return null}},R.remuxEmptyAudio=function(v,k,L,D){var M=v.inputTimeScale,V=v.samplerate?v.samplerate:M,Y=M/V,ie=this.nextAudioPts,oe=(ie!==void 0?ie:D.startDTS*M)+this._initDTS,ne=D.endDTS*M+this._initDTS,ve=1024,de=Y*ve,Ee=Math.ceil((ne-oe)/de),fe=Ie.getSilentFrame(v.manifestCodec||v.codec,v.channelCount);if(m.logger.warn("remux empty Audio"),!fe){m.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var xe=[],we=0;we<Ee;we++){var Ve=oe+we*de;xe.push({unit:fe,pts:Ve,dts:Ve})}v.samples=xe,this.remuxAudio(v,k,L)},R.remuxID3=function(v,k){var L=v.samples.length;if(L){for(var D=v.inputTimeScale,M=this._initPTS,V=this._initDTS,Y=0;Y<L;Y++){var ie=v.samples[Y];ie.pts=B(ie.pts-M,k*D)/D,ie.dts=B(ie.dts-V,k*D)/D}this.observer.trigger(l.default.FRAG_PARSING_METADATA,{samples:v.samples}),v.samples=[]}},R.remuxText=function(v,k){var L=v.samples.length,D=v.inputTimeScale,M=this._initPTS;if(L){for(var V=0;V<L;V++){var Y=v.samples[V];Y.pts=B(Y.pts-M,k*D)/D}v.samples.sort(function(ie,oe){return ie.pts-oe.pts}),this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{samples:v.samples})}v.samples=[]},_}();function B(_,R){var x;if(R===void 0)return _;for(R<_?x=-8589934592:x=8589934592;Math.abs(_-R)>4294967296;)_+=x;return _}var H=Lt,Q=function(){function _(x){this.observer=x}var R=_.prototype;return R.destroy=function(){},R.resetTimeStamp=function(){},R.resetInitSegment=function(){},R.remux=function(v,k,L,D,M,V,Y,ie){var oe=this.observer,ne="";v&&(ne+="audio"),k&&(ne+="video"),oe.trigger(l.default.FRAG_PARSING_DATA,{data1:ie,startPTS:M,startDTS:M,type:ne,hasAudio:!!v,hasVideo:!!k,nb:1,dropped:0}),oe.trigger(l.default.FRAG_PARSED)},_}(),ce=Q,le=Object(y.getSelfScope)(),A;try{A=le.performance.now.bind(le.performance)}catch{m.logger.debug("Unable to use Performance API on this environment"),A=le.Date.now}var N=function(){function _(x,v,k,L){this.observer=x,this.typeSupported=v,this.config=k,this.vendor=L}var R=_.prototype;return R.destroy=function(){var v=this.demuxer;v&&v.destroy()},R.push=function(v,k,L,D,M,V,Y,ie,oe,ne,ve,de){var Ee=this;if(v.byteLength>0&&k!=null&&k.key!=null&&k.method==="AES-128"){var fe=this.decrypter;fe==null&&(fe=this.decrypter=new g.default(this.observer,this.config));var xe=A();fe.decrypt(v,k.key.buffer,k.iv.buffer,function(we){var Ve=A();Ee.observer.trigger(l.default.FRAG_DECRYPTED,{stats:{tstart:xe,tdecrypt:Ve}}),Ee.pushDecrypted(new Uint8Array(we),k,new Uint8Array(L),D,M,V,Y,ie,oe,ne,ve,de)})}else this.pushDecrypted(new Uint8Array(v),k,new Uint8Array(L),D,M,V,Y,ie,oe,ne,ve,de)},R.pushDecrypted=function(v,k,L,D,M,V,Y,ie,oe,ne,ve,de){var Ee=this.demuxer,fe=this.remuxer;if(!Ee||Y||ie){for(var xe=this.observer,we=this.typeSupported,Ve=this.config,Qe=[{demux:ye,remux:H},{demux:_e.default,remux:ce},{demux:pe,remux:H},{demux:Ce,remux:H}],Ke,st=0,Ze=Qe.length;st<Ze&&(Ke=Qe[st],!Ke.demux.probe(v));st++);if(!Ke){xe.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}(!fe||!(fe instanceof Ke.remux))&&(fe=new Ke.remux(xe,Ve,we,this.vendor)),(!Ee||!(Ee instanceof Ke.demux))&&(Ee=new Ke.demux(xe,fe,Ve,we),this.probe=Ke.demux.probe),this.demuxer=Ee,this.remuxer=fe}(Y||ie)&&(Ee.resetInitSegment(L,D,M,ne),fe.resetInitSegment()),Y&&(Ee.resetTimeStamp(de),fe.resetTimeStamp(de)),typeof Ee.setDecryptData=="function"&&Ee.setDecryptData(k),Ee.append(v,V,oe,ve)},_}();i.default=N},"./src/demux/demuxer-worker.js":function(a,i,r){r.r(i);var l=r("./src/demux/demuxer-inline.js"),f=r("./src/events.js"),g=r("./src/utils/logger.js"),T=r("./node_modules/eventemitter3/index.js"),m=function(U){var w=new T.EventEmitter;w.trigger=function(F){for(var j=arguments.length,X=new Array(j>1?j-1:0),$=1;$<j;$++)X[$-1]=arguments[$];w.emit.apply(w,[F,F].concat(X))},w.off=function(F){for(var j=arguments.length,X=new Array(j>1?j-1:0),$=1;$<j;$++)X[$-1]=arguments[$];w.removeListener.apply(w,[F].concat(X))};var I=function(F,j){U.postMessage({event:F,data:j})};U.addEventListener("message",function(K){var F=K.data;switch(F.cmd){case"init":var j=JSON.parse(F.config);U.demuxer=new l.default(w,F.typeSupported,j,F.vendor),Object(g.enableLogs)(j.debug),I("init",null);break;case"demux":U.demuxer.push(F.data,F.decryptdata,F.initSegment,F.audioCodec,F.videoCodec,F.timeOffset,F.discontinuity,F.trackSwitch,F.contiguous,F.duration,F.accurateTimeOffset,F.defaultInitPTS);break}}),w.on(f.default.FRAG_DECRYPTED,I),w.on(f.default.FRAG_PARSING_INIT_SEGMENT,I),w.on(f.default.FRAG_PARSED,I),w.on(f.default.ERROR,I),w.on(f.default.FRAG_PARSING_METADATA,I),w.on(f.default.FRAG_PARSING_USERDATA,I),w.on(f.default.INIT_PTS_FOUND,I),w.on(f.default.FRAG_PARSING_DATA,function(K,F){var j=[],X={event:K,data:F};F.data1&&(X.data1=F.data1.buffer,j.push(F.data1.buffer),delete F.data1),F.data2&&(X.data2=F.data2.buffer,j.push(F.data2.buffer),delete F.data2),U.postMessage(X,j)})};i.default=m},"./src/demux/id3.js":function(a,i,r){r.r(i),r.d(i,"utf8ArrayToStr",function(){return m});var l=r("./src/utils/get-self-scope.js"),f=function(){function y(){}return y.isHeader=function(w,I){return I+10<=w.length&&w[I]===73&&w[I+1]===68&&w[I+2]===51&&w[I+3]<255&&w[I+4]<255&&w[I+6]<128&&w[I+7]<128&&w[I+8]<128&&w[I+9]<128},y.isFooter=function(w,I){return I+10<=w.length&&w[I]===51&&w[I+1]===68&&w[I+2]===73&&w[I+3]<255&&w[I+4]<255&&w[I+6]<128&&w[I+7]<128&&w[I+8]<128&&w[I+9]<128},y.getID3Data=function(w,I){for(var K=I,F=0;y.isHeader(w,I);){F+=10;var j=y._readSize(w,I+6);F+=j,y.isFooter(w,I+10)&&(F+=10),I+=F}if(F>0)return w.subarray(K,K+F)},y._readSize=function(w,I){var K=0;return K=(w[I]&127)<<21,K|=(w[I+1]&127)<<14,K|=(w[I+2]&127)<<7,K|=w[I+3]&127,K},y.getTimeStamp=function(w){for(var I=y.getID3Frames(w),K=0;K<I.length;K++){var F=I[K];if(y.isTimeStampFrame(F))return y._readTimeStamp(F)}},y.isTimeStampFrame=function(w){return w&&w.key==="PRIV"&&w.info==="com.apple.streaming.transportStreamTimestamp"},y._getFrameData=function(w){var I=String.fromCharCode(w[0],w[1],w[2],w[3]),K=y._readSize(w,4),F=10;return{type:I,size:K,data:w.subarray(F,F+K)}},y.getID3Frames=function(w){for(var I=0,K=[];y.isHeader(w,I);){var F=y._readSize(w,I+6);I+=10;for(var j=I+F;I+8<j;){var X=y._getFrameData(w.subarray(I)),$=y._decodeFrame(X);$&&K.push($),I+=X.size+10}y.isFooter(w,I)&&(I+=10)}return K},y._decodeFrame=function(w){return w.type==="PRIV"?y._decodePrivFrame(w):w.type[0]==="W"?y._decodeURLFrame(w):y._decodeTextFrame(w)},y._readTimeStamp=function(w){if(w.data.byteLength===8){var I=new Uint8Array(w.data),K=I[3]&1,F=(I[4]<<23)+(I[5]<<15)+(I[6]<<7)+I[7];return F/=45,K&&(F+=4772185884e-2),Math.round(F)}},y._decodePrivFrame=function(w){if(!(w.size<2)){var I=y._utf8ArrayToStr(w.data,!0),K=new Uint8Array(w.data.subarray(I.length+1));return{key:w.type,info:I,data:K.buffer}}},y._decodeTextFrame=function(w){if(!(w.size<2))if(w.type==="TXXX"){var I=1,K=y._utf8ArrayToStr(w.data.subarray(I),!0);I+=K.length+1;var F=y._utf8ArrayToStr(w.data.subarray(I));return{key:w.type,info:K,data:F}}else{var j=y._utf8ArrayToStr(w.data.subarray(1));return{key:w.type,data:j}}},y._decodeURLFrame=function(w){if(w.type==="WXXX"){if(w.size<2)return;var I=1,K=y._utf8ArrayToStr(w.data.subarray(I),!0);I+=K.length+1;var F=y._utf8ArrayToStr(w.data.subarray(I));return{key:w.type,info:K,data:F}}else{var j=y._utf8ArrayToStr(w.data);return{key:w.type,data:j}}},y._utf8ArrayToStr=function(w,I){I===void 0&&(I=!1);var K=T();if(K){var F=K.decode(w);if(I){var j=F.indexOf("\0");return j!==-1?F.substring(0,j):F}return F.replace(/\0/g,"")}for(var X=w.length,$,re,ee,te="",se=0;se<X;){if($=w[se++],$===0&&I)return te;if($===0||$===3)continue;switch($>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:te+=String.fromCharCode($);break;case 12:case 13:re=w[se++],te+=String.fromCharCode(($&31)<<6|re&63);break;case 14:re=w[se++],ee=w[se++],te+=String.fromCharCode(($&15)<<12|(re&63)<<6|(ee&63)<<0);break}}return te},y}(),g;function T(){var y=Object(l.getSelfScope)();return!g&&typeof y.TextDecoder<"u"&&(g=new y.TextDecoder("utf-8")),g}var m=f._utf8ArrayToStr;i.default=f},"./src/demux/mp4demuxer.js":function(a,i,r){r.r(i);var l=r("./src/utils/logger.js"),f=r("./src/events.js"),g=Math.pow(2,32)-1,T=function(){function m(U,w){this.observer=U,this.remuxer=w}var y=m.prototype;return y.resetTimeStamp=function(w){this.initPTS=w},y.resetInitSegment=function(w,I,K,F){if(w&&w.byteLength){var j=this.initData=m.parseInitSegment(w);I==null&&(I="mp4a.40.5"),K==null&&(K="avc1.42e01e");var X={};j.audio&&j.video?X.audiovideo={container:"video/mp4",codec:I+","+K,initSegment:F?w:null}:(j.audio&&(X.audio={container:"audio/mp4",codec:I,initSegment:F?w:null}),j.video&&(X.video={container:"video/mp4",codec:K,initSegment:F?w:null})),this.observer.trigger(f.default.FRAG_PARSING_INIT_SEGMENT,{tracks:X})}else I&&(this.audioCodec=I),K&&(this.videoCodec=K)},m.probe=function(w){return m.findBox({data:w,start:0,end:Math.min(w.length,16384)},["moof"]).length>0},m.bin2str=function(w){return String.fromCharCode.apply(null,w)},m.readUint16=function(w,I){w.data&&(I+=w.start,w=w.data);var K=w[I]<<8|w[I+1];return K<0?65536+K:K},m.readUint32=function(w,I){w.data&&(I+=w.start,w=w.data);var K=w[I]<<24|w[I+1]<<16|w[I+2]<<8|w[I+3];return K<0?4294967296+K:K},m.writeUint32=function(w,I,K){w.data&&(I+=w.start,w=w.data),w[I]=K>>24,w[I+1]=K>>16&255,w[I+2]=K>>8&255,w[I+3]=K&255},m.findBox=function(w,I){var K=[],F,j,X,$,re,ee,te;if(w.data?(ee=w.start,$=w.end,w=w.data):(ee=0,$=w.byteLength),!I.length)return null;for(F=ee;F<$;)j=m.readUint32(w,F),X=m.bin2str(w.subarray(F+4,F+8)),te=j>1?F+j:$,X===I[0]&&(I.length===1?K.push({data:w,start:F+8,end:te}):(re=m.findBox({data:w,start:F+8,end:te},I.slice(1)),re.length&&(K=K.concat(re)))),F=te;return K},m.parseSegmentIndex=function(w){var I=m.findBox(w,["moov"])[0],K=I?I.end:null,F=0,j=m.findBox(w,["sidx"]),X;if(!j||!j[0])return null;X=[],j=j[0];var $=j.data[0];F=$===0?8:16;var re=m.readUint32(j,F);F+=4;var ee=0,te=0;$===0?F+=8:F+=16,F+=2;var se=j.end+te,pe=m.readUint16(j,F);F+=2;for(var _e=0;_e<pe;_e++){var W=F,z=m.readUint32(j,W);W+=4;var ge=z&2147483647,Z=(z&2147483648)>>>31;if(Z===1){console.warn("SIDX has hierarchical references (not supported)");return}var q=m.readUint32(j,W);W+=4,X.push({referenceSize:ge,subsegmentDuration:q,info:{duration:q/re,start:se,end:se+ge-1}}),se+=ge,W+=4,F=W}return{earliestPresentationTime:ee,timescale:re,version:$,referencesCount:pe,references:X,moovEndOffset:K}},m.parseInitSegment=function(w){var I=[],K=m.findBox(w,["moov","trak"]);return K.forEach(function(F){var j=m.findBox(F,["tkhd"])[0];if(j){var X=j.data[j.start],$=X===0?12:20,re=m.readUint32(j,$),ee=m.findBox(F,["mdia","mdhd"])[0];if(ee){X=ee.data[ee.start],$=X===0?12:20;var te=m.readUint32(ee,$),se=m.findBox(F,["mdia","hdlr"])[0];if(se){var pe=m.bin2str(se.data.subarray(se.start+8,se.start+12)),_e={soun:"audio",vide:"video"}[pe];if(_e){var W=m.findBox(F,["mdia","minf","stbl","stsd"]);if(W.length){W=W[0];var z=m.bin2str(W.data.subarray(W.start+12,W.start+16));l.logger.log("MP4Demuxer:"+_e+":"+z+" found")}I[re]={timescale:te,type:_e},I[_e]={timescale:te,id:re}}}}}}),I},m.getStartDTS=function(w,I){var K,F,j;return K=m.findBox(I,["moof","traf"]),F=[].concat.apply([],K.map(function(X){return m.findBox(X,["tfhd"]).map(function($){var re,ee,te;return re=m.readUint32($,4),ee=w[re].timescale||9e4,te=m.findBox(X,["tfdt"]).map(function(se){var pe,_e;return pe=se.data[se.start],_e=m.readUint32(se,4),pe===1&&(_e*=Math.pow(2,32),_e+=m.readUint32(se,8)),_e})[0],te/ee})})),j=Math.min.apply(null,F),isFinite(j)?j:0},m.offsetStartDTS=function(w,I,K){m.findBox(I,["moof","traf"]).map(function(F){return m.findBox(F,["tfhd"]).map(function(j){var X=m.readUint32(j,4),$=w[X].timescale||9e4;m.findBox(F,["tfdt"]).map(function(re){var ee=re.data[re.start],te=m.readUint32(re,4);if(ee===0)m.writeUint32(re,4,te-K*$);else{te*=Math.pow(2,32),te+=m.readUint32(re,8),te-=K*$,te=Math.max(te,0);var se=Math.floor(te/(g+1)),pe=Math.floor(te%(g+1));m.writeUint32(re,4,se),m.writeUint32(re,8,pe)}})})})},y.append=function(w,I,K,F){var j=this.initData;j||(this.resetInitSegment(w,this.audioCodec,this.videoCodec,!1),j=this.initData);var X,$=this.initPTS;if($===void 0){var re=m.getStartDTS(j,w);this.initPTS=$=re-I,this.observer.trigger(f.default.INIT_PTS_FOUND,{initPTS:$})}m.offsetStartDTS(j,w,$),X=m.getStartDTS(j,w),this.remuxer.remux(j.audio,j.video,null,null,X,K,F,w)},y.destroy=function(){},m}();i.default=T},"./src/errors.ts":function(a,i,r){r.r(i),r.d(i,"ErrorTypes",function(){return l}),r.d(i,"ErrorDetails",function(){return f});var l;(function(g){g.NETWORK_ERROR="networkError",g.MEDIA_ERROR="mediaError",g.KEY_SYSTEM_ERROR="keySystemError",g.MUX_ERROR="muxError",g.OTHER_ERROR="otherError"})(l||(l={}));var f;(function(g){g.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",g.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",g.KEY_SYSTEM_NO_SESSION="keySystemNoSession",g.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",g.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",g.MANIFEST_LOAD_ERROR="manifestLoadError",g.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",g.MANIFEST_PARSING_ERROR="manifestParsingError",g.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",g.LEVEL_EMPTY_ERROR="levelEmptyError",g.LEVEL_LOAD_ERROR="levelLoadError",g.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",g.LEVEL_SWITCH_ERROR="levelSwitchError",g.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",g.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",g.FRAG_LOAD_ERROR="fragLoadError",g.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",g.FRAG_DECRYPT_ERROR="fragDecryptError",g.FRAG_PARSING_ERROR="fragParsingError",g.REMUX_ALLOC_ERROR="remuxAllocError",g.KEY_LOAD_ERROR="keyLoadError",g.KEY_LOAD_TIMEOUT="keyLoadTimeOut",g.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",g.BUFFER_APPEND_ERROR="bufferAppendError",g.BUFFER_APPENDING_ERROR="bufferAppendingError",g.BUFFER_STALLED_ERROR="bufferStalledError",g.BUFFER_FULL_ERROR="bufferFullError",g.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",g.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",g.INTERNAL_EXCEPTION="internalException"})(f||(f={}))},"./src/events.js":function(a,i,r){r.r(i);var l={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};i.default=l},"./src/hls.ts":function(a,i,r){r.r(i),r.d(i,"default",function(){return Os});var l={};r.r(l),r.d(l,"newCue",function(){return Bu});var f=r("./node_modules/url-toolkit/src/url-toolkit.js"),g=r("./src/errors.ts"),T=r("./src/polyfills/number.js"),m=r("./src/events.js"),y=r("./src/utils/logger.js"),U={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},w=function(){function p(u){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=u,this.onEvent=this.onEvent.bind(this);for(var o=arguments.length,t=new Array(o>1?o-1:0),s=1;s<o;s++)t[s-1]=arguments[s];this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}var d=p.prototype;return d.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},d.onHandlerDestroying=function(){},d.onHandlerDestroyed=function(){},d.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},d.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(o){if(U[o])throw new Error("Forbidden event-name: "+o);this.hls.on(o,this.onEvent)},this)},d.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(o){this.hls.off(o,this.onEvent)},this)},d.onEvent=function(o,t){this.onEventGeneric(o,t)},d.onEventGeneric=function(o,t){var s=function(h,E){var b="on"+h.replace("hls","");if(typeof this[b]!="function")throw new Error("Event "+h+" has no generic handler in this "+this.constructor.name+" class (tried "+b+")");return this[b].bind(this,E)};try{s.call(this,o,t).call()}catch(c){y.logger.error("An internal error happened while handling event "+o+'. Error message: "'+c.message+'". Here is a stacktrace:',c),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:o,err:c})}},p}(),I=w,K;(function(p){p.MANIFEST="manifest",p.LEVEL="level",p.AUDIO_TRACK="audioTrack",p.SUBTITLE_TRACK="subtitleTrack"})(K||(K={}));var F;(function(p){p.MAIN="main",p.AUDIO="audio",p.SUBTITLE="subtitle"})(F||(F={}));var j=r("./src/demux/mp4demuxer.js");function X(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function $(p,d,u){return d&&X(p.prototype,d),u&&X(p,u),p}var re=function(){function p(d,u){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=d,this.reluri=u}return $(p,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(f.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),p}();function ee(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function te(p,d,u){return d&&ee(p.prototype,d),u&&ee(p,u),p}var se;(function(p){p.AUDIO="audio",p.VIDEO="video"})(se||(se={}));var pe=function(){function p(){var u;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(u={},u[se.AUDIO]=!1,u[se.VIDEO]=!1,u),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var d=p.prototype;return d.setByteRange=function(o,t){var s=o.split("@",2),c=[];s.length===1?c[0]=t?t.byteRangeEndOffset:0:c[0]=parseInt(s[1]),c[1]=parseInt(s[0])+c[0],this._byteRange=c},d.addElementaryStream=function(o){this._elementaryStreams[o]=!0},d.hasElementaryStream=function(o){return this._elementaryStreams[o]===!0},d.createInitializationVector=function(o){for(var t=new Uint8Array(16),s=12;s<16;s++)t[s]=o>>8*(15-s)&255;return t},d.setDecryptDataFromLevelKey=function(o,t){var s=o;return o!=null&&o.method&&o.uri&&!o.iv&&(s=new re(o.baseuri,o.reluri),s.method=o.method,s.iv=this.createInitializationVector(t)),s},te(p,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(f.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(o){this._url=o}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var o=this.sn;typeof o!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&y.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),o=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,o)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(T.isFiniteNumber)(this.programDateTime))return null;var o=Object(T.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+o*1e3}},{key:"encrypted",get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)}}]),p}();function _e(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function W(p,d,u){return d&&_e(p.prototype,d),u&&_e(p,u),p}var z=function(){function p(d){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=d,this.version=null}return W(p,[{key:"hasProgramDateTime",get:function(){return!!(this.fragments[0]&&Object(T.isFiniteNumber)(this.fragments[0].programDateTime))}}]),p}(),ge=/^(\d+)x(\d+)$/,Z=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,q=function(){function p(u){typeof u=="string"&&(u=p.parseAttrList(u));for(var o in u)u.hasOwnProperty(o)&&(this[o]=u[o])}var d=p.prototype;return d.decimalInteger=function(o){var t=parseInt(this[o],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},d.hexadecimalInteger=function(o){if(this[o]){var t=(this[o]||"0x").slice(2);t=(t.length&1?"0":"")+t;for(var s=new Uint8Array(t.length/2),c=0;c<t.length/2;c++)s[c]=parseInt(t.slice(c*2,c*2+2),16);return s}else return null},d.hexadecimalIntegerAsNumber=function(o){var t=parseInt(this[o],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},d.decimalFloatingPoint=function(o){return parseFloat(this[o])},d.enumeratedString=function(o){return this[o]},d.decimalResolution=function(o){var t=ge.exec(this[o]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},p.parseAttrList=function(o){var t,s={};for(Z.lastIndex=0;(t=Z.exec(o))!==null;){var c=t[2],h='"';c.indexOf(h)===0&&c.lastIndexOf(h)===c.length-1&&(c=c.slice(1,-1)),s[t[1]]=c}return s},p}(),ue=q,Te={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function me(p,d){var u=Te[d];return!!u&&u[p.slice(0,4)]===!0}function ye(p,d){return MediaSource.isTypeSupported((d||"video")+'/mp4;codecs="'+p+'"')}var be=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,Ce=/#EXT-X-MEDIA:(.*)/g,De=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Ie=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ke=/\.(mp4|m4s|m4v|m4a)$/i,Ne=function(){function p(){}return p.findGroup=function(u,o){for(var t=0;t<u.length;t++){var s=u[t];if(s.id===o)return s}},p.convertAVC1ToAVCOTI=function(u){var o=u.split("."),t;return o.length>2?(t=o.shift()+".",t+=parseInt(o.shift()).toString(16),t+=("000"+parseInt(o.shift()).toString(16)).substr(-4)):t=u,t},p.resolve=function(u,o){return f.buildAbsoluteURL(o,u,{alwaysNormalize:!0})},p.parseMasterPlaylist=function(u,o){var t=[],s={},c=!1;be.lastIndex=0;function h(G,J){["video","audio"].forEach(function(he){var Ae=G.filter(function(Re){return me(Re,he)});if(Ae.length){var Le=Ae.filter(function(Re){return Re.lastIndexOf("avc1",0)===0||Re.lastIndexOf("mp4a",0)===0});J[he+"Codec"]=Le.length>0?Le[0]:Ae[0],G=G.filter(function(Re){return Ae.indexOf(Re)===-1})}}),J.unknownCodecs=G}for(var E;(E=be.exec(u))!=null;)if(E[1]){var b={},C=b.attrs=new ue(E[1]);b.url=p.resolve(E[2],o);var O=C.decimalResolution("RESOLUTION");O&&(b.width=O.width,b.height=O.height),b.bitrate=C.decimalInteger("AVERAGE-BANDWIDTH")||C.decimalInteger("BANDWIDTH"),b.name=C.NAME,h([].concat((C.CODECS||"").split(/[ ,]+/)),b),b.videoCodec&&b.videoCodec.indexOf("avc1")!==-1&&(b.videoCodec=p.convertAVC1ToAVCOTI(b.videoCodec)),t.push(b)}else if(E[3]){var P=new ue(E[3]);P["DATA-ID"]&&(c=!0,s[P["DATA-ID"]]=P)}return{levels:t,sessionData:c?s:null}},p.parseMasterPlaylistMedia=function(u,o,t,s){s===void 0&&(s=[]);var c,h=[],E=0;for(Ce.lastIndex=0;(c=Ce.exec(u))!==null;){var b=new ue(c[1]);if(b.TYPE===t){var C={attrs:b,id:E++,groupId:b["GROUP-ID"],instreamId:b["INSTREAM-ID"],name:b.NAME||b.LANGUAGE,type:t,default:b.DEFAULT==="YES",autoselect:b.AUTOSELECT==="YES",forced:b.FORCED==="YES",lang:b.LANGUAGE};if(b.URI&&(C.url=p.resolve(b.URI,o)),s.length){var O=p.findGroup(s,C.groupId);C.audioCodec=O?O.codec:s[0].codec}h.push(C)}}return h},p.parseLevelPlaylist=function(u,o,t,s,c){var h=0,E=0,b=new z(o),C=0,O=null,P=new pe,G,J,he,Ae=null;for(De.lastIndex=0;(G=De.exec(u))!==null;){var Le=G[1];if(Le){P.duration=parseFloat(Le);var Re=(" "+G[2]).slice(1);P.title=Re||null,P.tagList.push(Re?["INF",Le,Re]:["INF",Le])}else if(G[3]){if(Object(T.isFiniteNumber)(P.duration)){var Fe=h++;P.type=s,P.start=E,he&&(P.levelkey=he),P.sn=Fe,P.level=t,P.cc=C,P.urlId=c,P.baseurl=o,P.relurl=(" "+G[3]).slice(1),pt(P,O),b.fragments.push(P),O=P,E+=P.duration,P=new pe}}else if(G[4]){var Ue=(" "+G[4]).slice(1);O?P.setByteRange(Ue,O):P.setByteRange(Ue)}else if(G[5])P.rawProgramDateTime=(" "+G[5]).slice(1),P.tagList.push(["PROGRAM-DATE-TIME",P.rawProgramDateTime]),Ae===null&&(Ae=b.fragments.length);else{if(G=G[0].match(Ie),!G){y.logger.warn("No matches on slow regex match for level playlist!");continue}for(J=1;J<G.length&&!(typeof G[J]<"u");J++);var Xe=(" "+G[J+1]).slice(1),gt=(" "+G[J+2]).slice(1);switch(G[J]){case"#":P.tagList.push(gt?[Xe,gt]:[Xe]);break;case"PLAYLIST-TYPE":b.type=Xe.toUpperCase();break;case"MEDIA-SEQUENCE":h=b.startSN=parseInt(Xe);break;case"TARGETDURATION":b.targetduration=parseFloat(Xe);break;case"VERSION":b.version=parseInt(Xe);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":C++,P.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":C=parseInt(Xe);break;case"KEY":{var Gt=Xe,Ct=new ue(Gt),yr=Ct.enumeratedString("METHOD"),Oe=Ct.URI,Ge=Ct.hexadecimalInteger("IV"),mt=Ct.KEYFORMAT||"identity";if(mt==="com.apple.streamingkeydelivery"){y.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}yr&&(he=new re(o,Oe),Oe&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(yr)>=0&&(he.method=yr,he.key=null,he.iv=Ge));break}case"START":{var li=new ue(Xe),ui=li.decimalFloatingPoint("TIME-OFFSET");Object(T.isFiniteNumber)(ui)&&(b.startTimeOffset=ui);break}case"MAP":{var Li=new ue(Xe);P.relurl=Li.URI,Li.BYTERANGE&&P.setByteRange(Li.BYTERANGE),P.baseurl=o,P.level=t,P.type=s,P.sn="initSegment",b.initSegment=P,P=new pe,P.rawProgramDateTime=b.initSegment.rawProgramDateTime;break}default:y.logger.warn("line parsed but not handled: "+G);break}}}return P=O,P&&!P.relurl&&(b.fragments.pop(),E-=P.duration),b.totalduration=E,b.averagetargetduration=E/b.fragments.length,b.endSN=h-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=C,!b.initSegment&&b.fragments.length&&b.fragments.every(function(an){return ke.test(an.relurl)})&&(y.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),P=new pe,P.relurl=b.fragments[0].relurl,P.baseurl=o,P.level=t,P.type=s,P.sn="initSegment",b.initSegment=P,b.needSidxRanges=!0),Ae&&qe(b.fragments,Ae),b},p}();function qe(p,d){for(var u=p[d],o=d-1;o>=0;o--){var t=p[o];t.programDateTime=u.programDateTime-t.duration*1e3,u=t}}function pt(p,d){p.rawProgramDateTime?p.programDateTime=Date.parse(p.rawProgramDateTime):d!=null&&d.programDateTime&&(p.programDateTime=d.endProgramDateTime),Object(T.isFiniteNumber)(p.programDateTime)||(p.programDateTime=null,p.rawProgramDateTime=null)}function ut(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Me=window,rt=Me.performance,ht=function(p){ut(d,p);function d(o){var t;return t=p.call(this,o,m.default.MANIFEST_LOADING,m.default.LEVEL_LOADING,m.default.AUDIO_TRACK_LOADING,m.default.SUBTITLE_TRACK_LOADING)||this,t.loaders={},t}d.canHaveQualityLevels=function(t){return t!==K.AUDIO_TRACK&&t!==K.SUBTITLE_TRACK},d.mapContextToLevelType=function(t){var s=t.type;switch(s){case K.AUDIO_TRACK:return F.AUDIO;case K.SUBTITLE_TRACK:return F.SUBTITLE;default:return F.MAIN}},d.getResponseUrl=function(t,s){var c=t.url;return(c===void 0||c.indexOf("data:")===0)&&(c=s.url),c};var u=d.prototype;return u.createInternalLoader=function(t){var s=this.hls.config,c=s.pLoader,h=s.loader,E=c||h,b=new E(s);return t.loader=b,this.loaders[t.type]=b,b},u.getInternalLoader=function(t){return this.loaders[t.type]},u.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},u.destroyInternalLoaders=function(){for(var t in this.loaders){var s=this.loaders[t];s&&s.destroy(),this.resetInternalLoader(t)}},u.destroy=function(){this.destroyInternalLoaders(),p.prototype.destroy.call(this)},u.onManifestLoading=function(t){this.load({url:t.url,type:K.MANIFEST,level:0,id:null,responseType:"text"})},u.onLevelLoading=function(t){this.load({url:t.url,type:K.LEVEL,level:t.level,id:t.id,responseType:"text"})},u.onAudioTrackLoading=function(t){this.load({url:t.url,type:K.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},u.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:K.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},u.load=function(t){var s=this.hls.config;y.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var c=this.getInternalLoader(t);if(c){var h=c.context;if(h&&h.url===t.url)return y.logger.trace("playlist request ongoing"),!1;y.logger.warn("aborting previous loader for type: "+t.type),c.abort()}var E,b,C,O;switch(t.type){case K.MANIFEST:E=s.manifestLoadingMaxRetry,b=s.manifestLoadingTimeOut,C=s.manifestLoadingRetryDelay,O=s.manifestLoadingMaxRetryTimeout;break;case K.LEVEL:E=0,O=0,C=0,b=s.levelLoadingTimeOut;break;default:E=s.levelLoadingMaxRetry,b=s.levelLoadingTimeOut,C=s.levelLoadingRetryDelay,O=s.levelLoadingMaxRetryTimeout;break}c=this.createInternalLoader(t);var P={timeout:b,maxRetry:E,retryDelay:C,maxRetryDelay:O},G={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return y.logger.debug("Calling internal loader delegate for URL: "+t.url),c.load(t,P,G),!0},u.loadsuccess=function(t,s,c,h){if(h===void 0&&(h=null),c.isSidxRequest){this._handleSidxRequest(t,c),this._handlePlaylistLoaded(t,s,c,h);return}if(this.resetInternalLoader(c.type),typeof t.data!="string")throw new Error('expected responseType of "text" for PlaylistLoader');var E=t.data;if(s.tload=rt.now(),E.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(t,c,"no EXTM3U delimiter",h);return}E.indexOf("#EXTINF:")>0||E.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,s,c,h):this._handleMasterPlaylist(t,s,c,h)},u.loaderror=function(t,s,c){c===void 0&&(c=null),this._handleNetworkError(s,c,!1,t)},u.loadtimeout=function(t,s,c){c===void 0&&(c=null),this._handleNetworkError(s,c,!0)},u._handleMasterPlaylist=function(t,s,c,h){var E=this.hls,b=t.data,C=d.getResponseUrl(t,c),O=Ne.parseMasterPlaylist(b,C),P=O.levels,G=O.sessionData;if(!P.length){this._handleManifestParsingError(t,c,"no level found in manifest",h);return}var J=P.map(function(Fe){return{id:Fe.attrs.AUDIO,codec:Fe.audioCodec}}),he=Ne.parseMasterPlaylistMedia(b,C,"AUDIO",J),Ae=Ne.parseMasterPlaylistMedia(b,C,"SUBTITLES"),Le=Ne.parseMasterPlaylistMedia(b,C,"CLOSED-CAPTIONS");if(he.length){var Re=!1;he.forEach(function(Fe){Fe.url||(Re=!0)}),Re===!1&&P[0].audioCodec&&!P[0].attrs.AUDIO&&(y.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),he.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}E.trigger(m.default.MANIFEST_LOADED,{levels:P,audioTracks:he,subtitles:Ae,captions:Le,url:C,stats:s,networkDetails:h,sessionData:G})},u._handleTrackOrLevelPlaylist=function(t,s,c,h){var E=this.hls,b=c.id,C=c.level,O=c.type,P=d.getResponseUrl(t,c),G=Object(T.isFiniteNumber)(b)?b:0,J=Object(T.isFiniteNumber)(C)?C:G,he=d.mapContextToLevelType(c),Ae=Ne.parseLevelPlaylist(t.data,P,J,he,G);if(Ae.tload=s.tload,!Ae.fragments.length){E.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:P,reason:"no fragments found in level",level:typeof c.level=="number"?c.level:void 0});return}if(O===K.MANIFEST){var Le={url:P,details:Ae};E.trigger(m.default.MANIFEST_LOADED,{levels:[Le],audioTracks:[],url:P,stats:s,networkDetails:h,sessionData:null})}if(s.tparsed=rt.now(),Ae.needSidxRanges){var Re=Ae.initSegment.url;this.load({url:Re,isSidxRequest:!0,type:O,level:C,levelDetails:Ae,id:b,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}c.levelDetails=Ae,this._handlePlaylistLoaded(t,s,c,h)},u._handleSidxRequest=function(t,s){if(typeof t.data=="string")throw new Error("sidx request must be made with responseType of array buffer");var c=j.default.parseSegmentIndex(new Uint8Array(t.data));if(c){var h=c.references,E=s.levelDetails;h.forEach(function(b,C){var O=b.info;if(E){var P=E.fragments[C];P.byteRange.length===0&&P.setByteRange(String(1+O.end-O.start)+"@"+String(O.start))}}),E&&E.initSegment.setByteRange(String(c.moovEndOffset)+"@0")}},u._handleManifestParsingError=function(t,s,c,h){this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:c,networkDetails:h})},u._handleNetworkError=function(t,s,c,h){c===void 0&&(c=!1),h===void 0&&(h=null),y.logger.info("A network error occured while loading a "+t.type+"-type playlist");var E,b,C=this.getInternalLoader(t);switch(t.type){case K.MANIFEST:E=c?g.ErrorDetails.MANIFEST_LOAD_TIMEOUT:g.ErrorDetails.MANIFEST_LOAD_ERROR,b=!0;break;case K.LEVEL:E=c?g.ErrorDetails.LEVEL_LOAD_TIMEOUT:g.ErrorDetails.LEVEL_LOAD_ERROR,b=!1;break;case K.AUDIO_TRACK:E=c?g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,b=!1;break;default:b=!1}C&&(C.abort(),this.resetInternalLoader(t.type));var O={type:g.ErrorTypes.NETWORK_ERROR,details:E,fatal:b,url:t.url,loader:C,context:t,networkDetails:s};h&&(O.response=h),this.hls.trigger(m.default.ERROR,O)},u._handlePlaylistLoaded=function(t,s,c,h){var E=c.type,b=c.level,C=c.id,O=c.levelDetails;if(!O||!O.targetduration){this._handleManifestParsingError(t,c,"invalid target duration",h);return}var P=d.canHaveQualityLevels(c.type);if(P)this.hls.trigger(m.default.LEVEL_LOADED,{details:O,level:b||0,id:C||0,stats:s,networkDetails:h});else switch(E){case K.AUDIO_TRACK:this.hls.trigger(m.default.AUDIO_TRACK_LOADED,{details:O,id:C,stats:s,networkDetails:h});break;case K.SUBTITLE_TRACK:this.hls.trigger(m.default.SUBTITLE_TRACK_LOADED,{details:O,id:C,stats:s,networkDetails:h});break}},d}(I),ct=ht;function xt(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Lt=function(p){xt(d,p);function d(o){var t;return t=p.call(this,o,m.default.FRAG_LOADING)||this,t.loaders={},t}var u=d.prototype;return u.destroy=function(){var t=this.loaders;for(var s in t){var c=t[s];c&&c.destroy()}this.loaders={},p.prototype.destroy.call(this)},u.onFragLoading=function(t){var s=t.frag,c=s.type,h=this.loaders,E=this.hls.config,b=E.fLoader,C=E.loader;s.loaded=0;var O=h[c];O&&(y.logger.warn("abort previous fragment loader for type: "+c),O.abort()),O=h[c]=s.loader=E.fLoader?new b(E):new C(E);var P,G,J;P={url:s.url,frag:s,responseType:"arraybuffer",progressData:!1};var he=s.byteRangeStartOffset,Ae=s.byteRangeEndOffset;Object(T.isFiniteNumber)(he)&&Object(T.isFiniteNumber)(Ae)&&(P.rangeStart=he,P.rangeEnd=Ae),G={timeout:E.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:E.fragLoadingMaxRetryTimeout},J={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},O.load(P,G,J)},u.loadsuccess=function(t,s,c,h){h===void 0&&(h=null);var E=t.data,b=c.frag;b.loader=void 0,this.loaders[b.type]=void 0,this.hls.trigger(m.default.FRAG_LOADED,{payload:E,frag:b,stats:s,networkDetails:h})},u.loaderror=function(t,s,c){c===void 0&&(c=null);var h=s.frag,E=h.loader;E&&E.abort(),this.loaders[h.type]=void 0,this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:s.frag,response:t,networkDetails:c})},u.loadtimeout=function(t,s,c){c===void 0&&(c=null);var h=s.frag,E=h.loader;E&&E.abort(),this.loaders[h.type]=void 0,this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s.frag,networkDetails:c})},u.loadprogress=function(t,s,c,h){h===void 0&&(h=null);var E=s.frag;E.loaded=t.loaded,this.hls.trigger(m.default.FRAG_LOAD_PROGRESS,{frag:E,stats:t,networkDetails:h})},d}(I),B=Lt;function H(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Q=function(p){H(d,p);function d(o){var t;return t=p.call(this,o,m.default.KEY_LOADING)||this,t.loaders={},t.decryptkey=null,t.decrypturl=null,t}var u=d.prototype;return u.destroy=function(){for(var t in this.loaders){var s=this.loaders[t];s&&s.destroy()}this.loaders={},p.prototype.destroy.call(this)},u.onKeyLoading=function(t){var s=t.frag,c=s.type,h=this.loaders[c];if(!s.decryptdata){y.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var E=s.decryptdata.uri;if(E!==this.decrypturl||this.decryptkey===null){var b=this.hls.config;if(h&&(y.logger.warn("abort previous key loader for type:"+c),h.abort()),!E){y.logger.warn("key uri is falsy");return}s.loader=this.loaders[c]=new b.loader(b),this.decrypturl=E,this.decryptkey=null;var C={url:E,frag:s,responseType:"arraybuffer"},O={timeout:b.fragLoadingTimeOut,maxRetry:0,retryDelay:b.fragLoadingRetryDelay,maxRetryDelay:b.fragLoadingMaxRetryTimeout},P={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};s.loader.load(C,O,P)}else this.decryptkey&&(s.decryptdata.key=this.decryptkey,this.hls.trigger(m.default.KEY_LOADED,{frag:s}))},u.loadsuccess=function(t,s,c){var h=c.frag;if(!h.decryptdata){y.logger.error("after key load, decryptdata unset");return}this.decryptkey=h.decryptdata.key=new Uint8Array(t.data),h.loader=void 0,delete this.loaders[h.type],this.hls.trigger(m.default.KEY_LOADED,{frag:h})},u.loaderror=function(t,s){var c=s.frag,h=c.loader;h&&h.abort(),delete this.loaders[c.type],this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:c,response:t})},u.loadtimeout=function(t,s){var c=s.frag,h=c.loader;h&&h.abort(),delete this.loaders[c.type],this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:c})},d}(I),ce=Q;function le(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var A={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},N=function(p){le(d,p);function d(o){var t;return t=p.call(this,o,m.default.BUFFER_APPENDED,m.default.FRAG_BUFFERED,m.default.FRAG_LOADED)||this,t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=o.config,t}var u=d.prototype;return u.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,I.prototype.destroy.call(this),p.prototype.destroy.call(this)},u.getBufferedFrag=function(t,s){var c=this.fragments,h=Object.keys(c).filter(function(b){var C=c[b];if(C.body.type!==s||!C.buffered)return!1;var O=C.body;return O.startPTS<=t&&t<=O.endPTS});if(h.length===0)return null;var E=h.pop();return c[E].body},u.detectEvictedFragments=function(t,s){var c=this;Object.keys(this.fragments).forEach(function(h){var E=c.fragments[h];if(!(!E||!E.buffered)){var b=E.range[t];if(b)for(var C=b.time,O=0;O<C.length;O++){var P=C[O];if(!c.isTimeBuffered(P.startPTS,P.endPTS,s)){c.removeFragment(E.body);break}}}})},u.detectPartialFragments=function(t){var s=this,c=this.getFragmentKey(t),h=this.fragments[c];h&&(h.buffered=!0,Object.keys(this.timeRanges).forEach(function(E){if(t.hasElementaryStream(E)){var b=s.timeRanges[E];h.range[E]=s.getBufferedTimes(t.startPTS,t.endPTS,b)}}))},u.getBufferedTimes=function(t,s,c){for(var h=[],E,b,C=!1,O=0;O<c.length;O++)if(E=c.start(O)-this.bufferPadding,b=c.end(O)+this.bufferPadding,t>=E&&s<=b){h.push({startPTS:Math.max(t,c.start(O)),endPTS:Math.min(s,c.end(O))});break}else if(t<b&&s>E)h.push({startPTS:Math.max(t,c.start(O)),endPTS:Math.min(s,c.end(O))}),C=!0;else if(s<=E)break;return{time:h,partial:C}},u.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},u.getPartialFragment=function(t){var s=this,c,h,E,b=null,C=0;return Object.keys(this.fragments).forEach(function(O){var P=s.fragments[O];s.isPartial(P)&&(h=P.body.startPTS-s.bufferPadding,E=P.body.endPTS+s.bufferPadding,t>=h&&t<=E&&(c=Math.min(t-h,E-t),C<=c&&(b=P.body,C=c)))}),b},u.getState=function(t){var s=this.getFragmentKey(t),c=this.fragments[s],h=A.NOT_LOADED;return c!==void 0&&(c.buffered?this.isPartial(c)===!0?h=A.PARTIAL:h=A.OK:h=A.APPENDING),h},u.isPartial=function(t){return t.buffered===!0&&(t.range.video!==void 0&&t.range.video.partial===!0||t.range.audio!==void 0&&t.range.audio.partial===!0)},u.isTimeBuffered=function(t,s,c){for(var h,E,b=0;b<c.length;b++){if(h=c.start(b)-this.bufferPadding,E=c.end(b)+this.bufferPadding,t>=h&&s<=E)return!0;if(s<=h)return!1}return!1},u.onFragLoaded=function(t){var s=t.frag;!Object(T.isFiniteNumber)(s.sn)||s.bitrateTest||(this.fragments[this.getFragmentKey(s)]={body:s,range:Object.create(null),buffered:!1})},u.onBufferAppended=function(t){var s=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(c){var h=s.timeRanges[c];s.detectEvictedFragments(c,h)})},u.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},u.hasFragment=function(t){var s=this.getFragmentKey(t);return this.fragments[s]!==void 0},u.removeFragment=function(t){var s=this.getFragmentKey(t);delete this.fragments[s]},u.removeAllFragments=function(){this.fragments=Object.create(null)},d}(I),_={search:function(d,u){for(var o=0,t=d.length-1,s=null,c=null;o<=t;){s=(o+t)/2|0,c=d[s];var h=u(c);if(h>0)o=s+1;else if(h<0)t=s-1;else return c}return null}},R=_,x=function(){function p(){}return p.isBuffered=function(u,o){try{if(u){for(var t=u.buffered,s=0;s<t.length;s++)if(o>=t.start(s)&&o<=t.end(s))return!0}}catch{}return!1},p.bufferInfo=function(u,o,t){try{if(u){var s=u.buffered,c=[],h;for(h=0;h<s.length;h++)c.push({start:s.start(h),end:s.end(h)});return this.bufferedInfo(c,o,t)}}catch{}return{len:0,start:o,end:o,nextStart:void 0}},p.bufferedInfo=function(u,o,t){u.sort(function(Ae,Le){var Re=Ae.start-Le.start;return Re||Le.end-Ae.end});var s=[];if(t)for(var c=0;c<u.length;c++){var h=s.length;if(h){var E=s[h-1].end;u[c].start-E<t?u[c].end>E&&(s[h-1].end=u[c].end):s.push(u[c])}else s.push(u[c])}else s=u;for(var b=0,C,O=o,P=o,G=0;G<s.length;G++){var J=s[G].start,he=s[G].end;if(o+t>=J&&o<he)O=J,P=he,b=P-o;else if(o+t<J){C=J;break}}return{len:b,start:O,end:P,nextStart:C}},p}(),v=r("./node_modules/eventemitter3/index.js"),k=r("./node_modules/webworkify-webpack/index.js"),L=r("./src/demux/demuxer-inline.js");function D(){return window.MediaSource||window.WebKitMediaSource}var M=r("./src/utils/get-self-scope.js");function V(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Y=function(p){V(d,p);function d(){return p.apply(this,arguments)||this}var u=d.prototype;return u.trigger=function(t){for(var s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];this.emit.apply(this,[t,t].concat(c))},d}(v.EventEmitter),ie=Object(M.getSelfScope)(),oe=D()||{isTypeSupported:function(){return!1}},ne=function(){function p(u,o){var t=this;this.hls=u,this.id=o;var s=this.observer=new Y,c=u.config,h=function(P,G){G=G||{},G.frag=t.frag,G.id=t.id,u.trigger(P,G)};s.on(m.default.FRAG_DECRYPTED,h),s.on(m.default.FRAG_PARSING_INIT_SEGMENT,h),s.on(m.default.FRAG_PARSING_DATA,h),s.on(m.default.FRAG_PARSED,h),s.on(m.default.ERROR,h),s.on(m.default.FRAG_PARSING_METADATA,h),s.on(m.default.FRAG_PARSING_USERDATA,h),s.on(m.default.INIT_PTS_FOUND,h);var E={mp4:oe.isTypeSupported("video/mp4"),mpeg:oe.isTypeSupported("audio/mpeg"),mp3:oe.isTypeSupported('audio/mp4; codecs="mp3"')},b=navigator.vendor;if(c.enableWorker&&typeof Worker<"u"){y.logger.log("demuxing in webworker");var C;try{C=this.w=k("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),C.addEventListener("message",this.onwmsg),C.onerror=function(O){u.trigger(m.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:O.message+" ("+O.filename+":"+O.lineno+")"}})},C.postMessage({cmd:"init",typeSupported:E,vendor:b,id:o,config:JSON.stringify(c)})}catch(O){y.logger.warn("Error in worker:",O),y.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),C&&ie.URL.revokeObjectURL(C.objectURL),this.demuxer=new L.default(s,E,c,b),this.w=void 0}}else this.demuxer=new L.default(s,E,c,b)}var d=p.prototype;return d.destroy=function(){var o=this.w;if(o)o.removeEventListener("message",this.onwmsg),o.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var s=this.observer;s&&(s.removeAllListeners(),this.observer=null)},d.push=function(o,t,s,c,h,E,b,C){var O=this.w,P=Object(T.isFiniteNumber)(h.startPTS)?h.startPTS:h.start,G=h.decryptdata,J=this.frag,he=!(J&&h.cc===J.cc),Ae=!(J&&h.level===J.level),Le=J&&h.sn===J.sn+1,Re=!Ae&&Le;if(he&&y.logger.log(this.id+":discontinuity detected"),Ae&&y.logger.log(this.id+":switch detected"),this.frag=h,O)O.postMessage({cmd:"demux",data:o,decryptdata:G,initSegment:t,audioCodec:s,videoCodec:c,timeOffset:P,discontinuity:he,trackSwitch:Ae,contiguous:Re,duration:E,accurateTimeOffset:b,defaultInitPTS:C},o instanceof ArrayBuffer?[o]:[]);else{var Fe=this.demuxer;Fe&&Fe.push(o,G,t,s,c,P,he,Ae,Re,E,b,C)}},d.onWorkerMessage=function(o){var t=o.data,s=this.hls;switch(t.event){case"init":ie.URL.revokeObjectURL(this.w.objectURL);break;case m.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,s.trigger(t.event,t.data);break}},p}(),ve=ne;function de(p,d,u){switch(d){case"audio":p.audioGroupIds||(p.audioGroupIds=[]),p.audioGroupIds.push(u);break;case"text":p.textGroupIds||(p.textGroupIds=[]),p.textGroupIds.push(u);break}}function Ee(p,d,u){var o=p[d],t=p[u],s=t.startPTS;if(Object(T.isFiniteNumber)(s))u>d?(o.duration=s-o.start,o.duration<0&&y.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(t.duration=o.start-s,t.duration<0&&y.logger.warn("negative duration computed for frag "+t.sn+",level "+t.level+", there should be some duration drift between playlist and fragment!"));else if(u>d){var c=o.cc===t.cc;t.start=o.start+(c&&o.minEndPTS?o.minEndPTS-o.start:o.duration)}else t.start=Math.max(o.start-t.duration,0)}function fe(p,d,u,o,t,s){var c=u,h=o;if(Object(T.isFiniteNumber)(d.startPTS)){var E=Math.abs(d.startPTS-u);Object(T.isFiniteNumber)(d.deltaPTS)?d.deltaPTS=Math.max(E,d.deltaPTS):d.deltaPTS=E,c=Math.max(u,d.startPTS),u=Math.min(u,d.startPTS),h=Math.min(o,d.endPTS),o=Math.max(o,d.endPTS),t=Math.min(t,d.startDTS),s=Math.max(s,d.endDTS)}var b=u-d.start;d.start=d.startPTS=u,d.maxStartPTS=c,d.endPTS=o,d.minEndPTS=h,d.startDTS=t,d.endDTS=s,d.duration=o-u;var C=d.sn;if(!p||C<p.startSN||C>p.endSN)return 0;var O,P,G;for(O=C-p.startSN,P=p.fragments,P[O]=d,G=O;G>0;G--)Ee(P,G,G-1);for(G=O;G<P.length-1;G++)Ee(P,G,G+1);return p.PTSKnown=!0,b}function xe(p,d){d.initSegment&&p.initSegment&&(d.initSegment=p.initSegment);var u=0,o;if(Ve(p,d,function(c,h){u=c.cc-h.cc,Object(T.isFiniteNumber)(c.startPTS)&&(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,h.backtracked=c.backtracked,h.dropped=c.dropped,o=h),d.PTSKnown=!0}),!!d.PTSKnown){if(u){y.logger.log("discontinuity sliding from playlist, take drift into account");for(var t=d.fragments,s=0;s<t.length;s++)t[s].cc+=u}o?fe(d,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):Qe(p,d),d.PTSKnown=p.PTSKnown}}function we(p,d,u){u===void 0&&(u=0);var o=-1;Ve(p,d,function(c,h,E){h.start=c.start,o=E});var t=d.fragments;if(o<0){t.forEach(function(c){c.start+=u});return}for(var s=o+1;s<t.length;s++)t[s].start=t[s-1].start+t[s-1].duration}function Ve(p,d,u){if(!(!p||!d))for(var o=Math.max(p.startSN,d.startSN)-d.startSN,t=Math.min(p.endSN,d.endSN)-d.startSN,s=d.startSN-p.startSN,c=o;c<=t;c++){var h=p.fragments[s+c],E=d.fragments[c];if(!h||!E)break;u(h,E,c)}}function Qe(p,d){var u=d.startSN-p.startSN,o=p.fragments,t=d.fragments;if(!(u<0||u>o.length))for(var s=0;s<t.length;s++)t[s].start+=o[u].start}function Ke(p,d,u){var o=1e3*(d.averagetargetduration?d.averagetargetduration:d.targetduration),t=o/2;return p&&d.endSN===p.endSN&&(o=t),u&&(o=Math.max(t,o-(window.performance.now()-u))),Math.round(o)}var st={toString:function(d){for(var u="",o=d.length,t=0;t<o;t++)u+="["+d.start(t).toFixed(3)+","+d.end(t).toFixed(3)+"]";return u}},Ze=st;function We(p,d){for(var u=null,o=0;o<p.length;o+=1){var t=p[o];if(t&&t.cc===d){u=t;break}}return u}function et(p,d){return R.search(p,function(u){return u.cc<d?1:u.cc>d?-1:0})}function it(p,d,u){var o=!1;return d&&d.details&&u&&(u.endCC>u.startCC||p&&p.cc<u.startCC)&&(o=!0),o}function St(p,d){var u=p.fragments,o=d.fragments;if(!o.length||!u.length){y.logger.log("No fragments to align");return}var t=We(u,o[0].cc);if(!t||t&&!t.startPTS){y.logger.log("No frag in previous level to align on");return}return t}function _t(p,d){d.fragments.forEach(function(u){if(u){var o=u.start+p;u.start=u.startPTS=o,u.endPTS=o+u.duration}}),d.PTSKnown=!0}function ot(p,d,u){It(p,u,d),!u.PTSKnown&&d&&bt(u,d.details)}function It(p,d,u){if(it(p,u,d)){var o=St(u.details,d);o&&(y.logger.log("Adjusting PTS using last level due to CC increase within current level"),_t(o.start,d))}}function bt(p,d){if(d&&d.fragments.length){if(!p.hasProgramDateTime||!d.hasProgramDateTime)return;var u=d.fragments[0].programDateTime,o=p.fragments[0].programDateTime,t=(o-u)/1e3+d.fragments[0].start;Object(T.isFiniteNumber)(t)&&(y.logger.log("adjusting PTS using programDateTime delta, sliding:"+t.toFixed(3)),_t(t,p))}}function Dt(p,d,u){if(d===null||!Array.isArray(p)||!p.length||!Object(T.isFiniteNumber)(d))return null;var o=p[0].programDateTime;if(d<(o||0))return null;var t=p[p.length-1].endProgramDateTime;if(d>=(t||0))return null;u=u||0;for(var s=0;s<p.length;++s){var c=p[s];if(qt(d,u,c))return c}return null}function vt(p,d,u,o){u===void 0&&(u=0),o===void 0&&(o=0);var t=null;if(p?t=d[p.sn-d[0].sn+1]:u===0&&d[0].start===0&&(t=d[0]),t&&lt(u,o,t)===0)return t;var s=R.search(d,lt.bind(null,u,o));return s||t}function lt(p,d,u){p===void 0&&(p=0),d===void 0&&(d=0);var o=Math.min(d,u.duration+(u.deltaPTS?u.deltaPTS:0));return u.start+u.duration-o<=p?1:u.start-o>p&&u.start?-1:0}function qt(p,d,u){var o=Math.min(d,u.duration+(u.deltaPTS?u.deltaPTS:0))*1e3,t=u.endProgramDateTime||0;return t-o>p}var Zt=250,Mt=2,kt=.1,zt=.05,Qt=function(){function p(u,o,t,s){this.config=u,this.media=o,this.fragmentTracker=t,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var d=p.prototype;return d.poll=function(o){var t=this.config,s=this.media,c=this.stalled,h=s.currentTime,E=s.seeking,b=this.seeking&&!E,C=!this.seeking&&E;if(this.seeking=E,h!==o){if(this.moved=!0,c!==null){if(this.stallReported){var O=self.performance.now()-c;y.logger.warn("playback not stuck anymore @"+h+", after "+Math.round(O)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((C||b)&&(this.stalled=null),!(s.paused||s.ended||s.playbackRate===0||!s.buffered.length)){var P=x.bufferInfo(s,h,0),G=P.len>0,J=P.nextStart||0;if(!(!G&&!J)){if(E){var he=P.len>Mt,Ae=!J||J-h>Mt&&!this.fragmentTracker.getPartialFragment(h);if(he||Ae)return;this.moved=!1}if(!this.moved&&this.stalled){var Le=Math.max(J,P.start||0)-h;if(Le>0&&Le<=Mt){this._trySkipBufferHole(null);return}}var Re=self.performance.now();if(c===null){this.stalled=Re;return}var Fe=Re-c;!E&&Fe>=Zt&&this._reportStall(P.len);var Ue=x.bufferInfo(s,h,t.maxBufferHole);this._tryFixBufferStall(Ue,Fe)}}},d._tryFixBufferStall=function(o,t){var s=this.config,c=this.fragmentTracker,h=this.media,E=h.currentTime,b=c.getPartialFragment(E);if(b){var C=this._trySkipBufferHole(b);if(C)return}o.len>s.maxBufferHole&&t>s.highBufferWatchdogPeriod*1e3&&(y.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},d._reportStall=function(o){var t=this.hls,s=this.media,c=this.stallReported;c||(this.stallReported=!0,y.logger.warn("Playback stalling at @"+s.currentTime+" due to low buffer (buffer="+o+")"),t.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:o}))},d._trySkipBufferHole=function(o){for(var t=this.config,s=this.hls,c=this.media,h=c.currentTime,E=0,b=0;b<c.buffered.length;b++){var C=c.buffered.start(b);if(h+t.maxBufferHole>=E&&h<C){var O=Math.max(C+zt,c.currentTime+kt);return y.logger.warn("skipping hole, adjusting currentTime from "+h+" to "+O),this.moved=!0,this.stalled=null,c.currentTime=O,o&&s.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+h+" to "+O,frag:o}),O}E=c.buffered.end(b)}return 0},d._tryNudgeBuffer=function(){var o=this.config,t=this.hls,s=this.media,c=s.currentTime,h=(this.nudgeRetry||0)+1;if(this.nudgeRetry=h,h<o.nudgeMaxRetry){var E=c+h*o.nudgeOffset;y.logger.warn("Nudging 'currentTime' from "+c+" to "+E),s.currentTime=E,t.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else y.logger.error("Playhead still not moving while enough data buffered @"+c+" after "+o.nudgeMaxRetry+" nudges"),t.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},p}();function lr(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function Mr(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ur=function(p){Mr(d,p);function d(o){for(var t,s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];return t=p.call.apply(p,[this,o].concat(c))||this,t._boundTick=void 0,t._tickTimer=null,t._tickInterval=null,t._tickCallCount=0,t._boundTick=t.tick.bind(lr(t)),t}var u=d.prototype;return u.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},u.hasInterval=function(){return!!this._tickInterval},u.hasNextTick=function(){return!!this._tickTimer},u.setInterval=function(t){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,t),!0)},u.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},u.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},u.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},u.doTick=function(){},d}(I);function Br(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ae={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Nt=function(p){Br(d,p);function d(){return p.apply(this,arguments)||this}var u=d.prototype;return u.doTick=function(){},u.startLoad=function(){},u.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ae.STOPPED},u._streamEnded=function(t,s){var c=this.fragCurrent,h=this.fragmentTracker;if(!s.live&&c&&!c.backtracked&&c.sn===s.endSN&&!t.nextStart){var E=h.getState(c);return E===A.PARTIAL||E===A.OK}return!1},u.onMediaSeeking=function(){var t=this.config,s=this.media,c=this.mediaBuffer,h=this.state,E=s?s.currentTime:null,b=x.bufferInfo(c||s,E,this.config.maxBufferHole);if(y.logger.log("media seeking to "+(Object(T.isFiniteNumber)(E)?E.toFixed(3):E)),h===ae.FRAG_LOADING){var C=this.fragCurrent;if(b.len===0&&C){var O=t.maxFragLookUpTolerance,P=C.start-O,G=C.start+C.duration+O;E<P||E>G?(C.loader&&(y.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),C.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE):y.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else h===ae.ENDED&&(b.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ae.IDLE);s&&(this.lastCurrentTime=E),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=E),this.tick()},u.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},u.onHandlerDestroying=function(){this.stopLoad(),p.prototype.onHandlerDestroying.call(this)},u.onHandlerDestroyed=function(){this.state=ae.STOPPED,this.fragmentTracker=null},u.computeLivePosition=function(t,s){var c=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*s.targetduration;return t+Math.max(0,s.totalduration-c)},d}(ur);function Tr(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function Ur(p,d,u){return d&&Tr(p.prototype,d),u&&Tr(p,u),p}function Jt(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Si=100,Gn=function(p){Jt(d,p);function d(o,t){var s;return s=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.MANIFEST_LOADING,m.default.MANIFEST_PARSED,m.default.LEVEL_LOADED,m.default.LEVELS_UPDATED,m.default.KEY_LOADED,m.default.FRAG_LOADED,m.default.FRAG_LOAD_EMERGENCY_ABORTED,m.default.FRAG_PARSING_INIT_SEGMENT,m.default.FRAG_PARSING_DATA,m.default.FRAG_PARSED,m.default.ERROR,m.default.AUDIO_TRACK_SWITCHING,m.default.AUDIO_TRACK_SWITCHED,m.default.BUFFER_CREATED,m.default.BUFFER_APPENDED,m.default.BUFFER_FLUSHED)||this,s.fragmentTracker=t,s.config=o.config,s.audioCodecSwap=!1,s._state=ae.STOPPED,s.stallReported=!1,s.gapController=null,s.altAudio=!1,s.audioOnly=!1,s.bitrateTest=!1,s}var u=d.prototype;return u.startLoad=function(t){if(this.levels){var s=this.lastCurrentTime,c=this.hls;if(this.stopLoad(),this.setInterval(Si),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var h=c.startLevel;h===-1&&(c.config.testBandwidth?(h=0,this.bitrateTest=!0):h=c.nextAutoLevel),this.level=c.nextLoadLevel=h,this.loadedmetadata=!1}s>0&&t===-1&&(y.logger.log("override startPosition with lastCurrentTime @"+s.toFixed(3)),t=s),this.state=ae.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ae.STOPPED},u.stopLoad=function(){this.forceStartLoad=!1,p.prototype.stopLoad.call(this)},u.doTick=function(){switch(this.state){case ae.BUFFER_FLUSHING:this.fragLoadError=0;break;case ae.IDLE:this._doTickIdle();break;case ae.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ae.IDLE);break;case ae.FRAG_LOADING_WAITING_RETRY:var s=window.performance.now(),c=this.retryDate;(!c||s>=c||this.media&&this.media.seeking)&&(y.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ae.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},u._doTickIdle=function(){var t=this.hls,s=t.config,c=this.media;if(!(this.levelLastLoaded===void 0||!c&&(this.startFragRequested||!s.startFragPrefetch))){if(this.altAudio&&this.audioOnly){this.demuxer.frag=null;return}var h;this.loadedmetadata?h=c.currentTime:h=this.nextLoadPosition;var E=t.nextLoadLevel,b=this.levels[E];if(b){var C=b.bitrate,O;C?O=Math.max(8*s.maxBufferSize/C,s.maxBufferLength):O=s.maxBufferLength,O=Math.min(O,s.maxMaxBufferLength);var P=h<s.maxBufferHole?Math.max(Mt,s.maxBufferHole):s.maxBufferHole,G=x.bufferInfo(this.mediaBuffer?this.mediaBuffer:c,h,P),J=G.len;if(!(J>=O)){y.logger.trace("buffer length of "+J.toFixed(3)+" is below max of "+O.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=E;var he=b.details;if(!he||he.live&&this.levelLastLoaded!==E){this.state=ae.WAITING_LEVEL;return}if(this._streamEnded(G,he)){var Ae={};this.altAudio&&(Ae.type="video"),this.hls.trigger(m.default.BUFFER_EOS,Ae),this.state=ae.ENDED;return}this._fetchPayloadOrEos(h,G,he)}}}},u._fetchPayloadOrEos=function(t,s,c){var h=this.fragPrevious;this.level;var E=c.fragments,b=E.length;if(b!==0){var C=E[0].start,O=E[b-1].start+E[b-1].duration,P=s.end,G;if(c.initSegment&&!c.initSegment.data)G=c.initSegment;else if(c.live){var J=this.config.initialLiveManifestSize;if(b<J){y.logger.warn("Can not start playback of a level, reason: not enough fragments "+b+" < "+J);return}if(G=this._ensureFragmentAtLivePoint(c,P,C,O,h,E),G===null)return}else P<C&&(G=E[0]);G||(G=this._findFragment(C,h,b,E,P,O,c)),G&&(G.encrypted?this._loadKey(G,c):this._loadFragment(G,c,t,P))}},u._ensureFragmentAtLivePoint=function(t,s,c,h,E,b){var C=this.hls.config,O=this.media,P,G=1/0;if(C.liveMaxLatencyDuration!==void 0?G=C.liveMaxLatencyDuration:Object(T.isFiniteNumber)(C.liveMaxLatencyDurationCount)&&(G=C.liveMaxLatencyDurationCount*t.targetduration),s<Math.max(c-C.maxFragLookUpTolerance,h-G)){var J=this.liveSyncPosition=this.computeLivePosition(c,t);s=J,O&&!O.paused&&O.readyState&&O.duration>J&&J>O.currentTime&&(y.logger.log("buffer end: "+s.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+J.toFixed(3)),O.currentTime=J),this.nextLoadPosition=J}if(t.PTSKnown&&s>h&&O&&O.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&E)if(t.hasProgramDateTime)y.logger.log("live playlist, switching playlist, load frag with same PDT: "+E.programDateTime),P=Dt(b,E.endProgramDateTime,C.maxFragLookUpTolerance);else{var he=E.sn+1;if(he>=t.startSN&&he<=t.endSN){var Ae=b[he-t.startSN];E.cc===Ae.cc&&(P=Ae,y.logger.log("live playlist, switching playlist, load frag with next SN: "+P.sn))}P||(P=R.search(b,function(Le){return E.cc-Le.cc}),P&&y.logger.log("live playlist, switching playlist, load frag with same CC: "+P.sn))}return P},u._findFragment=function(t,s,c,h,E,b,C){var O=this.hls.config,P;if(E<b){var G=E>b-O.maxFragLookUpTolerance?0:O.maxFragLookUpTolerance;P=vt(s,h,E,G)}else P=h[c-1];if(P){var J=P.sn-C.startSN,he=s&&P.level===s.level,Ae=h[J-1],Le=h[J+1];if(s&&P.sn===s.sn)if(he&&!P.backtracked)if(P.sn<C.endSN){var Re=s.deltaPTS;Re&&Re>O.maxBufferHole&&s.dropped&&J?(P=Ae,y.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(P=Le,this.fragmentTracker.getState(P)!==A.OK&&y.logger.log("Re-loading fragment with SN: "+P.sn))}else P=null;else P.backtracked&&(Le&&Le.backtracked?(y.logger.warn("Already backtracked from fragment "+Le.sn+", will not backtrack to fragment "+P.sn+". Loading fragment "+Le.sn),P=Le):(y.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),P.dropped=0,Ae?(P=Ae,P.backtracked=!0):J&&(P=null)))}return P},u._loadKey=function(t,s){y.logger.log("Loading key for "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], level "+this.level),this.state=ae.KEY_LOADING,this.hls.trigger(m.default.KEY_LOADING,{frag:t})},u._loadFragment=function(t,s,c,h){var E=this.fragmentTracker.getState(t);this.fragCurrent=t,t.sn!=="initSegment"&&(this.startFragRequested=!0),Object(T.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||E===A.NOT_LOADED||E===A.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,y.logger.log("Loading "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(c.toFixed(3))+", bufferEnd: "+parseFloat(h.toFixed(3))),this.hls.trigger(m.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new ve(this.hls,"main")),this.state=ae.FRAG_LOADING):E===A.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},u.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,F.MAIN)},u.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},u._checkFragmentChanged=function(){var t,s,c=this.media;if(c&&c.readyState&&c.seeking===!1&&(s=c.currentTime,s>this.lastCurrentTime&&(this.lastCurrentTime=s),x.isBuffered(c,s)?t=this.getBufferedFrag(s):x.isBuffered(c,s+.1)&&(t=this.getBufferedFrag(s+.1)),t)){var h=t;if(h!==this.fragPlaying){this.hls.trigger(m.default.FRAG_CHANGED,{frag:h});var E=h.level;(!this.fragPlaying||this.fragPlaying.level!==E)&&this.hls.trigger(m.default.LEVEL_SWITCHED,{level:E}),this.fragPlaying=h}}},u.immediateLevelSwitch=function(){if(y.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,s;t?(s=t.paused,s||t.pause()):s=!0,this.previouslyPaused=s}var c=this.fragCurrent;c&&c.loader&&c.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},u.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&x.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},u.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var s,c=this.getBufferedFrag(t.currentTime);if(c&&c.startPTS>1&&this.flushMainBuffer(0,c.startPTS-1),t.paused)s=0;else{var h=this.hls.nextLoadLevel,E=this.levels[h],b=this.fragLastKbps;b&&this.fragCurrent?s=this.fragCurrent.duration*E.bitrate/(1e3*b)+1:s=0}var C=this.getBufferedFrag(t.currentTime+s);if(C){var O=this.followingBufferedFrag(C);if(O){var P=this.fragCurrent;P&&P.loader&&P.loader.abort(),this.fragCurrent=null;var G=Math.max(C.endPTS,O.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,O.duration));this.flushMainBuffer(G,Number.POSITIVE_INFINITY)}}}},u.flushMainBuffer=function(t,s){this.state=ae.BUFFER_FLUSHING;var c={startOffset:t,endOffset:s};this.altAudio&&(c.type="video"),this.hls.trigger(m.default.BUFFER_FLUSHING,c)},u.onMediaAttached=function(t){var s=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),s.addEventListener("seeking",this.onvseeking),s.addEventListener("seeked",this.onvseeked),s.addEventListener("ended",this.onvended);var c=this.config;this.levels&&c.autoStartLoad&&this.hls.startLoad(c.startPosition),this.gapController=new Qt(c,s,this.fragmentTracker,this.hls)},u.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(y.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var s=this.levels;s&&s.forEach(function(c){c.details&&c.details.fragments.forEach(function(h){h.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},u.onMediaSeeked=function(){var t=this.media,s=t?t.currentTime:void 0;Object(T.isFiniteNumber)(s)&&y.logger.log("media seeked to "+s.toFixed(3)),this.tick()},u.onManifestLoading=function(){y.logger.log("trigger BUFFER_RESET"),this.hls.trigger(m.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},u.onManifestParsed=function(t){var s=!1,c=!1,h;t.levels.forEach(function(b){h=b.audioCodec,h&&(h.indexOf("mp4a.40.2")!==-1&&(s=!0),h.indexOf("mp4a.40.5")!==-1&&(c=!0))}),this.audioCodecSwitch=s&&c,this.audioCodecSwitch&&y.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var E=this.config;(E.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(E.startPosition)},u.onLevelLoaded=function(t){var s=t.details,c=t.level,h=this.levels[this.levelLastLoaded],E=this.levels[c],b=s.totalduration,C=0;if(y.logger.log("level "+c+" loaded ["+s.startSN+","+s.endSN+"],duration:"+b),s.live||E.details&&E.details.live){var O=E.details;O&&s.fragments.length>0?(xe(O,s),C=s.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(C,O),s.PTSKnown&&Object(T.isFiniteNumber)(C)?y.logger.log("live playlist sliding:"+C.toFixed(3)):(y.logger.log("live playlist - outdated PTS, unknown sliding"),ot(this.fragPrevious,h,s))):(y.logger.log("live playlist - first load, unknown sliding"),s.PTSKnown=!1,ot(this.fragPrevious,h,s))}else s.PTSKnown=!1;if(E.details=s,this.levelLastLoaded=c,this.hls.trigger(m.default.LEVEL_UPDATED,{details:s,level:c}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var P=s.startTimeOffset;Object(T.isFiniteNumber)(P)?(P<0&&(y.logger.log("negative start time offset "+P+", count from end of last fragment"),P=C+b+P),y.logger.log("start time offset found in playlist, adjust startPosition to "+P),this.startPosition=P):s.live?(this.startPosition=this.computeLivePosition(C,s),y.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ae.WAITING_LEVEL&&(this.state=ae.IDLE),this.tick()},u.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE,this.tick())},u.onFragLoaded=function(t){var s=this.fragCurrent,c=this.hls,h=this.levels,E=this.media,b=t.frag;if(this.state===ae.FRAG_LOADING&&s&&b.type==="main"&&b.level===s.level&&b.sn===s.sn){var C=t.stats,O=h[s.level],P=O.details;if(this.bitrateTest=!1,this.stats=C,y.logger.log("Loaded "+s.sn+" of ["+P.startSN+" ,"+P.endSN+"],level "+s.level),b.bitrateTest&&c.nextLoadLevel)this.state=ae.IDLE,this.startFragRequested=!1,C.tparsed=C.tbuffered=window.performance.now(),c.trigger(m.default.FRAG_BUFFERED,{stats:C,frag:s,id:"main"}),this.tick();else if(b.sn==="initSegment")this.state=ae.IDLE,C.tparsed=C.tbuffered=window.performance.now(),P.initSegment.data=t.payload,c.trigger(m.default.FRAG_BUFFERED,{stats:C,frag:s,id:"main"}),this.tick();else{y.logger.log("Parsing "+s.sn+" of ["+P.startSN+" ,"+P.endSN+"],level "+s.level+", cc "+s.cc),this.state=ae.PARSING,this.pendingBuffering=!0,this.appended=!1,b.bitrateTest&&(b.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:b}));var G=!(E&&E.seeking)&&(P.PTSKnown||!P.live),J=P.initSegment?P.initSegment.data:[],he=this._getAudioCodec(O),Ae=this.demuxer=this.demuxer||new ve(this.hls,"main");Ae.push(t.payload,J,he,O.videoCodec,s,P.totalduration,G)}}this.fragLoadError=0},u.onFragParsingInitSegment=function(t){var s=this.fragCurrent,c=t.frag;if(s&&t.id==="main"&&c.sn===s.sn&&c.level===s.level&&this.state===ae.PARSING){var h=t.tracks,E,b;if(this.audioOnly=h.audio&&!h.video,this.altAudio&&!this.audioOnly&&delete h.audio,b=h.audio,b){var C=this.levels[this.level].audioCodec,O=navigator.userAgent.toLowerCase();C&&this.audioCodecSwap&&(y.logger.log("swapping playlist audio codec"),C.indexOf("mp4a.40.5")!==-1?C="mp4a.40.2":C="mp4a.40.5"),this.audioCodecSwitch&&b.metadata.channelCount!==1&&O.indexOf("firefox")===-1&&(C="mp4a.40.5"),O.indexOf("android")!==-1&&b.container!=="audio/mpeg"&&(C="mp4a.40.2",y.logger.log("Android: force audio codec to "+C)),b.levelCodec=C,b.id=t.id}b=h.video,b&&(b.levelCodec=this.levels[this.level].videoCodec,b.id=t.id),this.hls.trigger(m.default.BUFFER_CODECS,h);for(E in h){b=h[E],y.logger.log("main track:"+E+",container:"+b.container+",codecs[level/parsed]=["+b.levelCodec+"/"+b.codec+"]");var P=b.initSegment;P&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.default.BUFFER_APPENDING,{type:E,data:P,parent:"main",content:"initSegment"}))}this.tick()}},u.onFragParsingData=function(t){var s=this,c=this.fragCurrent,h=t.frag;if(c&&t.id==="main"&&h.sn===c.sn&&h.level===c.level&&!(t.type==="audio"&&this.altAudio)&&this.state===ae.PARSING){var E=this.levels[this.level],b=c;if(Object(T.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+c.duration,t.endDTS=t.startDTS+c.duration),t.hasAudio===!0&&b.addElementaryStream(se.AUDIO),t.hasVideo===!0&&b.addElementaryStream(se.VIDEO),y.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),t.type==="video")if(b.dropped=t.dropped,b.dropped)if(b.backtracked)y.logger.warn("Already backtracked on this fragment, appending with the gap",b.sn);else{var C=E.details;if(C&&b.sn===C.startSN)y.logger.warn("missing video frame(s) on first frag, appending with gap",b.sn);else{y.logger.warn("missing video frame(s), backtracking fragment",b.sn),this.fragmentTracker.removeFragment(b),b.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ae.IDLE,this.fragPrevious=b,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.tick();return}}else b.backtracked=!1;var O=fe(E.details,b,t.startPTS,t.endPTS,t.startDTS,t.endDTS),P=this.hls;P.trigger(m.default.LEVEL_PTS_UPDATED,{details:E.details,level:this.level,drift:O,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(G){G&&G.length&&s.state===ae.PARSING&&(s.appended=!0,s.pendingBuffering=!0,P.trigger(m.default.BUFFER_APPENDING,{type:t.type,data:G,parent:"main",content:"data"}))}),this.tick()}},u.onFragParsed=function(t){var s=this.fragCurrent,c=t.frag;s&&t.id==="main"&&c.sn===s.sn&&c.level===s.level&&this.state===ae.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=ae.PARSED,this._checkAppendedParsed())},u.onAudioTrackSwitching=function(t){var s=this.altAudio,c=!!t.url,h=t.id;if(!c){if(this.mediaBuffer!==this.media){y.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var E=this.fragCurrent;E.loader&&(y.logger.log("switching to main audio track, cancel main fragment load"),E.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ae.IDLE}var b=this.hls;s&&b.trigger(m.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),b.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:h})}},u.onAudioTrackSwitched=function(t){var s=t.id,c=!!this.hls.audioTracks[s].url;if(c){var h=this.videoBuffer;h&&this.mediaBuffer!==h&&(y.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=h)}this.altAudio=c,this.tick()},u.onBufferCreated=function(t){var s=t.tracks,c,h,E=!1;for(var b in s){var C=s[b];C.id==="main"?(h=b,c=C,b==="video"&&(this.videoBuffer=s[b].buffer)):E=!0}E&&c?(y.logger.log("alternate track found, use "+h+".buffered to schedule main fragment loading"),this.mediaBuffer=c.buffer):this.mediaBuffer=this.media},u.onBufferAppended=function(t){if(t.parent==="main"){var s=this.state;(s===ae.PARSING||s===ae.PARSED)&&(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},u._checkAppendedParsed=function(){if(this.state===ae.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent;if(t){var s=this.mediaBuffer?this.mediaBuffer:this.media;y.logger.log("main buffered : "+Ze.toString(s.buffered)),this.fragPrevious=t;var c=this.stats;c.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*c.total/(c.tbuffered-c.tfirst)),this.hls.trigger(m.default.FRAG_BUFFERED,{stats:c,frag:t,id:"main"}),this.state=ae.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},u.onError=function(t){var s=t.frag||this.fragCurrent;if(!(s&&s.type!=="main")){var c=!!this.media&&x.isBuffered(this.media,this.media.currentTime)&&x.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var h=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);y.logger.warn("mediaController: frag loading failed, retry in "+h+" ms"),this.retryDate=window.performance.now()+h,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ae.FRAG_LOADING_WAITING_RETRY}else y.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ae.ERROR;break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==ae.ERROR&&(t.fatal?(this.state=ae.ERROR,y.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):!t.levelRetry&&this.state===ae.WAITING_LEVEL&&(this.state=ae.IDLE));break;case g.ErrorDetails.BUFFER_FULL_ERROR:t.parent==="main"&&(this.state===ae.PARSING||this.state===ae.PARSED)&&(c?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ae.IDLE):(y.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},u._reduceMaxBufferLength=function(t){var s=this.config;return s.maxMaxBufferLength>=t?(s.maxMaxBufferLength/=2,y.logger.warn("main:reduce max buffer length to "+s.maxMaxBufferLength+"s"),!0):!1},u._checkBuffer=function(){var t=this.media;if(!(!t||t.readyState===0)){var s=this.mediaBuffer?this.mediaBuffer:t,c=s.buffered;!this.loadedmetadata&&c.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,c)}},u.onFragLoadEmergencyAborted=function(){this.state=ae.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},u.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var s=this.audioOnly?se.AUDIO:se.VIDEO;this.fragmentTracker.detectEvictedFragments(s,t.buffered)}this.state=ae.IDLE,this.fragPrevious=null},u.onLevelsUpdated=function(t){this.levels=t.levels},u.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},u._seekToStartPos=function(){var t=this.media,s=t.currentTime,c=this.startPosition;if(s!==c&&c>=0){if(t.seeking){y.logger.log("could not seek to "+c+", already seeking at "+s);return}var h=t.buffered.length?t.buffered.start(0):0,E=h-c;E>0&&E<this.config.maxBufferHole&&(y.logger.log("adjusting start position by "+E+" to match buffer start"),c+=E,this.startPosition=c),y.logger.log("seek to target start position "+c+" from current time "+s+". ready state "+t.readyState),t.currentTime=c}},u._getAudioCodec=function(t){var s=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(y.logger.log("swapping playlist audio codec"),s&&(s.indexOf("mp4a.40.5")!==-1?s="mp4a.40.2":s="mp4a.40.5")),s},Ur(d,[{key:"state",set:function(t){if(this.state!==t){var s=this.state;this._state=t,y.logger.log("main stream-controller: "+s+"->"+t),this.hls.trigger(m.default.STREAM_STATE_TRANSITION,{previousState:s,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var s=this.getBufferedFrag(t.currentTime);if(s)return s.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),d}(Nt),qi=Gn;function Zi(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function ki(p,d,u){return d&&Zi(p.prototype,d),u&&Zi(p,u),p}function Qi(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Vr,Hn=function(p){Qi(d,p);function d(o){var t;return t=p.call(this,o,m.default.MANIFEST_LOADED,m.default.LEVEL_LOADED,m.default.AUDIO_TRACK_SWITCHED,m.default.FRAG_LOADED,m.default.ERROR)||this,t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,Vr=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),t}var u=d.prototype;return u.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},u.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},u.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(s){s.loadError=0;var c=s.details;c&&c.live&&(s.details=void 0)}),this.timer!==null&&this.loadLevel()},u.stopLoad=function(){this.canload=!1},u.onManifestLoaded=function(t){var s=[],c=[],h,E={},b=null,C=!1,O=!1;if(t.levels.forEach(function(J){var he=J.attrs;J.loadError=0,J.fragmentError=!1,C=C||!!J.videoCodec,O=O||!!J.audioCodec,Vr&&J.audioCodec&&J.audioCodec.indexOf("mp4a.40.34")!==-1&&(J.audioCodec=void 0),b=E[J.bitrate],b?b.url.push(J.url):(J.url=[J.url],J.urlId=0,E[J.bitrate]=J,s.push(J)),he&&(he.AUDIO&&de(b||J,"audio",he.AUDIO),he.SUBTITLES&&de(b||J,"text",he.SUBTITLES))}),C&&O&&(s=s.filter(function(J){var he=J.videoCodec;return!!he})),s=s.filter(function(J){var he=J.audioCodec,Ae=J.videoCodec;return(!he||ye(he,"audio"))&&(!Ae||ye(Ae,"video"))}),t.audioTracks&&(c=t.audioTracks.filter(function(J){return!J.audioCodec||ye(J.audioCodec,"audio")}),c.forEach(function(J,he){J.id=he})),s.length>0){h=s[0].bitrate,s.sort(function(J,he){return J.bitrate-he.bitrate}),this._levels=s;for(var P=0;P<s.length;P++)if(s[P].bitrate===h){this._firstLevel=P,y.logger.log("manifest loaded,"+s.length+" level(s) found, first bitrate:"+h);break}var G=O&&!C;this.hls.trigger(m.default.MANIFEST_PARSED,{levels:s,audioTracks:c,firstLevel:this._firstLevel,stats:t.stats,audio:O,video:C,altAudio:!G&&c.some(function(J){return!!J.url})})}else this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},u.setLevelInternal=function(t){var s=this._levels,c=this.hls;if(t>=0&&t<s.length){if(this.clearTimer(),this.currentLevelIndex!==t){y.logger.log("switching to level "+t),this.currentLevelIndex=t;var h=s[t];h.level=t,c.trigger(m.default.LEVEL_SWITCHING,h)}var E=s[t],b=E.details;if(!b||b.live){var C=E.urlId;c.trigger(m.default.LEVEL_LOADING,{url:E.url[C],level:t,id:C})}}else c.trigger(m.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},u.onError=function(t){if(t.fatal){t.type===g.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var s=!1,c=!1,h;switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:h=t.frag.level,c=!0;break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:h=t.context.level,s=!0;break;case g.ErrorDetails.REMUX_ALLOC_ERROR:h=t.level,s=!0;break}h!==void 0&&this.recoverLevel(t,h,s,c)},u.recoverLevel=function(t,s,c,h){var E=this,b=this.hls.config,C=t.details,O=this._levels[s],P,G,J;if(O.loadError++,O.fragmentError=h,c)if(this.levelRetryCount+1<=b.levelLoadingMaxRetry)G=Math.min(Math.pow(2,this.levelRetryCount)*b.levelLoadingRetryDelay,b.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return E.loadLevel()},G),t.levelRetry=!0,this.levelRetryCount++,y.logger.warn("level controller, "+C+", retry in "+G+" ms, current retry count is "+this.levelRetryCount);else{y.logger.error("level controller, cannot recover from "+C+" error"),this.currentLevelIndex=null,this.clearTimer(),t.fatal=!0;return}(c||h)&&(P=O.url.length,P>1&&O.loadError<P?(O.urlId=(O.urlId+1)%P,O.details=void 0,y.logger.warn("level controller, "+C+" for level "+s+": switching to redundant URL-id "+O.urlId)):this.manualLevelIndex===-1?(J=s===0?this._levels.length-1:s-1,y.logger.warn("level controller, "+C+": switch to "+J),this.hls.nextAutoLevel=this.currentLevelIndex=J):h&&(y.logger.warn("level controller, "+C+": reload a fragment"),this.currentLevelIndex=null))},u.onFragLoaded=function(t){var s=t.frag;if(s!==void 0&&s.type==="main"){var c=this._levels[s.level];c!==void 0&&(c.fragmentError=!1,c.loadError=0,this.levelRetryCount=0)}},u.onLevelLoaded=function(t){var s=this,c=t.level,h=t.details;if(c===this.currentLevelIndex){var E=this._levels[c];if(E.fragmentError||(E.loadError=0,this.levelRetryCount=0),h.live){var b=Ke(E.details,h,t.stats.trequest);y.logger.log("live playlist, reload in "+Math.round(b)+" ms"),this.timer=setTimeout(function(){return s.loadLevel()},b)}else this.clearTimer()}},u.onAudioTrackSwitched=function(t){var s=this.hls.audioTracks[t.id].groupId,c=this.hls.levels[this.currentLevelIndex];if(c&&c.audioGroupIds){for(var h=-1,E=0;E<c.audioGroupIds.length;E++)if(c.audioGroupIds[E]===s){h=E;break}h!==c.urlId&&(c.urlId=h,this.startLoad())}},u.loadLevel=function(){if(y.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var t=this._levels[this.currentLevelIndex];if(typeof t=="object"&&t.url.length>0){var s=this.currentLevelIndex,c=t.urlId,h=t.url[c];y.logger.log("Attempt loading level index "+s+" with URL-id "+c),this.hls.trigger(m.default.LEVEL_LOADING,{url:h,level:s,id:c})}}},u.removeLevel=function(t,s){var c=this.levels.filter(function(h,E){return E!==t?!0:h.url.length>1&&s!==void 0?(h.url=h.url.filter(function(b,C){return C!==s}),h.urlId=0,!0):!1}).map(function(h,E){var b=h.details;return b&&b.fragments&&b.fragments.forEach(function(C){C.level=E}),h});this._levels=c,this.hls.trigger(m.default.LEVELS_UPDATED,{levels:c})},ki(d,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var s=this._levels;s&&(t=Math.min(t,s.length-1),(this.currentLevelIndex!==t||!s[t].details)&&this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var t=this.hls.config.startLevel;return t!==void 0?t:this._firstLevel}else return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}]),d}(I),Ci=r("./src/demux/id3.js");function ni(p,d){var u;try{u=new Event("addtrack")}catch{u=document.createEvent("Event"),u.initEvent("addtrack",!1,!1)}u.track=p,d.dispatchEvent(u)}function Kr(p){if(p!=null&&p.cues)for(;p.cues.length>0;)p.removeCue(p.cues[0])}function Ji(p,d){if(d<p[0].endTime)return p[0];if(d>p[p.length-1].endTime)return p[p.length-1];for(var u=0,o=p.length-1;u<=o;){var t=Math.floor((o+u)/2);if(d<p[t].endTime)o=t-1;else if(d>p[t].endTime)u=t+1;else return p[t]}return p[u].endTime-d<d-p[o].endTime?p[u]:p[o]}function en(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ai=.25,Ri=function(p){en(d,p);function d(o){var t;return t=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.FRAG_PARSING_METADATA,m.default.LIVE_BACK_BUFFER_REACHED)||this,t.id3Track=void 0,t.media=void 0,t}var u=d.prototype;return u.destroy=function(){I.prototype.destroy.call(this)},u.onMediaAttached=function(t){this.media=t.media,this.media},u.onMediaDetaching=function(){Kr(this.id3Track),this.id3Track=void 0,this.media=void 0},u.getID3Track=function(t){for(var s=0;s<t.length;s++){var c=t[s];if(c.kind==="metadata"&&c.label==="id3")return ni(c,this.media),c}return this.media.addTextTrack("metadata","id3")},u.onFragParsingMetadata=function(t){var s=t.frag,c=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var h=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,E=0;E<c.length;E++){var b=Ci.default.getID3Frames(c[E].data);if(b){var C=Math.max(c[E].pts,0),O=E<c.length-1?c[E+1].pts:s.endPTS;O||(O=s.start+s.duration);var P=O-C;P<=0&&(O=C+ai);for(var G=0;G<b.length;G++){var J=b[G];if(!Ci.default.isTimeStampFrame(J)){var he=new h(C,O,"");he.value=J,this.id3Track.addCue(he)}}}}},u.onLiveBackBufferReached=function(t){var s=t.bufferEnd,c=this.id3Track;if(!(!c||!c.cues||!c.cues.length)){var h=Ji(c.cues,s);if(h)for(;c.cues[0]!==h;)c.removeCue(c.cues[0])}},d}(I),jn=Ri;function Yn(){var p=D();if(!p)return!1;var d=self.SourceBuffer||self.WebKitSourceBuffer,u=p&&typeof p.isTypeSupported=="function"&&p.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),o=!d||d.prototype&&typeof d.prototype.appendBuffer=="function"&&typeof d.prototype.remove=="function";return!!u&&!!o}var tu=function(){function p(u){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=u?Math.exp(Math.log(.5)/u):0,this.estimate_=0,this.totalWeight_=0}var d=p.prototype;return d.sample=function(o,t){var s=Math.pow(this.alpha_,o);this.estimate_=t*(1-s)+s*this.estimate_,this.totalWeight_+=o},d.getTotalWeight=function(){return this.totalWeight_},d.getEstimate=function(){if(this.alpha_){var o=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/o}else return this.estimate_},p}(),rs=tu,ru=function(){function p(u,o,t,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=u,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new rs(o),this.fast_=new rs(t)}var d=p.prototype;return d.sample=function(o,t){o=Math.max(o,this.minDelayMs_);var s=8*t,c=o/1e3,h=s/c;this.fast_.sample(c,h),this.slow_.sample(c,h)},d.canEstimate=function(){var o=this.fast_;return o&&o.getTotalWeight()>=this.minWeight_},d.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},d.destroy=function(){},p}(),iu=ru;function is(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function nu(p,d,u){return d&&is(p.prototype,d),u&&is(p,u),p}function au(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function su(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ou=window,lu=ou.performance,uu=function(p){su(d,p);function d(o){var t;return t=p.call(this,o,m.default.FRAG_LOADING,m.default.FRAG_LOADED,m.default.FRAG_BUFFERED,m.default.ERROR)||this,t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=o,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(au(t)),t}var u=d.prototype;return u.destroy=function(){this.clearTimer(),I.prototype.destroy.call(this)},u.onFragLoading=function(t){var s=t.frag;if(s.type==="main"&&(this.timer||(this.fragCurrent=s,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var c=this.hls,h=c.config,E=s.level,b=c.levels[E].details.live,C,O;b?(C=h.abrEwmaFastLive,O=h.abrEwmaSlowLive):(C=h.abrEwmaFastVoD,O=h.abrEwmaSlowVoD),this._bwEstimator=new iu(c,O,C,h.abrEwmaDefaultEstimate)}},u._abandonRulesCheck=function(){var t=this.hls,s=t.media,c=this.fragCurrent;if(c){var h=c.loader;if(!h||h.stats&&h.stats.aborted){y.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var E=h.stats;if(s&&E&&(!s.paused&&s.playbackRate!==0||!s.readyState)&&c.autoLevel&&c.level){var b=lu.now()-E.trequest,C=Math.abs(s.playbackRate);if(b>500*c.duration/C){var O=t.levels,P=Math.max(1,E.bw?E.bw/8:E.loaded*1e3/b),G=O[c.level];if(!G)return;var J=G.realBitrate?Math.max(G.realBitrate,G.bitrate):G.bitrate,he=E.total?E.total:Math.max(E.loaded,Math.round(c.duration*J/8)),Ae=s.currentTime,Le=(he-E.loaded)/P,Re=(x.bufferInfo(s,Ae,t.config.maxBufferHole).end-Ae)/C;if(Re<2*c.duration/C&&Le>Re){var Fe=t.minAutoLevel,Ue,Xe;for(Xe=c.level-1;Xe>Fe;Xe--){var gt=O[Xe].realBitrate?Math.max(O[Xe].realBitrate,O[Xe].bitrate):O[Xe].bitrate,Gt=c.duration*gt/(8*.8*P);if(Gt<Re)break}Ue<Le&&(y.logger.warn("loading too slow, abort fragment loading and switch to level "+Xe+":fragLoadedDelay["+Xe+"]<fragLoadedDelay["+(c.level-1)+"];bufferStarvationDelay:"+Ue.toFixed(1)+"<"+Le.toFixed(1)+":"+Re.toFixed(1)),t.nextLoadLevel=Xe,this._bwEstimator.sample(b,E.loaded),h.abort(),this.clearTimer(),t.trigger(m.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:c,stats:E}))}}}}},u.onFragLoaded=function(t){var s=t.frag;if(s.type==="main"&&Object(T.isFiniteNumber)(s.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=s.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var c=this.hls.levels[s.level],h=(c.loaded?c.loaded.bytes:0)+t.stats.loaded,E=(c.loaded?c.loaded.duration:0)+t.frag.duration;c.loaded={bytes:h,duration:E},c.realBitrate=Math.round(8*h/E)}if(t.frag.bitrateTest){var b=t.stats;b.tparsed=b.tbuffered=b.tload,this.onFragBuffered(t)}}},u.onFragBuffered=function(t){var s=t.stats,c=t.frag;if(s.aborted!==!0&&c.type==="main"&&Object(T.isFiniteNumber)(c.sn)&&(!c.bitrateTest||s.tload===s.tbuffered)){var h=s.tparsed-s.trequest;y.logger.log("latency/loading/parsing/append/kbps:"+Math.round(s.tfirst-s.trequest)+"/"+Math.round(s.tload-s.tfirst)+"/"+Math.round(s.tparsed-s.tload)+"/"+Math.round(s.tbuffered-s.tparsed)+"/"+Math.round(8*s.loaded/(s.tbuffered-s.trequest))),this._bwEstimator.sample(h,s.loaded),s.bwEstimate=this._bwEstimator.getEstimate(),c.bitrateTest?this.bitrateTestDelay=h/1e3:this.bitrateTestDelay=0}},u.onError=function(t){switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},u.clearTimer=function(){clearInterval(this.timer),this.timer=null},u._findBestLevel=function(t,s,c,h,E,b,C,O,P){for(var G=E;G>=h;G--){var J=P[G];if(J){var he=J.details,Ae=he?he.totalduration/he.fragments.length:s,Le=he?he.live:!1,Re=void 0;G<=t?Re=C*c:Re=O*c;var Fe=P[G].realBitrate?Math.max(P[G].realBitrate,P[G].bitrate):P[G].bitrate,Ue=Fe*Ae/Re;if(y.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+G+"/"+Math.round(Re)+"/"+Fe+"/"+Ae+"/"+b+"/"+Ue),Re>Fe&&(!Ue||Le&&!this.bitrateTestDelay||Ue<b))return G}}return-1},nu(d,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,s=this._bwEstimator;if(t!==-1&&(!s||!s.canEstimate()))return t;var c=this._nextABRAutoLevel;return t!==-1&&(c=Math.min(t,c)),c},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,s=t.maxAutoLevel,c=t.levels,h=t.config,E=t.minAutoLevel,b=t.media,C=this.lastLoadedFragLevel,O=this.fragCurrent?this.fragCurrent.duration:0,P=b?b.currentTime:0,G=b&&b.playbackRate!==0?Math.abs(b.playbackRate):1,J=this._bwEstimator?this._bwEstimator.getEstimate():h.abrEwmaDefaultEstimate,he=(x.bufferInfo(b,P,h.maxBufferHole).end-P)/G,Ae=this._findBestLevel(C,O,J,E,s,he,h.abrBandWidthFactor,h.abrBandWidthUpFactor,c);if(Ae>=0)return Ae;y.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var Le=O?Math.min(O,h.maxStarvationDelay):h.maxStarvationDelay,Re=h.abrBandWidthFactor,Fe=h.abrBandWidthUpFactor;if(he===0){var Ue=this.bitrateTestDelay;if(Ue){var Xe=O?Math.min(O,h.maxLoadingDelay):h.maxLoadingDelay;Le=Xe-Ue,y.logger.trace("bitrate test took "+Math.round(1e3*Ue)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*Le)+" ms"),Re=Fe=1}}return Ae=this._findBestLevel(C,O,J,E,s,he+Le,Re,Fe,c),Math.max(Ae,0)}}]),d}(I),cu=uu;function fu(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ns=D(),du=function(p){fu(d,p);function d(o){var t;return t=p.call(this,o,m.default.MEDIA_ATTACHING,m.default.MEDIA_DETACHING,m.default.MANIFEST_PARSED,m.default.BUFFER_RESET,m.default.BUFFER_APPENDING,m.default.BUFFER_CODECS,m.default.BUFFER_EOS,m.default.BUFFER_FLUSHING,m.default.LEVEL_PTS_UPDATED,m.default.LEVEL_UPDATED)||this,t._msDuration=null,t._levelDuration=null,t._levelTargetDuration=10,t._live=null,t._objectUrl=null,t._needsFlush=!1,t._needsEos=!1,t.config=void 0,t.audioTimestampOffset=void 0,t.bufferCodecEventsExpected=0,t._bufferCodecEventsTotal=0,t.media=null,t.mediaSource=null,t.segments=[],t.parent=void 0,t.appending=!1,t.appended=0,t.appendError=0,t.flushBufferCounter=0,t.tracks={},t.pendingTracks={},t.sourceBuffer={},t.flushRange=[],t._onMediaSourceOpen=function(){y.logger.log("media source opened"),t.hls.trigger(m.default.MEDIA_ATTACHED,{media:t.media});var s=t.mediaSource;s&&s.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},t._onMediaSourceClose=function(){y.logger.log("media source closed")},t._onMediaSourceEnded=function(){y.logger.log("media source ended")},t._onSBUpdateEnd=function(){if(t.audioTimestampOffset&&t.sourceBuffer.audio){var s=t.sourceBuffer.audio;y.logger.warn("change mpeg audio timestamp offset from "+s.timestampOffset+" to "+t.audioTimestampOffset),s.timestampOffset=t.audioTimestampOffset,delete t.audioTimestampOffset}t._needsFlush&&t.doFlush(),t._needsEos&&t.checkEos(),t.appending=!1;var c=t.parent,h=t.segments.reduce(function(P,G){return G.parent===c?P+1:P},0),E={},b=t.sourceBuffer;for(var C in b){var O=b[C];if(!O)throw Error("handling source buffer update end error: source buffer for "+C+" uninitilized and unable to update buffered TimeRanges.");E[C]=O.buffered}t.hls.trigger(m.default.BUFFER_APPENDED,{parent:c,pending:h,timeRanges:E}),t._needsFlush||t.doAppending(),t.updateMediaElementDuration(),h===0&&t.flushLiveBackBuffer()},t._onSBUpdateError=function(s){y.logger.error("sourceBuffer error:",s),t.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},t.config=o.config,t}var u=d.prototype;return u.destroy=function(){I.prototype.destroy.call(this)},u.onLevelPtsUpdated=function(t){var s=t.type,c=this.tracks.audio;if(s==="audio"&&c&&c.container==="audio/mpeg"){var h=this.sourceBuffer.audio;if(!h)throw Error("Level PTS Updated and source buffer for audio uninitalized");var E=Math.abs(h.timestampOffset-t.start);if(E>.1){var b=h.updating;try{h.abort()}catch(C){y.logger.warn("can not abort audio buffer: "+C)}b?this.audioTimestampOffset=t.start:(y.logger.warn("change mpeg audio timestamp offset from "+h.timestampOffset+" to "+t.start),h.timestampOffset=t.start)}}},u.onManifestParsed=function(t){var s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=s,y.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},u.onMediaAttaching=function(t){var s=this.media=t.media;if(s&&ns){var c=this.mediaSource=new ns;c.addEventListener("sourceopen",this._onMediaSourceOpen),c.addEventListener("sourceended",this._onMediaSourceEnded),c.addEventListener("sourceclose",this._onMediaSourceClose),s.src=window.URL.createObjectURL(c),this._objectUrl=s.src}},u.onMediaDetaching=function(){y.logger.log("media source detaching");var t=this.mediaSource;if(t){if(t.readyState==="open")try{t.endOfStream()}catch(s){y.logger.warn("onMediaDetaching:"+s.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):y.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(m.default.MEDIA_DETACHED)},u.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,s=this.pendingTracks,c=Object.keys(s).length;(c&&!t||c===2)&&(this.createSourceBuffers(s),this.pendingTracks={},this.doAppending())},u.onBufferReset=function(){var t=this.sourceBuffer;for(var s in t){var c=t[s];try{c&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(c),c.removeEventListener("updateend",this._onSBUpdateEnd),c.removeEventListener("error",this._onSBUpdateError))}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},u.onBufferCodecs=function(t){var s=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(c){s.pendingTracks[c]=t[c]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},u.createSourceBuffers=function(t){var s=this.sourceBuffer,c=this.mediaSource;if(!c)throw Error("createSourceBuffers called when mediaSource was null");for(var h in t)if(!s[h]){var E=t[h];if(!E)throw Error("source buffer exists for track "+h+", however track does not");var b=E.levelCodec||E.codec,C=E.container+";codecs="+b;y.logger.log("creating sourceBuffer("+C+")");try{var O=s[h]=c.addSourceBuffer(C);O.addEventListener("updateend",this._onSBUpdateEnd),O.addEventListener("error",this._onSBUpdateError),this.tracks[h]={buffer:O,codec:b,id:E.id,container:E.container,levelCodec:E.levelCodec}}catch(P){y.logger.error("error while trying to add sourceBuffer:"+P.message),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:P,mimeType:C})}}this.hls.trigger(m.default.BUFFER_CREATED,{tracks:this.tracks})},u.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},u.onBufferEos=function(t){for(var s in this.sourceBuffer)if(!t.type||t.type===s){var c=this.sourceBuffer[s];c&&!c.ended&&(c.ended=!0,y.logger.log(s+" sourceBuffer now EOS"))}this.checkEos()},u.checkEos=function(){var t=this.sourceBuffer,s=this.mediaSource;if(!s||s.readyState!=="open"){this._needsEos=!1;return}for(var c in t){var h=t[c];if(h){if(!h.ended)return;if(h.updating){this._needsEos=!0;return}}}y.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{s.endOfStream()}catch{y.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},u.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},u.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(!(!isFinite(t)||t<0)){if(!this.media){y.logger.error("flushLiveBackBuffer called without attaching media");return}for(var s=this.media.currentTime,c=this.sourceBuffer,h=Object.keys(c),E=s-Math.max(t,this._levelTargetDuration),b=h.length-1;b>=0;b--){var C=h[b],O=c[C];if(O){var P=O.buffered;P.length>0&&E>P.start(0)&&this.removeBufferRange(C,O,0,E)&&this.hls.trigger(m.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:E})}}}}},u.onLevelUpdated=function(t){var s=t.details;s.fragments.length>0&&(this._levelDuration=s.totalduration+s.fragments[0].start,this._levelTargetDuration=s.averagetargetduration||s.targetduration||10,this._live=s.live,this.updateMediaElementDuration())},u.updateMediaElementDuration=function(){var t=this.config,s;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var c in this.sourceBuffer){var h=this.sourceBuffer[c];if(h&&h.updating===!0)return}s=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&t.liveDurationInfinity===!0?(y.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>s||!Object(T.isFiniteNumber)(s))&&(y.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},u.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(this.flushBuffer(t.start,t.end,t.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var s=0,c=this.sourceBuffer;try{for(var h in c){var E=c[h];E&&(s+=E.buffered.length)}}catch{y.logger.error("error while accessing sourceBuffer.buffered")}this.appended=s,this.hls.trigger(m.default.BUFFER_FLUSHED)}},u.doAppending=function(){var t=this.config,s=this.hls,c=this.segments,h=this.sourceBuffer;if(Object.keys(h).length){if(!this.media||this.media.error){this.segments=[],y.logger.error("trying to append although a media error occured, flush segment and abort");return}if(!this.appending){var E=c.shift();if(E)try{var b=h[E.type];if(!b){this._onSBUpdateEnd();return}if(b.updating){c.unshift(E);return}b.ended=!1,this.parent=E.parent,b.appendBuffer(E.data),this.appendError=0,this.appended++,this.appending=!0}catch(O){y.logger.error("error while trying to append buffer:"+O.message),c.unshift(E);var C={type:g.ErrorTypes.MEDIA_ERROR,parent:E.parent,details:"",fatal:!1};O.code===22?(this.segments=[],C.details=g.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,C.details=g.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(y.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],C.fatal=!0)),s.trigger(m.default.ERROR,C)}}}},u.flushBuffer=function(t,s,c){var h=this.sourceBuffer;if(!Object.keys(h).length)return!0;var E="null";if(this.media&&(E=this.media.currentTime.toFixed(3)),y.logger.log("flushBuffer,pos/start/end: "+E+"/"+t+"/"+s),this.flushBufferCounter>=this.appended)return y.logger.warn("abort flushing too many retries"),!0;var b=h[c];if(b){if(b.ended=!1,b.updating)return y.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(c,b,t,s))return this.flushBufferCounter++,!1}return y.logger.log("buffer flushed"),!0},u.removeBufferRange=function(t,s,c,h){try{for(var E=0;E<s.buffered.length;E++){var b=s.buffered.start(E),C=s.buffered.end(E),O=Math.max(b,c),P=Math.min(C,h);if(Math.min(P,C)-O>.5){var G="null";return this.media&&(G=this.media.currentTime.toString()),y.logger.log("sb remove "+t+" ["+O+","+P+"], of ["+b+","+C+"], pos:"+G),s.remove(O,P),!0}}}catch(J){y.logger.warn("removeBufferRange failed",J)}return!1},d}(I),hu=du;function as(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function gu(p,d,u){return d&&as(p.prototype,d),u&&as(p,u),p}function pu(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var vu=function(p){pu(d,p);function d(o){var t;return t=p.call(this,o,m.default.FPS_DROP_LEVEL_CAPPING,m.default.MEDIA_ATTACHING,m.default.MANIFEST_PARSED,m.default.LEVELS_UPDATED,m.default.BUFFER_CODECS,m.default.MEDIA_DETACHING)||this,t.autoLevelCapping=Number.POSITIVE_INFINITY,t.firstLevel=null,t.levels=[],t.media=null,t.restrictedLevels=[],t.timer=null,t.clientRect=null,t}var u=d.prototype;return u.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},u.onFpsDropLevelCapping=function(t){d.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},u.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},u.onManifestParsed=function(t){var s=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,s.config.capLevelToPlayerSize&&t.video&&this.startCapping()},u.onBufferCodecs=function(t){var s=this.hls;s.config.capLevelToPlayerSize&&t.video&&this.startCapping()},u.onLevelsUpdated=function(t){this.levels=t.levels},u.onMediaDetaching=function(){this.stopCapping()},u.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var s=this.hls;s.autoLevelCapping=this.getMaxLevel(t-1),s.autoLevelCapping>this.autoLevelCapping&&s.streamController.nextLevelSwitch(),this.autoLevelCapping=s.autoLevelCapping}}},u.getMaxLevel=function(t){var s=this;if(!this.levels)return-1;var c=this.levels.filter(function(h,E){return d.isLevelAllowed(E,s.restrictedLevels)&&E<=t});return this.clientRect=null,d.getMaxLevelByMediaSize(c,this.mediaWidth,this.mediaHeight)},u.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},u.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},u.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,s={width:0,height:0};if(t){var c=t.getBoundingClientRect();s.width=c.width,s.height=c.height,!s.width&&!s.height&&(s.width=c.right-c.left||t.width||0,s.height=c.bottom-c.top||t.height||0)}return this.clientRect=s,s},d.isLevelAllowed=function(t,s){return s===void 0&&(s=[]),s.indexOf(t)===-1},d.getMaxLevelByMediaSize=function(t,s,c){if(!t||t&&!t.length)return-1;for(var h=function(P,G){return G?P.width!==G.width||P.height!==G.height:!0},E=t.length-1,b=0;b<t.length;b+=1){var C=t[b];if((C.width>=s||C.height>=c)&&h(C,t[b+1])){E=b;break}}return E},gu(d,[{key:"mediaWidth",get:function(){return this.getDimensions().width*d.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*d.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch{}return t}}]),d}(I),mu=vu;function yu(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Au=window,Eu=Au.performance,_u=function(p){yu(d,p);function d(o){return p.call(this,o,m.default.MEDIA_ATTACHING)||this}var u=d.prototype;return u.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},u.onMediaAttaching=function(t){var s=this.hls.config;if(s.capLevelOnFPSDrop){var c=this.video=t.media instanceof window.HTMLVideoElement?t.media:null;typeof c.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),s.fpsDroppedMonitoringPeriod)}},u.checkFPS=function(t,s,c){var h=Eu.now();if(s){if(this.lastTime){var E=h-this.lastTime,b=c-this.lastDroppedFrames,C=s-this.lastDecodedFrames,O=1e3*b/E,P=this.hls;if(P.trigger(m.default.FPS_DROP,{currentDropped:b,currentDecoded:C,totalDroppedFrames:c}),O>0&&b>P.config.fpsDroppedMonitoringThreshold*C){var G=P.currentLevel;y.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+G),G>0&&(P.autoLevelCapping===-1||P.autoLevelCapping>=G)&&(G=G-1,P.trigger(m.default.FPS_DROP_LEVEL_CAPPING,{level:G,droppedLevel:P.currentLevel}),P.autoLevelCapping=G,P.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=c,this.lastDecodedFrames=s}},u.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var s=t.getVideoPlaybackQuality();this.checkFPS(t,s.totalVideoFrames,s.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},d}(I),bu=_u,Tu=function(){function p(u){u&&u.xhrSetup&&(this.xhrSetup=u.xhrSetup)}var d=p.prototype;return d.destroy=function(){this.abort(),this.loader=null},d.abort=function(){var o=this.loader;o&&o.readyState!==4&&(this.stats.aborted=!0,o.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},d.load=function(o,t,s){this.context=o,this.config=t,this.callbacks=s,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},d.loadInternal=function(){var o,t=this.context;o=this.loader=new window.XMLHttpRequest;var s=this.stats;s.tfirst=0,s.loaded=0;var c=this.xhrSetup;try{if(c)try{c(o,t.url)}catch{o.open("GET",t.url,!0),c(o,t.url)}o.readyState||o.open("GET",t.url,!0)}catch(h){this.callbacks.onError({code:o.status,text:h.message},t,o);return}t.rangeEnd&&o.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),o.onreadystatechange=this.readystatechange.bind(this),o.onprogress=this.loadprogress.bind(this),o.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),o.send()},d.readystatechange=function(o){var t=o.currentTarget,s=t.readyState,c=this.stats,h=this.context,E=this.config;if(!c.aborted&&s>=2)if(window.clearTimeout(this.requestTimeout),c.tfirst===0&&(c.tfirst=Math.max(window.performance.now(),c.trequest)),s===4){var b=t.status;if(b>=200&&b<300){c.tload=Math.max(c.tfirst,window.performance.now());var C,O;h.responseType==="arraybuffer"?(C=t.response,O=C.byteLength):(C=t.responseText,O=C.length),c.loaded=c.total=O;var P={url:t.responseURL,data:C};this.callbacks.onSuccess(P,c,h,t)}else c.retry>=E.maxRetry||b>=400&&b<499?(y.logger.error(b+" while loading "+h.url),this.callbacks.onError({code:b,text:t.statusText},h,t)):(y.logger.warn(b+" while loading "+h.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,E.maxRetryDelay),c.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),E.timeout)},d.loadtimeout=function(){y.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},d.loadprogress=function(o){var t=o.currentTarget,s=this.stats;s.loaded=o.loaded,o.lengthComputable&&(s.total=o.total);var c=this.callbacks.onProgress;c&&c(s,this.context,null,t)},p}(),xu=Tu;function ss(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function Su(p,d,u){return d&&ss(p.prototype,d),u&&ss(p,u),p}function ku(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Cu=function(p){ku(d,p);function d(o){var t;return t=p.call(this,o,m.default.MANIFEST_LOADING,m.default.MANIFEST_PARSED,m.default.AUDIO_TRACK_LOADED,m.default.AUDIO_TRACK_SWITCHED,m.default.LEVEL_LOADED,m.default.ERROR)||this,t._trackId=-1,t._selectDefaultTrack=!0,t.tracks=[],t.trackIdBlacklist=Object.create(null),t.audioGroupId=null,t}var u=d.prototype;return u.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},u.onManifestParsed=function(t){var s=this.tracks=t.audioTracks||[];this.hls.trigger(m.default.AUDIO_TRACKS_UPDATED,{audioTracks:s}),this._selectAudioGroup(this.hls.nextLoadLevel)},u.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length){y.logger.warn("Invalid audio track id:",t.id);return}if(y.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var s=t.details.targetduration*1e3;this.setInterval(s)}!t.details.live&&this.hasInterval()&&this.clearInterval()},u.onAudioTrackSwitched=function(t){var s=this.tracks[t.id].groupId;s&&this.audioGroupId!==s&&(this.audioGroupId=s)},u.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},u.onError=function(t){t.type===g.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(y.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},u._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details){y.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(t<0||t>=this.tracks.length){y.logger.warn("Invalid id passed to audio-track controller");return}var s=this.tracks[t];y.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var c=s.url,h=s.type,E=s.id;this.hls.trigger(m.default.AUDIO_TRACK_SWITCHING,{id:E,type:h,url:c}),this._loadTrackDetailsIfNeeded(s)},u.doTick=function(){this._updateTrack(this._trackId)},u._selectAudioGroup=function(t){var s=this.hls.levels[t];if(!(!s||!s.audioGroupIds)){var c=s.audioGroupIds[s.urlId];this.audioGroupId!==c&&(this.audioGroupId=c,this._selectInitialAudioTrack())}},u._selectInitialAudioTrack=function(){var t=this,s=this.tracks;if(s.length){var c=this.tracks[this._trackId],h=null;if(c&&(h=c.name),this._selectDefaultTrack){var E=s.filter(function(O){return O.default});E.length?s=E:y.logger.warn("No default audio tracks defined")}var b=!1,C=function(){s.forEach(function(P){b||(!t.audioGroupId||P.groupId===t.audioGroupId)&&(!h||h===P.name)&&(t._setAudioTrack(P.id),b=!0)})};C(),b||(h=null,C()),b||(y.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},u._needsTrackLoading=function(t){var s=t.details,c=t.url;return!s||s.live?!!c:!1},u._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var s=t.url,c=t.id;y.logger.log("loading audio-track playlist for id: "+c),this.hls.trigger(m.default.AUDIO_TRACK_LOADING,{url:s,id:c})}},u._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,y.logger.log("trying to update audio-track "+t);var s=this.tracks[t];this._loadTrackDetailsIfNeeded(s)}},u._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,s=this.tracks[t],c=s.name,h=s.language,E=s.groupId;y.logger.warn("Loading failed on audio track id: "+t+", group-id: "+E+', name/language: "'+c+'" / "'+h+'"');for(var b=t,C=0;C<this.tracks.length;C++)if(!this.trackIdBlacklist[C]){var O=this.tracks[C];if(O.name===c){b=C;break}}if(b===t){y.logger.warn('No fallback audio-track found for name/language: "'+c+'" / "'+h+'"');return}y.logger.log("Attempting audio-track fallback id:",b,"group-id:",this.tracks[b].groupId),this._setAudioTrack(b)},Su(d,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),d}(ur),Ru=Cu;function os(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function wu(p,d,u){return d&&os(p.prototype,d),u&&os(p,u),p}function Lu(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Iu=window,wi=Iu.performance,ls=100,Ou=function(p){Lu(d,p);function d(o,t){var s;return s=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.AUDIO_TRACKS_UPDATED,m.default.AUDIO_TRACK_SWITCHING,m.default.AUDIO_TRACK_LOADED,m.default.KEY_LOADED,m.default.FRAG_LOADED,m.default.FRAG_PARSING_INIT_SEGMENT,m.default.FRAG_PARSING_DATA,m.default.FRAG_PARSED,m.default.ERROR,m.default.BUFFER_RESET,m.default.BUFFER_CREATED,m.default.BUFFER_APPENDED,m.default.BUFFER_FLUSHED,m.default.INIT_PTS_FOUND)||this,s.fragmentTracker=t,s.config=o.config,s.audioCodecSwap=!1,s._state=ae.STOPPED,s.initPTS=[],s.waitingFragment=null,s.videoTrackCC=null,s.waitingVideoCC=null,s}var u=d.prototype;return u.onInitPtsFound=function(t){var s=t.id,c=t.frag.cc,h=t.initPTS;s==="main"&&(this.initPTS[c]=h,this.videoTrackCC=c,y.logger.log("InitPTS for cc: "+c+" found from main: "+h),this.state===ae.WAITING_INIT_PTS&&this.tick())},u.startLoad=function(t){if(this.tracks){var s=this.lastCurrentTime;this.stopLoad(),this.setInterval(ls),this.fragLoadError=0,s>0&&t===-1?(y.logger.log("audio:override startPosition with lastCurrentTime @"+s.toFixed(3)),this.state=ae.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=ae.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=ae.STOPPED},u.doTick=function(){var t,s,c,h=this.hls,E=h.config;switch(this.state){case ae.ERROR:case ae.PAUSED:case ae.BUFFER_FLUSHING:break;case ae.STARTING:this.state=ae.WAITING_TRACK,this.loadedmetadata=!1;break;case ae.IDLE:var b=this.tracks;if(!b||!this.media&&(this.startFragRequested||!E.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(t=this.nextLoadPosition,t===void 0)break;var C=this.mediaBuffer?this.mediaBuffer:this.media,O=this.videoBuffer?this.videoBuffer:this.media,P=t<E.maxBufferHole?Math.max(Mt,E.maxBufferHole):E.maxBufferHole,G=x.bufferInfo(C,t,P),J=x.bufferInfo(O,t,P),he=G.len,Ae=G.end,Le=this.fragPrevious,Re=Math.min(E.maxBufferLength,E.maxMaxBufferLength),Fe=Math.max(Re,J.len),Ue=this.audioSwitch,Xe=this.trackId;if((he<Fe||Ue)&&Xe<b.length){if(c=b[Xe].details,typeof c>"u"){this.state=ae.WAITING_TRACK;break}if(!Ue&&this._streamEnded(G,c)){this.hls.trigger(m.default.BUFFER_EOS,{type:"audio"}),this.state=ae.ENDED;return}var gt=c.fragments,Gt=gt.length,Ct=gt[0].start,yr=gt[Gt-1].start+gt[Gt-1].duration,Oe;if(Ue){if(c.live&&!c.PTSKnown)y.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),Ae=0;else if(Ae=t,c.PTSKnown&&t<Ct)if(G.end>Ct||G.nextStart)y.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=Ct+.05;else return}if(c.initSegment&&!c.initSegment.data)Oe=c.initSegment;else if(Ae<=Ct){if(Oe=gt[0],this.videoTrackCC!==null&&Oe.cc!==this.videoTrackCC&&(Oe=et(gt,this.videoTrackCC)),c.live&&Oe.loadIdx&&Oe.loadIdx===this.fragLoadIdx){var Ge=G.nextStart?G.nextStart:Ct;y.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(Ge+.05)),this.media.currentTime=Ge+.05;return}}else{var mt,li=E.maxFragLookUpTolerance,ui=Le?gt[Le.sn-gt[0].sn+1]:void 0;Ae<yr?(Ae>yr-li&&(li=0),ui&&!lt(Ae,li,ui)?mt=ui:mt=R.search(gt,function(kc){return lt(Ae,li,kc)})):mt=gt[Gt-1],mt&&(Oe=mt,Ct=mt.start,Le&&Oe.level===Le.level&&Oe.sn===Le.sn&&(Oe.sn<c.endSN?(Oe=gt[Oe.sn+1-c.startSN],this.fragmentTracker.getState(Oe)!==A.OK&&y.logger.log("SN just loaded, load next one: "+Oe.sn)):Oe=null))}Oe&&(Oe.encrypted?(y.logger.log("Loading key for "+Oe.sn+" of ["+c.startSN+" ,"+c.endSN+"],track "+Xe),this.state=ae.KEY_LOADING,h.trigger(m.default.KEY_LOADING,{frag:Oe})):(this.fragCurrent=Oe,(Ue||this.fragmentTracker.getState(Oe)===A.NOT_LOADED)&&(y.logger.log("Loading "+Oe.sn+", cc: "+Oe.cc+" of ["+c.startSN+" ,"+c.endSN+"],track "+Xe+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+Ae.toFixed(3)),Oe.sn!=="initSegment"&&(this.startFragRequested=!0),Object(T.isFiniteNumber)(Oe.sn)&&(this.nextLoadPosition=Oe.start+Oe.duration),h.trigger(m.default.FRAG_LOADING,{frag:Oe}),this.state=ae.FRAG_LOADING)))}break;case ae.WAITING_TRACK:s=this.tracks[this.trackId],s&&s.details&&(this.state=ae.IDLE);break;case ae.FRAG_LOADING_WAITING_RETRY:var Li=wi.now(),an=this.retryDate;C=this.media;var xc=C&&C.seeking;(!an||Li>=an||xc)&&(y.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ae.IDLE);break;case ae.WAITING_INIT_PTS:var Ii=this.waitingFragment;if(Ii){var Qn=Ii.frag.cc;if(this.initPTS[Qn]!==void 0)this.waitingFragment=null,this.state=ae.FRAG_LOADING,this.onFragLoaded(Ii);else if(this.videoTrackCC!==this.waitingVideoCC)y.logger.log("Waiting fragment cc ("+Qn+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Ps=x.bufferInfo(this.mediaBuffer,this.media.currentTime,E.maxBufferHole),Sc=lt(Ps.end,E.maxFragLookUpTolerance,Ii.frag);Sc<0&&(y.logger.log("Waiting fragment cc ("+Qn+") @ "+Ii.frag.start+" cancelled because another fragment at "+Ps.end+" is needed"),this.clearWaitingFragment())}}else this.state=ae.IDLE;break}},u.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=ae.IDLE)},u.onMediaAttached=function(t){var s=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),s.addEventListener("seeking",this.onvseeking),s.addEventListener("ended",this.onvended);var c=this.config;this.tracks&&c.autoStartLoad&&this.startLoad(c.startPosition)},u.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(y.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},u.onAudioTracksUpdated=function(t){y.logger.log("audio tracks updated"),this.tracks=t.audioTracks},u.onAudioTrackSwitching=function(t){var s=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=ae.PAUSED,s?this.setInterval(ls):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),s&&(this.audioSwitch=!0,this.state=ae.IDLE),this.tick()},u.onAudioTrackLoaded=function(t){var s=t.details,c=t.id,h=this.tracks[c],E=h.details,b=s.totalduration,C=0;if(y.logger.log("track "+c+" loaded ["+s.startSN+","+s.endSN+"],duration:"+b),s.live||E&&E.live?E&&s.fragments.length>0?(xe(E,s),C=s.fragments[0].start,s.PTSKnown?y.logger.log("live audio playlist sliding:"+C.toFixed(3)):y.logger.log("live audio playlist - outdated PTS, unknown sliding")):(s.PTSKnown=!1,y.logger.log("live audio playlist - first load, unknown sliding")):s.PTSKnown=!1,h.details=s,!this.startFragRequested){if(this.startPosition===-1){var O=s.startTimeOffset;Object(T.isFiniteNumber)(O)?(y.logger.log("start time offset found in playlist, adjust startPosition to "+O),this.startPosition=O):s.live?(this.startPosition=this.computeLivePosition(C,s),y.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ae.WAITING_TRACK&&(this.state=ae.IDLE),this.tick()},u.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE,this.tick())},u.onFragLoaded=function(t){var s=this.fragCurrent,c=t.frag;if(this.state===ae.FRAG_LOADING&&s&&c.type==="audio"&&c.level===s.level&&c.sn===s.sn){var h=this.tracks[this.trackId],E=h.details,b=E.totalduration,C=s.level,O=s.sn,P=s.cc,G=this.config.defaultAudioCodec||h.audioCodec||"mp4a.40.2",J=this.stats=t.stats;if(O==="initSegment")this.state=ae.IDLE,J.tparsed=J.tbuffered=wi.now(),E.initSegment.data=t.payload,this.hls.trigger(m.default.FRAG_BUFFERED,{stats:J,frag:s,id:"audio"}),this.tick();else{this.state=ae.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ve(this.hls,"audio"));var he=this.initPTS[P],Ae=E.initSegment?E.initSegment.data:[];if(he!==void 0){this.pendingBuffering=!0,y.logger.log("Demuxing "+O+" of ["+E.startSN+" ,"+E.endSN+"],track "+C);var Le=!1;this.demuxer.push(t.payload,Ae,G,null,s,b,Le,he)}else y.logger.log("Unknown video PTS for cc "+P+", waiting for video PTS before demuxing audio frag "+O+" of ["+E.startSN+" ,"+E.endSN+"],track "+C),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=ae.WAITING_INIT_PTS}}this.fragLoadError=0},u.onFragParsingInitSegment=function(t){var s=this.fragCurrent,c=t.frag;if(s&&t.id==="audio"&&c.sn===s.sn&&c.level===s.level&&this.state===ae.PARSING){var h=t.tracks,E;if(h.video&&delete h.video,E=h.audio,E){E.levelCodec=E.codec,E.id=t.id,this.hls.trigger(m.default.BUFFER_CODECS,h),y.logger.log("audio track:audio,container:"+E.container+",codecs[level/parsed]=["+E.levelCodec+"/"+E.codec+"]");var b=E.initSegment;if(b){var C={type:"audio",data:b,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[C]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.default.BUFFER_APPENDING,C))}this.tick()}}},u.onFragParsingData=function(t){var s=this,c=this.fragCurrent,h=t.frag;if(c&&t.id==="audio"&&t.type==="audio"&&h.sn===c.sn&&h.level===c.level&&this.state===ae.PARSING){var E=this.trackId,b=this.tracks[E],C=this.hls;Object(T.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+c.duration,t.endDTS=t.startDTS+c.duration),c.addElementaryStream(se.AUDIO),y.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),fe(b.details,c,t.startPTS,t.endPTS);var O=this.media,P=!1;if(this.audioSwitch)if(O&&O.readyState){var G=O.currentTime;y.logger.log("switching audio track : currentTime:"+G),G>=t.startPTS&&(y.logger.log("switching audio track : flushing all audio"),this.state=ae.BUFFER_FLUSHING,C.trigger(m.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),P=!0,this.audioSwitch=!1,C.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:E}))}else this.audioSwitch=!1,C.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:E});var J=this.pendingData;if(!J){y.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),C.trigger(m.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([t.data1,t.data2].forEach(function(he){he&&he.length&&J.push({type:t.type,data:he,parent:"audio",content:"data"})}),!P&&J.length&&(J.forEach(function(he){s.state===ae.PARSING&&(s.pendingBuffering=!0,s.hls.trigger(m.default.BUFFER_APPENDING,he))}),this.pendingData=[],this.appended=!0)),this.tick()}},u.onFragParsed=function(t){var s=this.fragCurrent,c=t.frag;s&&t.id==="audio"&&c.sn===s.sn&&c.level===s.level&&this.state===ae.PARSING&&(this.stats.tparsed=wi.now(),this.state=ae.PARSED,this._checkAppendedParsed())},u.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},u.onBufferCreated=function(t){var s=t.tracks.audio;s&&(this.mediaBuffer=s.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},u.onBufferAppended=function(t){if(t.parent==="audio"){var s=this.state;(s===ae.PARSING||s===ae.PARSED)&&(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},u._checkAppendedParsed=function(){if(this.state===ae.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent,s=this.stats,c=this.hls;if(t){this.fragPrevious=t,s.tbuffered=wi.now(),c.trigger(m.default.FRAG_BUFFERED,{stats:s,frag:t,id:"audio"});var h=this.mediaBuffer?this.mediaBuffer:this.media;h&&y.logger.log("audio buffered : "+Ze.toString(h.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,c.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ae.IDLE}this.tick()}},u.onError=function(t){var s=t.frag;if(!(s&&s.type!=="audio"))switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:var c=t.frag;if(c&&c.type!=="audio")break;if(!t.fatal){var h=this.fragLoadError;h?h++:h=1;var E=this.config;if(h<=E.fragLoadingMaxRetry){this.fragLoadError=h;var b=Math.min(Math.pow(2,h-1)*E.fragLoadingRetryDelay,E.fragLoadingMaxRetryTimeout);y.logger.warn("AudioStreamController: frag loading failed, retry in "+b+" ms"),this.retryDate=wi.now()+b,this.state=ae.FRAG_LOADING_WAITING_RETRY}else y.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ae.ERROR}break;case g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==ae.ERROR&&(this.state=t.fatal?ae.ERROR:ae.IDLE,y.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case g.ErrorDetails.BUFFER_FULL_ERROR:if(t.parent==="audio"&&(this.state===ae.PARSING||this.state===ae.PARSED)){var C=this.mediaBuffer,O=this.media.currentTime,P=C&&x.isBuffered(C,O)&&x.isBuffered(C,O+.5);if(P){var G=this.config;G.maxMaxBufferLength>=G.maxBufferLength&&(G.maxMaxBufferLength/=2,y.logger.warn("AudioStreamController: reduce max buffer length to "+G.maxMaxBufferLength+"s")),this.state=ae.IDLE}else y.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ae.BUFFER_FLUSHING,this.hls.trigger(m.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},u.onBufferFlushed=function(){var t=this,s=this.pendingData;s&&s.length?(y.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),s.forEach(function(c){t.hls.trigger(m.default.BUFFER_APPENDING,c)}),this.appended=!0,this.pendingData=[],this.state=ae.PARSED):(this.state=ae.IDLE,this.fragPrevious=null,this.tick())},wu(d,[{key:"state",set:function(t){if(this.state!==t){var s=this.state;this._state=t,y.logger.log("audio stream:"+s+"->"+t)}},get:function(){return this._state}}]),d}(Nt),Pu=Ou,us=function(){if(typeof window<"u"&&window.VTTCue)return window.VTTCue;var p="auto",d={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};function o(h){if(typeof h!="string")return!1;var E=d[h.toLowerCase()];return E?h.toLowerCase():!1}function t(h){if(typeof h!="string")return!1;var E=u[h.toLowerCase()];return E?h.toLowerCase():!1}function s(h){for(var E=1;E<arguments.length;E++){var b=arguments[E];for(var C in b)h[C]=b[C]}return h}function c(h,E,b){var C=this,O={};O.enumerable=!0,C.hasBeenReset=!1;var P="",G=!1,J=h,he=E,Ae=b,Le=null,Re="",Fe=!0,Ue="auto",Xe="start",gt=50,Gt="middle",Ct=50,yr="middle";Object.defineProperty(C,"id",s({},O,{get:function(){return P},set:function(Ge){P=""+Ge}})),Object.defineProperty(C,"pauseOnExit",s({},O,{get:function(){return G},set:function(Ge){G=!!Ge}})),Object.defineProperty(C,"startTime",s({},O,{get:function(){return J},set:function(Ge){if(typeof Ge!="number")throw new TypeError("Start time must be set to a number.");J=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"endTime",s({},O,{get:function(){return he},set:function(Ge){if(typeof Ge!="number")throw new TypeError("End time must be set to a number.");he=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"text",s({},O,{get:function(){return Ae},set:function(Ge){Ae=""+Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"region",s({},O,{get:function(){return Le},set:function(Ge){Le=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"vertical",s({},O,{get:function(){return Re},set:function(Ge){var mt=o(Ge);if(mt===!1)throw new SyntaxError("An invalid or illegal string was specified.");Re=mt,this.hasBeenReset=!0}})),Object.defineProperty(C,"snapToLines",s({},O,{get:function(){return Fe},set:function(Ge){Fe=!!Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"line",s({},O,{get:function(){return Ue},set:function(Ge){if(typeof Ge!="number"&&Ge!==p)throw new SyntaxError("An invalid number or illegal string was specified.");Ue=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"lineAlign",s({},O,{get:function(){return Xe},set:function(Ge){var mt=t(Ge);if(!mt)throw new SyntaxError("An invalid or illegal string was specified.");Xe=mt,this.hasBeenReset=!0}})),Object.defineProperty(C,"position",s({},O,{get:function(){return gt},set:function(Ge){if(Ge<0||Ge>100)throw new Error("Position must be between 0 and 100.");gt=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"positionAlign",s({},O,{get:function(){return Gt},set:function(Ge){var mt=t(Ge);if(!mt)throw new SyntaxError("An invalid or illegal string was specified.");Gt=mt,this.hasBeenReset=!0}})),Object.defineProperty(C,"size",s({},O,{get:function(){return Ct},set:function(Ge){if(Ge<0||Ge>100)throw new Error("Size must be between 0 and 100.");Ct=Ge,this.hasBeenReset=!0}})),Object.defineProperty(C,"align",s({},O,{get:function(){return yr},set:function(Ge){var mt=t(Ge);if(!mt)throw new SyntaxError("An invalid or illegal string was specified.");yr=mt,this.hasBeenReset=!0}})),C.displayState=void 0}return c.prototype.getCueAsHTML=function(){var h=window.WebVTT;return h.convertCueToDOMTree(window,this.text)},c}(),Du=function(){return{decode:function(u){if(!u)return"";if(typeof u!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(u))}}};function cs(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Du,this.regionList=[]}function Nu(p){function d(o,t,s,c){return(o|0)*3600+(t|0)*60+(s|0)+(c|0)/1e3}var u=p.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return u?u[3]?d(u[1],u[2],u[3].replace(":",""),u[4]):u[1]>59?d(u[1],u[2],0,u[4]):d(0,u[1],u[2],u[4]):null}function fs(){this.values=Object.create(null)}fs.prototype={set:function(d,u){!this.get(d)&&u!==""&&(this.values[d]=u)},get:function(d,u,o){return o?this.has(d)?this.values[d]:u[o]:this.has(d)?this.values[d]:u},has:function(d){return d in this.values},alt:function(d,u,o){for(var t=0;t<o.length;++t)if(u===o[t]){this.set(d,u);break}},integer:function(d,u){/^-?\d+$/.test(u)&&this.set(d,parseInt(u,10))},percent:function(d,u){return u.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(u=parseFloat(u),u>=0&&u<=100)?(this.set(d,u),!0):!1}};function ds(p,d,u,o){var t=o?p.split(o):[p];for(var s in t)if(typeof t[s]=="string"){var c=t[s].split(u);if(c.length===2){var h=c[0],E=c[1];d(h,E)}}}var Wn=new us(0,0,0),tn=Wn.align==="middle"?"middle":"center";function Fu(p,d,u){var o=p;function t(){var h=Nu(p);if(h===null)throw new Error("Malformed timestamp: "+o);return p=p.replace(/^[^\sa-zA-Z-]+/,""),h}function s(h,E){var b=new fs;ds(h,function(P,G){switch(P){case"region":for(var J=u.length-1;J>=0;J--)if(u[J].id===G){b.set(P,u[J].region);break}break;case"vertical":b.alt(P,G,["rl","lr"]);break;case"line":var he=G.split(","),Ae=he[0];b.integer(P,Ae),b.percent(P,Ae)&&b.set("snapToLines",!1),b.alt(P,Ae,["auto"]),he.length===2&&b.alt("lineAlign",he[1],["start",tn,"end"]);break;case"position":he=G.split(","),b.percent(P,he[0]),he.length===2&&b.alt("positionAlign",he[1],["start",tn,"end","line-left","line-right","auto"]);break;case"size":b.percent(P,G);break;case"align":b.alt(P,G,["start",tn,"end","left","right"]);break}},/:/,/\s/),E.region=b.get("region",null),E.vertical=b.get("vertical","");var C=b.get("line","auto");C==="auto"&&Wn.line===-1&&(C=-1),E.line=C,E.lineAlign=b.get("lineAlign","start"),E.snapToLines=b.get("snapToLines",!0),E.size=b.get("size",100),E.align=b.get("align",tn);var O=b.get("position","auto");O==="auto"&&Wn.position===50&&(O=E.align==="start"||E.align==="left"?0:E.align==="end"||E.align==="right"?100:50),E.position=O}function c(){p=p.replace(/^\s+/,"")}if(c(),d.startTime=t(),c(),p.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);p=p.substr(3),c(),d.endTime=t(),c(),s(p,d)}function hs(p){return p.replace(/<br(?: \/)?>/gi,`
`)}cs.prototype={parse:function(d){var u=this;d&&(u.buffer+=u.decoder.decode(d,{stream:!0}));function o(){var b=u.buffer,C=0;for(b=hs(b);C<b.length&&b[C]!=="\r"&&b[C]!==`
`;)++C;var O=b.substr(0,C);return b[C]==="\r"&&++C,b[C]===`
`&&++C,u.buffer=b.substr(C),O}function t(b){ds(b,function(C,O){},/:/)}try{var s;if(u.state==="INITIAL"){if(!/\r\n|\n/.test(u.buffer))return this;s=o();var c=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new Error("Malformed WebVTT signature.");u.state="HEADER"}for(var h=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(h?h=!1:s=o(),u.state){case"HEADER":/:/.test(s)?t(s):s||(u.state="ID");continue;case"NOTE":s||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){u.state="NOTE";break}if(!s)continue;if(u.cue=new us(0,0,""),u.state="CUE",s.indexOf("-->")===-1){u.cue.id=s;continue}case"CUE":try{Fu(s,u.cue,u.regionList)}catch{u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var E=s.indexOf("-->")!==-1;if(!s||E&&(h=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+=`
`),u.cue.text+=s;continue;case"BADCUE":s||(u.state="ID");continue}}}catch{u.state==="CUETEXT"&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state=u.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var d=this;try{if(d.buffer+=d.decoder.decode(),(d.cue||d.state==="HEADER")&&(d.buffer+=`

`,d.parse()),d.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(u){throw u}return d.onflush&&d.onflush(),this}};var Mu=cs;function Bu(p,d,u,o){for(var t=[],s,c,h,E,b,C=window.VTTCue||TextTrackCue,O=0;O<o.rows.length;O++)if(s=o.rows[O],h=!0,E=0,b="",!s.isEmpty()){for(var P=0;P<s.chars.length;P++)s.chars[P].uchar.match(/\s/)&&h?E++:(b+=s.chars[P].uchar,h=!1);s.cueStartTime=d,d===u&&(u+=1e-4),c=new C(d,u,hs(b.trim())),E>=16?E--:E++,navigator.userAgent.match(/Firefox\//)?c.line=O+1:c.line=O>7?O-2:O+1,c.align="left",c.position=Math.max(0,Math.min(100,100*(E/32))),t.push(c),p&&p.addCue(c)}return t}var gs={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ps=function(d){var u=d;return gs.hasOwnProperty(d)&&(u=gs[d]),String.fromCharCode(u)},er=15,mr=100,Uu={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Vu={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ku={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Gu={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Hu=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],$e;(function(p){p[p.ERROR=0]="ERROR",p[p.TEXT=1]="TEXT",p[p.WARNING=2]="WARNING",p[p.INFO=2]="INFO",p[p.DEBUG=3]="DEBUG",p[p.DATA=3]="DATA"})($e||($e={}));var ju=function(){function p(){this.time=null,this.verboseLevel=$e.ERROR}var d=p.prototype;return d.log=function(o,t){this.verboseLevel>=o&&y.logger.log(this.time+" ["+o+"] "+t)},p}(),Gr=function(d){for(var u=[],o=0;o<d.length;o++)u.push(d[o].toString(16));return u},vs=function(){function p(u,o,t,s,c){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=u||"white",this.underline=o||!1,this.italics=t||!1,this.background=s||"black",this.flash=c||!1}var d=p.prototype;return d.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},d.setStyles=function(o){for(var t=["foreground","underline","italics","background","flash"],s=0;s<t.length;s++){var c=t[s];o.hasOwnProperty(c)&&(this[c]=o[c])}},d.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},d.equals=function(o){return this.foreground===o.foreground&&this.underline===o.underline&&this.italics===o.italics&&this.background===o.background&&this.flash===o.flash},d.copy=function(o){this.foreground=o.foreground,this.underline=o.underline,this.italics=o.italics,this.background=o.background,this.flash=o.flash},d.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},p}(),Yu=function(){function p(u,o,t,s,c,h){this.uchar=void 0,this.penState=void 0,this.uchar=u||" ",this.penState=new vs(o,t,s,c,h)}var d=p.prototype;return d.reset=function(){this.uchar=" ",this.penState.reset()},d.setChar=function(o,t){this.uchar=o,this.penState.copy(t)},d.setPenState=function(o){this.penState.copy(o)},d.equals=function(o){return this.uchar===o.uchar&&this.penState.equals(o.penState)},d.copy=function(o){this.uchar=o.uchar,this.penState.copy(o.penState)},d.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},p}(),Wu=function(){function p(u){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var o=0;o<mr;o++)this.chars.push(new Yu);this.logger=u,this.pos=0,this.currPenState=new vs}var d=p.prototype;return d.equals=function(o){for(var t=!0,s=0;s<mr;s++)if(!this.chars[s].equals(o.chars[s])){t=!1;break}return t},d.copy=function(o){for(var t=0;t<mr;t++)this.chars[t].copy(o.chars[t])},d.isEmpty=function(){for(var o=!0,t=0;t<mr;t++)if(!this.chars[t].isEmpty()){o=!1;break}return o},d.setCursor=function(o){this.pos!==o&&(this.pos=o),this.pos<0?(this.logger.log($e.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>mr&&(this.logger.log($e.DEBUG,"Too large cursor position "+this.pos),this.pos=mr)},d.moveCursor=function(o){var t=this.pos+o;if(o>1)for(var s=this.pos+1;s<t+1;s++)this.chars[s].setPenState(this.currPenState);this.setCursor(t)},d.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},d.insertChar=function(o){o>=144&&this.backSpace();var t=ps(o);if(this.pos>=mr){this.logger.log($e.ERROR,"Cannot insert "+o.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},d.clearFromPos=function(o){var t;for(t=o;t<mr;t++)this.chars[t].reset()},d.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},d.clearToEndOfRow=function(){this.clearFromPos(this.pos)},d.getTextString=function(){for(var o=[],t=!0,s=0;s<mr;s++){var c=this.chars[s].uchar;c!==" "&&(t=!1),o.push(c)}return t?"":o.join("")},d.setPenStyles=function(o){this.currPenState.setStyles(o);var t=this.chars[this.pos];t.setPenState(this.currPenState)},p}(),zn=function(){function p(u){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var o=0;o<er;o++)this.rows.push(new Wu(u));this.logger=u,this.currRow=er-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var d=p.prototype;return d.reset=function(){for(var o=0;o<er;o++)this.rows[o].clear();this.currRow=er-1},d.equals=function(o){for(var t=!0,s=0;s<er;s++)if(!this.rows[s].equals(o.rows[s])){t=!1;break}return t},d.copy=function(o){for(var t=0;t<er;t++)this.rows[t].copy(o.rows[t])},d.isEmpty=function(){for(var o=!0,t=0;t<er;t++)if(!this.rows[t].isEmpty()){o=!1;break}return o},d.backSpace=function(){var o=this.rows[this.currRow];o.backSpace()},d.clearToEndOfRow=function(){var o=this.rows[this.currRow];o.clearToEndOfRow()},d.insertChar=function(o){var t=this.rows[this.currRow];t.insertChar(o)},d.setPen=function(o){var t=this.rows[this.currRow];t.setPenStyles(o)},d.moveCursor=function(o){var t=this.rows[this.currRow];t.moveCursor(o)},d.setCursor=function(o){this.logger.log($e.INFO,"setCursor: "+o);var t=this.rows[this.currRow];t.setCursor(o)},d.setPAC=function(o){this.logger.log($e.INFO,"pacData = "+JSON.stringify(o));var t=o.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var s=0;s<er;s++)this.rows[s].clear();var c=this.currRow+1-this.nrRollUpRows,h=this.lastOutputScreen;if(h){var E=h.rows[c].cueStartTime,b=this.logger.time;if(E&&b!==null&&E<b)for(var C=0;C<this.nrRollUpRows;C++)this.rows[t-this.nrRollUpRows+C+1].copy(h.rows[c+C])}}this.currRow=t;var O=this.rows[this.currRow];if(o.indent!==null){var P=o.indent,G=Math.max(P-1,0);O.setCursor(o.indent),o.color=O.chars[G].penState.foreground}var J={foreground:o.color,underline:o.underline,italics:o.italics,background:"black",flash:!1};this.setPen(J)},d.setBkgData=function(o){this.logger.log($e.INFO,"bkgData = "+JSON.stringify(o)),this.backSpace(),this.setPen(o),this.insertChar(32)},d.setRollUpRows=function(o){this.nrRollUpRows=o},d.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log($e.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log($e.TEXT,this.getDisplayText());var o=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(o,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log($e.INFO,"Rolling up")},d.getDisplayText=function(o){o=o||!1;for(var t=[],s="",c=-1,h=0;h<er;h++){var E=this.rows[h].getTextString();E&&(c=h+1,o?t.push("Row "+c+": '"+E+"'"):t.push(E.trim()))}return t.length>0&&(o?s="["+t.join(" | ")+"]":s=t.join(`
`)),s},d.getTextAndFormat=function(){return this.rows},p}(),ms=function(){function p(u,o,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=u,this.outputFilter=o,this.mode=null,this.verbose=0,this.displayedMemory=new zn(t),this.nonDisplayedMemory=new zn(t),this.lastOutputScreen=new zn(t),this.currRollUpRow=this.displayedMemory.rows[er-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=t}var d=p.prototype;return d.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[er-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},d.getHandler=function(){return this.outputFilter},d.setHandler=function(o){this.outputFilter=o},d.setPAC=function(o){this.writeScreen.setPAC(o)},d.setBkgData=function(o){this.writeScreen.setBkgData(o)},d.setMode=function(o){o!==this.mode&&(this.mode=o,this.logger.log($e.INFO,"MODE="+o),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=o)},d.insertChars=function(o){for(var t=0;t<o.length;t++)this.writeScreen.insertChar(o[t]);var s=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log($e.INFO,s+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log($e.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},d.ccRCL=function(){this.logger.log($e.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},d.ccBS=function(){this.logger.log($e.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},d.ccAOF=function(){},d.ccAON=function(){},d.ccDER=function(){this.logger.log($e.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},d.ccRU=function(o){this.logger.log($e.INFO,"RU("+o+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(o)},d.ccFON=function(){this.logger.log($e.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},d.ccRDC=function(){this.logger.log($e.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},d.ccTR=function(){this.logger.log($e.INFO,"TR"),this.setMode("MODE_TEXT")},d.ccRTD=function(){this.logger.log($e.INFO,"RTD"),this.setMode("MODE_TEXT")},d.ccEDM=function(){this.logger.log($e.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},d.ccCR=function(){this.logger.log($e.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},d.ccENM=function(){this.logger.log($e.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},d.ccEOC=function(){if(this.logger.log($e.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var o=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=o,this.writeScreen=this.nonDisplayedMemory,this.logger.log($e.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},d.ccTO=function(o){this.logger.log($e.INFO,"TO("+o+") - Tab Offset"),this.writeScreen.moveCursor(o)},d.ccMIDROW=function(o){var t={flash:!1};if(t.underline=o%2===1,t.italics=o>=46,t.italics)t.foreground="white";else{var s=Math.floor(o/2)-16,c=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=c[s]}this.logger.log($e.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},d.outputDataUpdate=function(o){o===void 0&&(o=!1);var t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),o&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))},d.cueSplitAtTime=function(o){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,o,this.displayedMemory),this.cueStartTime=o))},p}(),zu=function(){function p(u,o,t){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var s=new ju;this.channels=[null,new ms(u,o,s),new ms(u+1,t,s)],this.cmdHistory=As(),this.logger=s}var d=p.prototype;return d.getHandler=function(o){return this.channels[o].getHandler()},d.setHandler=function(o,t){this.channels[o].setHandler(t)},d.addData=function(o,t){var s,c,h,E=!1;this.logger.time=o;for(var b=0;b<t.length;b+=2)if(c=t[b]&127,h=t[b+1]&127,!(c===0&&h===0)){if(this.logger.log($e.DATA,"["+Gr([t[b],t[b+1]])+"] -> ("+Gr([c,h])+")"),s=this.parseCmd(c,h),s||(s=this.parseMidrow(c,h)),s||(s=this.parsePAC(c,h)),s||(s=this.parseBackgroundAttributes(c,h)),!s&&(E=this.parseChars(c,h),E)){var C=this.currentChannel;if(C&&C>0){var O=this.channels[C];O.insertChars(E)}else this.logger.log($e.WARNING,"No channel found yet. TEXT-MODE?")}!s&&!E&&this.logger.log($e.WARNING,"Couldn't parse cleaned data "+Gr([c,h])+" orig: "+Gr([t[b],t[b+1]]))}},d.parseCmd=function(o,t){var s=this.cmdHistory,c=(o===20||o===28||o===21||o===29)&&t>=32&&t<=47,h=(o===23||o===31)&&t>=33&&t<=35;if(!(c||h))return!1;if(ys(o,t,s))return si(null,null,s),this.logger.log($e.DEBUG,"Repeated command ("+Gr([o,t])+") is dropped"),!0;var E=o===20||o===21||o===23?1:2,b=this.channels[E];return o===20||o===21||o===28||o===29?t===32?b.ccRCL():t===33?b.ccBS():t===34?b.ccAOF():t===35?b.ccAON():t===36?b.ccDER():t===37?b.ccRU(2):t===38?b.ccRU(3):t===39?b.ccRU(4):t===40?b.ccFON():t===41?b.ccRDC():t===42?b.ccTR():t===43?b.ccRTD():t===44?b.ccEDM():t===45?b.ccCR():t===46?b.ccENM():t===47&&b.ccEOC():b.ccTO(t-32),si(o,t,s),this.currentChannel=E,!0},d.parseMidrow=function(o,t){var s=0;if((o===17||o===25)&&t>=32&&t<=47){if(o===17?s=1:s=2,s!==this.currentChannel)return this.logger.log($e.ERROR,"Mismatch channel in midrow parsing"),!1;var c=this.channels[s];return c?(c.ccMIDROW(t),this.logger.log($e.DEBUG,"MIDROW ("+Gr([o,t])+")"),!0):!1}return!1},d.parsePAC=function(o,t){var s,c=this.cmdHistory,h=(o>=17&&o<=23||o>=25&&o<=31)&&t>=64&&t<=127,E=(o===16||o===24)&&t>=64&&t<=95;if(!(h||E))return!1;if(ys(o,t,c))return si(null,null,c),!0;var b=o<=23?1:2;t>=64&&t<=95?s=b===1?Uu[o]:Ku[o]:s=b===1?Vu[o]:Gu[o];var C=this.channels[b];return C?(C.setPAC(this.interpretPAC(s,t)),si(o,t,c),this.currentChannel=b,!0):!1},d.interpretPAC=function(o,t){var s=t,c={color:null,italics:!1,indent:null,underline:!1,row:o};return t>95?s=t-96:s=t-64,c.underline=(s&1)===1,s<=13?c.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(s/2)]:s<=15?(c.italics=!0,c.color="white"):c.indent=Math.floor((s-16)/2)*4,c},d.parseChars=function(o,t){var s,c=null,h=null;if(o>=25?(s=2,h=o-8):(s=1,h=o),h>=17&&h<=19){var E=t;h===17?E=t+80:h===18?E=t+112:E=t+144,this.logger.log($e.INFO,"Special char '"+ps(E)+"' in channel "+s),c=[E]}else o>=32&&o<=127&&(c=t===0?[o]:[o,t]);if(c){var b=Gr(c);this.logger.log($e.DEBUG,"Char codes =  "+b.join(",")),si(o,t,this.cmdHistory)}return c},d.parseBackgroundAttributes=function(o,t){var s=(o===16||o===24)&&t>=32&&t<=47,c=(o===23||o===31)&&t>=45&&t<=47;if(!(s||c))return!1;var h,E={};o===16||o===24?(h=Math.floor((t-32)/2),E.background=Hu[h],t%2===1&&(E.background=E.background+"_semi")):t===45?E.background="transparent":(E.foreground="black",t===47&&(E.underline=!0));var b=o<=23?1:2,C=this.channels[b];return C.setBkgData(E),si(o,t,this.cmdHistory),!0},d.reset=function(){for(var o=0;o<Object.keys(this.channels).length;o++){var t=this.channels[o];t&&t.reset()}this.cmdHistory=As()},d.cueSplitAtTime=function(o){for(var t=0;t<this.channels.length;t++){var s=this.channels[t];s&&s.cueSplitAtTime(o)}},p}();function si(p,d,u){u.a=p,u.b=d}function ys(p,d,u){return u.a===p&&u.b===d}function As(){return{a:null,b:null}}var Es=zu,rn=function(){function p(u,o){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=u,this.trackName=o}var d=p.prototype;return d.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},d.newCue=function(o,t,s){(this.startTime===null||this.startTime>o)&&(this.startTime=o),this.endTime=t,this.screen=s,this.timelineController.createCaptionsTrack(this.trackName)},d.reset=function(){this.cueRanges=[]},p}(),$n=function(d,u,o){return d.substr(o||0,u.length)===u},$u=function(d){var u=parseInt(d.substr(-3)),o=parseInt(d.substr(-6,2)),t=parseInt(d.substr(-9,2)),s=d.length>9?parseInt(d.substr(0,d.indexOf(":"))):0;if(!Object(T.isFiniteNumber)(u)||!Object(T.isFiniteNumber)(o)||!Object(T.isFiniteNumber)(t)||!Object(T.isFiniteNumber)(s))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return u+=1e3*o,u+=60*1e3*t,u+=60*60*1e3*s,u},Xn=function(d){for(var u=5381,o=d.length;o;)u=u*33^d.charCodeAt(--o);return(u>>>0).toString()},Xu=function(d,u,o){var t=d[u],s=d[t.prevCC];if(!s||!s.new&&t.new){d.ccOffset=d.presentationOffset=t.start,t.new=!1;return}for(;s&&s.new;)d.ccOffset+=t.start-s.start,t.new=!1,t=s,s=d[t.prevCC];d.presentationOffset=o},qu={parse:function(d,u,o,t,s,c){var h=/\r\n|\n\r|\n|\r/g,E=Object(Ci.utf8ArrayToStr)(new Uint8Array(d)).trim().replace(h,`
`).split(`
`),b="00:00.000",C=0,O=0,P=0,G=[],J,he=!0,Ae=!1,Le=new Mu;Le.oncue=function(Re){var Fe=o[t],Ue=o.ccOffset;Fe&&Fe.new&&(O!==void 0?Ue=o.ccOffset=Fe.start:Xu(o,t,P)),P&&(Ue=P-o.presentationOffset),Ae&&(Re.startTime+=Ue-O,Re.endTime+=Ue-O),Re.id=Xn(Re.startTime.toString())+Xn(Re.endTime.toString())+Xn(Re.text),Re.text=decodeURIComponent(encodeURIComponent(Re.text)),Re.endTime>0&&G.push(Re)},Le.onparsingerror=function(Re){J=Re},Le.onflush=function(){if(J&&c){c(J);return}s(G)},E.forEach(function(Re){if(he)if($n(Re,"X-TIMESTAMP-MAP=")){he=!1,Ae=!0,Re.substr(16).split(",").forEach(function(Fe){$n(Fe,"LOCAL:")?b=Fe.substr(6):$n(Fe,"MPEGTS:")&&(C=parseInt(Fe.substr(7)))});try{u+(o[t].start*9e4||0)<0&&(u+=8589934592),C-=u,O=$u(b)/1e3,P=C/9e4}catch(Fe){Ae=!1,J=Fe}return}else Re===""&&(he=!1);Le.parse(Re+`
`)}),Le.flush()}},Zu=qu;function nn(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function Qu(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Ju=function(p){Qu(d,p);function d(o){var t;if(t=p.call(this,o,m.default.MEDIA_ATTACHING,m.default.MEDIA_DETACHING,m.default.FRAG_PARSING_USERDATA,m.default.FRAG_DECRYPTED,m.default.MANIFEST_LOADING,m.default.MANIFEST_LOADED,m.default.FRAG_LOADED,m.default.INIT_PTS_FOUND)||this,t.media=null,t.config=void 0,t.enabled=!0,t.Cues=void 0,t.textTracks=[],t.tracks=[],t.initPTS=[],t.unparsedVttFrags=[],t.captionsTracks={},t.nonNativeCaptionsTracks={},t.captionsProperties=void 0,t.cea608Parser1=void 0,t.cea608Parser2=void 0,t.lastSn=-1,t.prevCC=-1,t.vttCCs=_s(),t.hls=o,t.config=o.config,t.Cues=o.config.cueHandler,t.captionsProperties={textTrack1:{label:t.config.captionsTextTrack1Label,languageCode:t.config.captionsTextTrack1LanguageCode},textTrack2:{label:t.config.captionsTextTrack2Label,languageCode:t.config.captionsTextTrack2LanguageCode},textTrack3:{label:t.config.captionsTextTrack3Label,languageCode:t.config.captionsTextTrack3LanguageCode},textTrack4:{label:t.config.captionsTextTrack4Label,languageCode:t.config.captionsTextTrack4LanguageCode}},t.config.enableCEA708Captions){var s=new rn(nn(t),"textTrack1"),c=new rn(nn(t),"textTrack2"),h=new rn(nn(t),"textTrack3"),E=new rn(nn(t),"textTrack4");t.cea608Parser1=new Es(1,s,c),t.cea608Parser2=new Es(3,h,E)}return t}var u=d.prototype;return u.addCues=function(t,s,c,h,E){for(var b=!1,C=E.length;C--;){var O=E[C],P=tc(O[0],O[1],s,c);if(P>=0&&(O[0]=Math.min(O[0],s),O[1]=Math.max(O[1],c),b=!0,P/(c-s)>.5))return}if(b||E.push([s,c]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],s,c,h);else{var G=this.Cues.newCue(null,s,c,h);this.hls.trigger(m.default.CUES_PARSED,{type:"captions",cues:G,track:t})}},u.onInitPtsFound=function(t){var s=this,c=t.frag,h=t.id,E=t.initPTS,b=this.unparsedVttFrags;h==="main"&&(this.initPTS[c.cc]=E),b.length&&(this.unparsedVttFrags=[],b.forEach(function(C){s.onFragLoaded(C)}))},u.getExistingTrack=function(t){var s=this.media;if(s)for(var c=0;c<s.textTracks.length;c++){var h=s.textTracks[c];if(h[t])return h}return null},u.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},u.createNativeTrack=function(t){if(!this.captionsTracks[t]){var s=this.captionsProperties,c=this.captionsTracks,h=this.media,E=s[t],b=E.label,C=E.languageCode,O=this.getExistingTrack(t);if(O)c[t]=O,Kr(c[t]),ni(c[t],h);else{var P=this.createTextTrack("captions",b,C);P&&(P[t]=!0,c[t]=P)}}},u.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var s=this.captionsProperties[t];if(s){var c=s.label,h={_id:t,label:c,kind:"captions",default:s.media?!!s.media.default:!1,closedCaptions:s.media};this.nonNativeCaptionsTracks[t]=h,this.hls.trigger(m.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[h]})}}},u.createTextTrack=function(t,s,c){var h=this.media;if(h)return h.addTextTrack(t,s,c)},u.destroy=function(){p.prototype.destroy.call(this)},u.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},u.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(s){Kr(t[s]),delete t[s]}),this.nonNativeCaptionsTracks={}},u.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=_s(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},u._cleanTracks=function(){var t=this.media;if(t){var s=t.textTracks;if(s)for(var c=0;c<s.length;c++)Kr(s[c])}},u.onManifestLoaded=function(t){var s=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var c=t.subtitles||[],h=this.tracks&&c&&this.tracks.length===c.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var E=this.media?this.media.textTracks:[];this.tracks.forEach(function(C,O){var P;if(O<E.length){for(var G=null,J=0;J<E.length;J++)if(ec(E[J],C)){G=E[J];break}G&&(P=G)}P||(P=s.createTextTrack("subtitles",C.name,C.lang)),C.default?P.mode=s.hls.subtitleDisplay?"showing":"hidden":P.mode="disabled",s.textTracks.push(P)})}else if(!h&&this.tracks&&this.tracks.length){var b=this.tracks.map(function(C){return{label:C.name,kind:C.type.toLowerCase(),default:C.default,subtitleTrack:C}});this.hls.trigger(m.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:b})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(C){var O=/(?:CC|SERVICE)([1-4])/.exec(C.instreamId);if(O){var P="textTrack"+O[1],G=s.captionsProperties[P];G&&(G.label=C.name,C.lang&&(G.languageCode=C.lang),G.media=C)}})},u.onFragLoaded=function(t){var s=t.frag,c=t.payload,h=this.cea608Parser1,E=this.cea608Parser2,b=this.initPTS,C=this.lastSn,O=this.unparsedVttFrags;if(s.type==="main"){var P=s.sn;s.sn!==C+1&&h&&E&&(h.reset(),E.reset()),this.lastSn=P}else if(s.type==="subtitle")if(c.byteLength){if(!Object(T.isFiniteNumber)(b[s.cc])){O.push(t),b.length&&this.hls.trigger(m.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s});return}var G=s.decryptdata;(G==null||G.key==null||G.method!=="AES-128")&&this._parseVTTs(s,c)}else this.hls.trigger(m.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s})},u._parseVTTs=function(t,s){var c=this,h=this.hls,E=this.prevCC,b=this.textTracks,C=this.vttCCs;C[t.cc]||(C[t.cc]={start:t.start,prevCC:E,new:!0},this.prevCC=t.cc),Zu.parse(s,this.initPTS[t.cc],C,t.cc,function(O){if(c.config.renderTextTracksNatively){var P=b[t.level];if(P.mode==="disabled"){h.trigger(m.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});return}O.forEach(function(J){if(!P.cues.getCueById(J.id))try{if(P.addCue(J),!P.cues.getCueById(J.id))throw new Error("addCue is failed for: "+J)}catch(Ae){y.logger.debug("Failed occurred on adding cues: "+Ae);var he=new window.TextTrackCue(J.startTime,J.endTime,J.text);he.id=J.id,P.addCue(he)}})}else{var G=c.tracks[t.level].default?"default":"subtitles"+t.level;h.trigger(m.default.CUES_PARSED,{type:"subtitles",cues:O,track:G})}h.trigger(m.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(O){y.logger.log("Failed to parse VTT cue: "+O),h.trigger(m.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},u.onFragDecrypted=function(t){var s=t.frag,c=t.payload;if(s.type==="subtitle"){if(!Object(T.isFiniteNumber)(this.initPTS[s.cc])){this.unparsedVttFrags.push(t);return}this._parseVTTs(s,c)}},u.onFragParsingUserdata=function(t){var s=this.cea608Parser1,c=this.cea608Parser2;if(!(!this.enabled||!(s&&c)))for(var h=0;h<t.samples.length;h++){var E=t.samples[h].bytes;if(E){var b=this.extractCea608Data(E);s.addData(t.samples[h].pts,b[0]),c.addData(t.samples[h].pts,b[1])}}},u.extractCea608Data=function(t){for(var s=t[0]&31,c=2,h=[[],[]],E=0;E<s;E++){var b=t[c++],C=127&t[c++],O=127&t[c++],P=(4&b)!==0,G=3&b;C===0&&O===0||P&&(G===0||G===1)&&(h[G].push(C),h[G].push(O))}return h},d}(I);function ec(p,d){return p&&p.label===d.name&&!(p.textTrack1||p.textTrack2)}function tc(p,d,u,o){return Math.min(d,o)-Math.max(p,u)}function _s(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var rc=Ju;function bs(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function ic(p,d,u){return d&&bs(p.prototype,d),u&&bs(p,u),p}function nc(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var ac=function(p){nc(d,p);function d(o){var t;return t=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.MANIFEST_LOADED,m.default.SUBTITLE_TRACK_LOADED)||this,t.tracks=[],t.trackId=-1,t.media=null,t.stopped=!0,t.subtitleDisplay=!0,t.queuedDefaultTrack=null,t}var u=d.prototype;return u.destroy=function(){I.prototype.destroy.call(this)},u.onMediaAttached=function(t){var s=this;this.media=t.media,this.media&&(Object(T.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){s.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},u.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(T.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var t=qn(this.media.textTracks);t.forEach(function(s){Kr(s)}),this.subtitleTrack=-1,this.media=null}},u.onManifestLoaded=function(t){var s=this,c=t.subtitles||[];this.tracks=c,this.hls.trigger(m.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:c}),c.forEach(function(h){h.default&&(s.media?s.subtitleTrack=h.id:s.queuedDefaultTrack=h.id)})},u.onSubtitleTrackLoaded=function(t){var s=this,c=t.id,h=t.details,E=this.trackId,b=this.tracks,C=b[E];if(c>=b.length||c!==E||!C||this.stopped){this._clearReloadTimer();return}if(y.logger.log("subtitle track "+c+" loaded"),h.live){var O=Ke(C.details,h,t.stats.trequest);y.logger.log("Reloading live subtitle playlist in "+O+"ms"),this.timer=setTimeout(function(){s._loadCurrentTrack()},O)}else this._clearReloadTimer()},u.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},u.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},u._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},u._loadCurrentTrack=function(){var t=this.trackId,s=this.tracks,c=this.hls,h=s[t];t<0||!h||h.details&&!h.details.live||(y.logger.log("Loading subtitle track "+t),c.trigger(m.default.SUBTITLE_TRACK_LOADING,{url:h.url,id:t}))},u._toggleTrackModes=function(t){var s=this.media,c=this.subtitleDisplay,h=this.trackId;if(s){var E=qn(s.textTracks);if(t===-1)[].slice.call(E).forEach(function(O){O.mode="disabled"});else{var b=E[h];b&&(b.mode="disabled")}var C=E[t];C&&(C.mode=c?"showing":"hidden")}},u._setSubtitleTrackInternal=function(t){var s=this.hls,c=this.tracks;!Object(T.isFiniteNumber)(t)||t<-1||t>=c.length||(this.trackId=t,y.logger.log("Switching to subtitle track "+t),s.trigger(m.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},u._onTextTracksChanged=function(){if(!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var t=-1,s=qn(this.media.textTracks),c=0;c<s.length;c++)if(s[c].mode==="hidden")t=c;else if(s[c].mode==="showing"){t=c;break}this.subtitleTrack=t}},ic(d,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),d}(I);function qn(p){for(var d=[],u=0;u<p.length;u++){var o=p[u];o.kind==="subtitles"&&o.label&&d.push(p[u])}return d}var sc=ac,oc=r("./src/crypt/decrypter.js");function lc(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function uc(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var cc=window,Ts=cc.performance,Zn=500,fc=function(p){uc(d,p);function d(o,t){var s;return s=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.ERROR,m.default.KEY_LOADED,m.default.FRAG_LOADED,m.default.SUBTITLE_TRACKS_UPDATED,m.default.SUBTITLE_TRACK_SWITCH,m.default.SUBTITLE_TRACK_LOADED,m.default.SUBTITLE_FRAG_PROCESSED,m.default.LEVEL_UPDATED)||this,s.fragmentTracker=t,s.config=o.config,s.state=ae.STOPPED,s.tracks=[],s.tracksBuffered=[],s.currentTrackId=-1,s.decrypter=new oc.default(o,o.config),s.lastAVStart=0,s._onMediaSeeking=s.onMediaSeeking.bind(lc(s)),s}var u=d.prototype;return u.startLoad=function(){this.stopLoad(),this.state=ae.IDLE;var t=this.tracks[this.currentTrackId];t&&t.details&&(this.setInterval(Zn),this.tick())},u.onSubtitleFragProcessed=function(t){var s=t.frag,c=t.success;if(this.fragPrevious=s,this.state=ae.IDLE,!!c){var h=this.tracksBuffered[this.currentTrackId];if(h){for(var E,b=s.start,C=0;C<h.length;C++)if(b>=h[C].start&&b<=h[C].end){E=h[C];break}var O=s.start+s.duration;E?E.end=O:(E={start:b,end:O},h.push(E))}}},u.onMediaAttached=function(t){var s=t.media;this.media=s,s.addEventListener("seeking",this._onMediaSeeking),this.state=ae.IDLE},u.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(s){t.tracksBuffered[s.id]=[]}),this.media=null,this.state=ae.STOPPED)},u.onError=function(t){var s=t.frag;!s||s.type!=="subtitle"||(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=ae.IDLE)},u.onSubtitleTracksUpdated=function(t){var s=this;y.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(c){s.tracksBuffered[c.id]=[]})},u.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1){this.clearInterval();return}var s=this.tracks[this.currentTrackId];s&&s.details&&this.setInterval(Zn)},u.onSubtitleTrackLoaded=function(t){var s=t.id,c=t.details,h=this.currentTrackId,E=this.tracks,b=E[h];s>=E.length||s!==h||!b||(c.live&&we(b.details,c,this.lastAVStart),b.details=c,this.setInterval(Zn))},u.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE)},u.onFragLoaded=function(t){var s=this.fragCurrent,c=t.frag.decryptdata,h=t.frag,E=this.hls;if(this.state===ae.FRAG_LOADING&&s&&t.frag.type==="subtitle"&&s.sn===t.frag.sn&&t.payload.byteLength>0&&c&&c.key&&c.method==="AES-128"){var b=Ts.now();this.decrypter.decrypt(t.payload,c.key.buffer,c.iv.buffer,function(C){var O=Ts.now();E.trigger(m.default.FRAG_DECRYPTED,{frag:h,payload:C,stats:{tstart:b,tdecrypt:O}})})}},u.onLevelUpdated=function(t){var s=t.details,c=s.fragments;this.lastAVStart=c.length?c[0].start:0},u.doTick=function(){if(!this.media){this.state=ae.IDLE;return}switch(this.state){case ae.IDLE:{var t=this.config,s=this.currentTrackId,c=this.fragmentTracker,h=this.media,E=this.tracks;if(!E||!E[s]||!E[s].details)break;var b=t.maxBufferHole,C=t.maxFragLookUpTolerance,O=Math.min(t.maxBufferLength,t.maxMaxBufferLength),P=x.bufferedInfo(this._getBuffered(),h.currentTime,b),G=P.end,J=P.len,he=E[s].details,Ae=he.fragments,Le=Ae.length,Re=Ae[Le-1].start+Ae[Le-1].duration;if(J>O)return;var Fe,Ue=this.fragPrevious;G<Re?(Ue&&he.hasProgramDateTime&&(Fe=Dt(Ae,Ue.endProgramDateTime,C)),Fe||(Fe=vt(Ue,Ae,G,C))):Fe=Ae[Le-1],Fe&&Fe.encrypted?(y.logger.log("Loading key for "+Fe.sn),this.state=ae.KEY_LOADING,this.hls.trigger(m.default.KEY_LOADING,{frag:Fe})):Fe&&c.getState(Fe)===A.NOT_LOADED&&(this.fragCurrent=Fe,this.state=ae.FRAG_LOADING,this.hls.trigger(m.default.FRAG_LOADING,{frag:Fe}))}}},u.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,p.prototype.stopLoad.call(this)},u._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},u.onMediaSeeking=function(){if(this.fragCurrent){var t=this.media?this.media.currentTime:0,s=this.config.maxFragLookUpTolerance,c=this.fragCurrent.start-s,h=this.fragCurrent.start+this.fragCurrent.duration+s;(t<c||t>h)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE,this.tick())}},d}(Nt),oi;(function(p){p.WIDEVINE="com.widevine.alpha",p.PLAYREADY="com.microsoft.playready"})(oi||(oi={}));var dc=function(){return typeof window<"u"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function xs(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function hc(p,d,u){return d&&xs(p.prototype,d),u&&xs(p,u),p}function gc(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Ss=3,pc=function(d,u,o){var t={audioCapabilities:[],videoCapabilities:[]};return d.forEach(function(s){t.audioCapabilities.push({contentType:'audio/mp4; codecs="'+s+'"',robustness:o.audioRobustness||""})}),u.forEach(function(s){t.videoCapabilities.push({contentType:'video/mp4; codecs="'+s+'"',robustness:o.videoRobustness||""})}),[t]},vc=function(d,u,o,t){switch(d){case oi.WIDEVINE:return pc(u,o,t);default:throw new Error("Unknown key-system: "+d)}},mc=function(p){gc(d,p);function d(o){var t;return t=p.call(this,o,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHED,m.default.MANIFEST_PARSED)||this,t._widevineLicenseUrl=void 0,t._licenseXhrSetup=void 0,t._emeEnabled=void 0,t._requestMediaKeySystemAccess=void 0,t._drmSystemOptions=void 0,t._config=void 0,t._mediaKeysList=[],t._media=null,t._hasSetMediaKeys=!1,t._requestLicenseFailureCount=0,t.mediaKeysPromise=null,t._onMediaEncrypted=function(s){if(y.logger.log('Media is encrypted using "'+s.initDataType+'" init data type'),!t.mediaKeysPromise){y.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),t.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var c=function(E){t._media&&(t._attemptSetMediaKeys(E),t._generateRequestWithPreferredKeySession(s.initDataType,s.initData))};t.mediaKeysPromise.then(c).catch(c)},t._config=o.config,t._widevineLicenseUrl=t._config.widevineLicenseUrl,t._licenseXhrSetup=t._config.licenseXhrSetup,t._emeEnabled=t._config.emeEnabled,t._requestMediaKeySystemAccess=t._config.requestMediaKeySystemAccessFunc,t._drmSystemOptions=o.config.drmSystemOptions,t}var u=d.prototype;return u.getLicenseServerUrl=function(t){switch(t){case oi.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},u._attemptKeySystemAccess=function(t,s,c){var h=this,E=vc(t,s,c,this._drmSystemOptions);y.logger.log("Requesting encrypted media key-system access");var b=this.requestMediaKeySystemAccess(t,E);this.mediaKeysPromise=b.then(function(C){return h._onMediaKeySystemAccessObtained(t,C)}),b.catch(function(C){y.logger.error('Failed to obtain key-system "'+t+'" access:',C)})},u._onMediaKeySystemAccessObtained=function(t,s){var c=this;y.logger.log('Access for key-system "'+t+'" obtained');var h={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:s,mediaKeySystemDomain:t};this._mediaKeysList.push(h);var E=Promise.resolve().then(function(){return s.createMediaKeys()}).then(function(b){return h.mediaKeys=b,y.logger.log('Media-keys created for key-system "'+t+'"'),c._onMediaKeysCreated(),b});return E.catch(function(b){y.logger.error("Failed to create media-keys:",b)}),E},u._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(s){s.mediaKeysSession||(s.mediaKeysSession=s.mediaKeys.createSession(),t._onNewMediaKeySession(s.mediaKeysSession))})},u._onNewMediaKeySession=function(t){var s=this;y.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(c){s._onKeySessionMessage(t,c.message)},!1)},u._onKeySessionMessage=function(t,s){y.logger.log("Got EME message event, creating license request"),this._requestLicense(s,function(c){y.logger.log("Received license data (length: "+(c&&c.byteLength)+"), updating key-session"),t.update(c)})},u._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var s=this._mediaKeysList[0];if(!s||!s.mediaKeys){y.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}y.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(s.mediaKeys),this._hasSetMediaKeys=!0}},u._generateRequestWithPreferredKeySession=function(t,s){var c=this,h=this._mediaKeysList[0];if(!h){y.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(h.mediaKeysSessionInitialized){y.logger.warn("Key-Session already initialized but requested again");return}var E=h.mediaKeysSession;if(!E){y.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!s){y.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}y.logger.log('Generating key-session request for "'+t+'" init data type'),h.mediaKeysSessionInitialized=!0,E.generateRequest(t,s).then(function(){y.logger.debug("Key-session generation succeeded")}).catch(function(b){y.logger.error("Error generating key-session request:",b),c.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},u._createLicenseXhr=function(t,s,c){var h=new XMLHttpRequest,E=this._licenseXhrSetup;try{if(E)try{E(h,t)}catch{h.open("POST",t,!0),E(h,t)}h.readyState||h.open("POST",t,!0)}catch(b){throw new Error("issue setting up KeySystem license XHR "+b)}return h.responseType="arraybuffer",h.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,h,t,s,c),h},u._onLicenseRequestReadyStageChange=function(t,s,c,h){switch(t.readyState){case 4:if(t.status===200)this._requestLicenseFailureCount=0,y.logger.log("License request succeeded"),t.responseType!=="arraybuffer"&&y.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),h(t.response);else{if(y.logger.error("License Request XHR failed ("+s+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Ss){this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var E=Ss-this._requestLicenseFailureCount+1;y.logger.warn("Retrying license request, "+E+" attempts left"),this._requestLicense(c,h)}break}},u._generateLicenseRequestChallenge=function(t,s){switch(t.mediaKeySystemDomain){case oi.WIDEVINE:return s}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},u._requestLicense=function(t,s){y.logger.log("Requesting content license for key-system");var c=this._mediaKeysList[0];if(!c){y.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var h=this.getLicenseServerUrl(c.mediaKeySystemDomain),E=this._createLicenseXhr(h,t,s);y.logger.log("Sending license request to URL: "+h);var b=this._generateLicenseRequestChallenge(c,t);E.send(b)}catch(C){y.logger.error("Failure requesting DRM license: "+C),this.hls.trigger(m.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},u.onMediaAttached=function(t){if(this._emeEnabled){var s=t.media;this._media=s,s.addEventListener("encrypted",this._onMediaEncrypted)}},u.onMediaDetached=function(){var t=this._media,s=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(s.map(function(c){if(c.mediaKeysSession)return c.mediaKeysSession.close().catch(function(){})})).then(function(){return t.setMediaKeys(null)}).catch(function(){}))},u.onManifestParsed=function(t){if(this._emeEnabled){var s=t.levels.map(function(h){return h.audioCodec}),c=t.levels.map(function(h){return h.videoCodec});this._attemptKeySystemAccess(oi.WIDEVINE,s,c)}},hc(d,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),d}(I),yc=mc;function ks(p,d){var u=Object.keys(p);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(p);d&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(p,t).enumerable})),u.push.apply(u,o)}return u}function Cs(p){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?ks(Object(u),!0).forEach(function(o){Ac(p,o,u[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(u)):ks(Object(u)).forEach(function(o){Object.defineProperty(p,o,Object.getOwnPropertyDescriptor(u,o))})}return p}function Ac(p,d,u){return d in p?Object.defineProperty(p,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):p[d]=u,p}var Ec=Cs(Cs({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xu,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:cu,bufferController:hu,capLevelController:mu,fpsController:bu,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:dc,testBandwidth:!0},_c()),{},{subtitleStreamController:fc,subtitleTrackController:sc,timelineController:rc,audioStreamController:Pu,audioTrackController:Ru,emeController:yc});function _c(){return{cueHandler:l,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Rs(p,d){var u=Object.keys(p);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(p);d&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(p,t).enumerable})),u.push.apply(u,o)}return u}function ws(p){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?Rs(Object(u),!0).forEach(function(o){bc(p,o,u[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(u)):Rs(Object(u)).forEach(function(o){Object.defineProperty(p,o,Object.getOwnPropertyDescriptor(u,o))})}return p}function bc(p,d,u){return d in p?Object.defineProperty(p,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):p[d]=u,p}function Tt(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function Ls(p,d){for(var u=0;u<d.length;u++){var o=d[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}function Is(p,d,u){return d&&Ls(p.prototype,d),u&&Ls(p,u),p}function Tc(p,d){p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.__proto__=d}var Os=function(p){Tc(d,p),d.isSupported=function(){return Yn()},Is(d,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return m.default}},{key:"ErrorTypes",get:function(){return g.ErrorTypes}},{key:"ErrorDetails",get:function(){return g.ErrorDetails}},{key:"DefaultConfig",get:function(){return d.defaultConfig?d.defaultConfig:Ec},set:function(t){d.defaultConfig=t}}]);function d(o){var t;o===void 0&&(o={}),t=p.call(this)||this,t.config=void 0,t._autoLevelCapping=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var s=d.DefaultConfig;if((o.liveSyncDurationCount||o.liveMaxLatencyDurationCount)&&(o.liveSyncDuration||o.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=ws(ws({},s),o);var c=Tt(t),h=c.config;if(h.liveMaxLatencyDurationCount!==void 0&&h.liveMaxLatencyDurationCount<=h.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(h.liveMaxLatencyDuration!==void 0&&(h.liveSyncDuration===void 0||h.liveMaxLatencyDuration<=h.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(y.enableLogs)(h.debug),t._autoLevelCapping=-1;var E=t.abrController=new h.abrController(Tt(t)),b=new h.bufferController(Tt(t)),C=t.capLevelController=new h.capLevelController(Tt(t)),O=new h.fpsController(Tt(t)),P=new ct(Tt(t)),G=new B(Tt(t)),J=new ce(Tt(t)),he=new jn(Tt(t)),Ae=t.levelController=new Hn(Tt(t)),Le=new N(Tt(t)),Re=t.streamController=new qi(Tt(t),Le),Fe=[Ae,Re],Ue=h.audioStreamController;Ue&&Fe.push(new Ue(Tt(t),Le)),t.networkControllers=Fe;var Xe=[P,G,J,E,b,C,O,he,Le];if(Ue=h.audioTrackController,Ue){var gt=new Ue(Tt(t));t.audioTrackController=gt,Xe.push(gt)}if(Ue=h.subtitleTrackController,Ue){var Gt=new Ue(Tt(t));t.subtitleTrackController=Gt,Fe.push(Gt)}if(Ue=h.emeController,Ue){var Ct=new Ue(Tt(t));t.emeController=Ct,Xe.push(Ct)}return Ue=h.subtitleStreamController,Ue&&Fe.push(new Ue(Tt(t),Le)),Ue=h.timelineController,Ue&&Xe.push(new Ue(Tt(t))),t.coreComponents=Xe,t}var u=d.prototype;return u.destroy=function(){y.logger.log("destroy"),this.trigger(m.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},u.attachMedia=function(t){y.logger.log("attachMedia"),this.media=t,this.trigger(m.default.MEDIA_ATTACHING,{media:t})},u.detachMedia=function(){y.logger.log("detachMedia"),this.trigger(m.default.MEDIA_DETACHING),this.media=null},u.loadSource=function(t){t=f.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),y.logger.log("loadSource:"+t),this.url=t,this.trigger(m.default.MANIFEST_LOADING,{url:t})},u.startLoad=function(t){t===void 0&&(t=-1),y.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(s){s.startLoad(t)})},u.stopLoad=function(){y.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},u.swapAudioCodec=function(){y.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},u.recoverMediaError=function(){y.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},u.removeLevel=function(t,s){s===void 0&&(s=0),this.levelController.removeLevel(t,s)},Is(d,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){y.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){y.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){y.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){y.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){y.logger.log("set startLevel:"+t),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var s=!!t;s!==this.config.capLevelToPlayerSize&&(s?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=s)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){y.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,s=this.config.minAutoBitrate,c=t?t.length:0,h=0;h<c;h++){var E=t[h].realBitrate?Math.max(t[h].realBitrate,t[h].bitrate):t[h].bitrate;if(E>s)return h}return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,s=this.autoLevelCapping,c;return s===-1&&t&&t.length?c=t.length-1:c=s,c}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var s=this.audioTrackController;s&&(s.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var s=this.subtitleTrackController;s&&(s.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return t?t.subtitleDisplay:!1},set:function(t){var s=this.subtitleTrackController;s&&(s.subtitleDisplay=t)}}]),d}(Y);Os.defaultConfig=void 0},"./src/polyfills/number.js":function(a,i,r){r.r(i),r.d(i,"isFiniteNumber",function(){return l}),r.d(i,"MAX_SAFE_INTEGER",function(){return f});var l=Number.isFinite||function(g){return typeof g=="number"&&isFinite(g)},f=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(a,i,r){r.r(i),r.d(i,"getSelfScope",function(){return l});function l(){return typeof window>"u"?self:window}},"./src/utils/logger.js":function(a,i,r){r.r(i),r.d(i,"enableLogs",function(){return I}),r.d(i,"logger",function(){return K});var l=r("./src/utils/get-self-scope.js");function f(){}var g={trace:f,debug:f,log:f,warn:f,info:f,error:f},T=g;function m(F,j){return j="["+F+"] > "+j,j}var y=Object(l.getSelfScope)();function U(F){var j=y.console[F];return j?function(){for(var X=arguments.length,$=new Array(X),re=0;re<X;re++)$[re]=arguments[re];$[0]&&($[0]=m(F,$[0])),j.apply(y.console,$)}:f}function w(F){for(var j=arguments.length,X=new Array(j>1?j-1:0),$=1;$<j;$++)X[$-1]=arguments[$];X.forEach(function(re){T[re]=F[re]?F[re].bind(F):U(re)})}var I=function(j){if(y.console&&j===!0||typeof j=="object"){w(j,"debug","log","info","warn","error");try{T.log()}catch{T=g}}else T=g},K=T}}).default})})(Jl);var ft=pp(Jl.exports),vp=Nr.now,mp=Nr.listContainsIgnoreCase,yp=-1,Ap=16;S.register("PLAYBACK_FRAGMENT_CHANGED");S.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var eu=function(e){ip(a,e);var n=op(a);function a(){var i;ep(this,a);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=n.call.apply(n,[this].concat(l)),i.options.hlsPlayback=ha(ha({},i.defaultOptions),i.options.hlsPlayback),i._setInitialState(),i}return tp(a,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.18"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?yp:this._currentLevel},set:function(r){this._currentLevel=r,this.trigger(S.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"latency",get:function(){return this._hls.latency}},{key:"currentProgramDateTime",get:function(){return this._hls.playingDate}},{key:"_startTime",get:function(){return this._playbackType===He.LIVE&&this._playlistType!=="EVENT"?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return vp()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var r=this._localStartTimeCorrelation,l=this._now-r.local,f=(r.remote+l)/1e3;return Math.min(f,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var r=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return r;var l=this._localEndTimeCorrelation,f=this._now-l.local,g=(l.remote+f)/1e3;return Math.max(r-this._extrapolatedWindowDuration,Math.min(g,r))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return this._segmentTargetDuration===null?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"sourceMedia",get:function(){return this.options.src}},{key:"_setInitialState",value:function(){this._minDvrSize=typeof this.options.hlsMinimumDvrSize>"u"?60:this.options.hlsMinimumDvrSize,this._extrapolatedWindowNumSegments=!this.options.playback||typeof this.options.playback.extrapolatedWindowNumSegments>"u"?2:this.options.playback.extrapolatedWindowNumSegments,this._playbackType=He.VOD,this._lastTimeUpdate={current:0,total:0},this._lastDuration=null,this._playableRegionStartTime=0,this._localStartTimeCorrelation=null,this._localEndTimeCorrelation=null,this._playableRegionDuration=0,this._programDateTime=0,this._durationExcludesAfterLiveSyncPoint=!1,this._segmentTargetDuration=null,this._playlistType=null,this._recoverAttemptsRemaining=this.options.hlsRecoverAttempts||Ap}},{key:"_setup",value:function(){this._destroyHLSInstance(),this._createHLSInstance(),this._listenHLSEvents(),this._attachHLSMedia()}},{key:"_destroyHLSInstance",value:function(){this._hls&&(this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._setInitialState(),this._hls.destroy(),this._hls=null)}},{key:"_createHLSInstance",value:function(){var r=ha({},this.options.playback.hlsjsConfig);this._hls=new ft(r)}},{key:"_attachHLSMedia",value:function(){this._hls&&this._hls.attachMedia(this.el)}},{key:"_listenHLSEvents",value:function(){var r=this;this._hls&&(this._hls.once(ft.Events.MEDIA_ATTACHED,function(){r.options.hlsPlayback.preload&&r._hls.loadSource(r.options.src)}),this._hls.on(ft.Events.MANIFEST_PARSED,function(){return r._manifestParsed=!0}),this._hls.on(ft.Events.LEVEL_LOADED,function(l,f){return r._updatePlaybackType(l,f)}),this._hls.on(ft.Events.LEVEL_UPDATED,function(l,f){return r._onLevelUpdated(l,f)}),this._hls.on(ft.Events.LEVEL_SWITCHING,function(l,f){return r._onLevelSwitch(l,f)}),this._hls.on(ft.Events.FRAG_CHANGED,function(l,f){return r._onFragmentChanged(l,f)}),this._hls.on(ft.Events.FRAG_LOADED,function(l,f){return r._onFragmentLoaded(l,f)}),this._hls.on(ft.Events.FRAG_PARSING_METADATA,function(l,f){return r._onFragmentParsingMetadata(l,f)}),this._hls.on(ft.Events.ERROR,function(l,f){return r._onHLSJSError(l,f)}),this._hls.on(ft.Events.SUBTITLE_TRACK_LOADED,function(l,f){return r._onSubtitleLoaded(l,f)}),this._hls.on(ft.Events.SUBTITLE_TRACKS_UPDATED,function(){return r._ccTracksUpdated=!0}),this.bindCustomListeners())}},{key:"bindCustomListeners",value:function(){var r=this;this.customListeners.forEach(function(l){var f=l.eventName,g=l.once?"once":"on";f&&r._hls["".concat(g)](f,l.callback)})}},{key:"unbindCustomListeners",value:function(){var r=this;this.customListeners.forEach(function(l){var f=l.eventName;f&&r._hls.off(f,l.callback)})}},{key:"_onFragmentParsingMetadata",value:function(r,l){this.trigger(S.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:r,data:l})}},{key:"render",value:function(){return this._ready(),Rr(hr(a.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(S.PLAYBACK_READY,this.name))}},{key:"_recover",value:function(r,l,f){if(!this._recoveredDecodingError)this._recoveredDecodingError=!0,this._hls.recoverMediaError();else if(!this._recoveredAudioCodecError)this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else{ze.error("hlsjs: failed to recover",{evt:r,data:l}),f.level=nr.Levels.FATAL;var g=this.createError(f);this.trigger(S.PLAYBACK_ERROR,g),this.stop()}}},{key:"_setupSrc",value:function(r){}},{key:"_startTimeUpdateTimer",value:function(){var r=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval(function(){r._onDurationChange(),r._onTimeUpdate()},100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(r){var l=r>0?this._duration*(r/100):this._duration;this.seek(l)}},{key:"seek",value:function(r){r<0&&(ze.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),r=this.getDuration()),this.dvrEnabled&&this._updateDvr(r<this.getDuration()-3),r+=this._startTime,this.el.currentTime=r}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(r){this.trigger(S.PLAYBACK_DVR,r),this.trigger(S.PLAYBACK_STATS_ADD,{dvr:r})}},{key:"_updateSettings",value:function(){this._playbackType===He.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(S.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(r,l){var f={code:"".concat(l.type,"_").concat(l.details),description:"".concat(this.name," error: type: ").concat(l.type,", details: ").concat(l.details),raw:l},g;if(l.response&&(f.description+=", response: ".concat(JSON.stringify(l.response))),l.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,l.type){case ft.ErrorTypes.NETWORK_ERROR:switch(l.details){case ft.ErrorDetails.MANIFEST_LOAD_ERROR:case ft.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case ft.ErrorDetails.MANIFEST_PARSING_ERROR:case ft.ErrorDetails.LEVEL_LOAD_ERROR:case ft.ErrorDetails.LEVEL_LOAD_TIMEOUT:ze.error("hlsjs: unrecoverable network fatal error.",{evt:r,data:l}),g=this.createError(f),this.trigger(S.PLAYBACK_ERROR,g),this.stop();break;default:ze.warn("hlsjs: trying to recover from network error.",{evt:r,data:l}),f.level=nr.Levels.WARN,this._hls.startLoad();break}break;case ft.ErrorTypes.MEDIA_ERROR:ze.warn("hlsjs: trying to recover from media error.",{evt:r,data:l}),f.level=nr.Levels.WARN,this._recover(r,l,f);break;default:ze.error("hlsjs: could not recover from error.",{evt:r,data:l}),g=this.createError(f),this.trigger(S.PLAYBACK_ERROR,g),this.stop();break}else ze.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:r,data:l}),g=this.createError(f),this.trigger(S.PLAYBACK_ERROR,g),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(l)){ze.error("hlsjs: could not load decrypt key.",{evt:r,data:l}),g=this.createError(f),this.trigger(S.PLAYBACK_ERROR,g),this.stop();return}f.level=nr.Levels.WARN,ze.warn("hlsjs: non-fatal error occurred",{evt:r,data:l})}}},{key:"_keyIsDenied",value:function(r){return r.type===ft.ErrorTypes.NETWORK_ERROR&&r.details===ft.ErrorDetails.KEY_LOAD_ERROR&&r.response&&r.response.code>=400}},{key:"_onTimeUpdate",value:function(){var r={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},l=this._lastTimeUpdate&&r.current===this._lastTimeUpdate.current&&r.total===this._lastTimeUpdate.total;l||(this._lastTimeUpdate=r,this.trigger(S.PLAYBACK_TIMEUPDATE,r,this.name))}},{key:"_onDurationChange",value:function(){var r=this.getDuration();this._lastDuration!==r&&(this._lastDuration=r,Rr(hr(a.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var r=[],l=0,f=0;f<this.el.buffered.length;f++)r=[].concat(up(r),[{start:Math.max(0,this.el.buffered.start(f)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(f)-this._playableRegionStartTime)}]),this.el.currentTime>=r[f].start&&this.el.currentTime<=r[f].end&&(l=f);var g={start:r[l].start,current:r[l].end,total:this.getDuration()};this.trigger(S.PLAYBACK_PROGRESS,g,r)}}},{key:"load",value:function(r){this._stopTimeUpdateTimer(),this.options.src=r,this._setup()}},{key:"play",value:function(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),Rr(hr(a.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&Rr(hr(a.prototype),"stop",this).call(this),this._destroyHLSInstance()}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._destroyHLSInstance(),Rr(hr(a.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(r,l){this._playbackType=l.details.live?He.LIVE:He.VOD,this._onLevelUpdated(r,l),this._ccTracksUpdated&&this._playbackType===He.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map(function(r,l){return{id:l,level:r,label:"".concat(r.bitrate/1e3,"Kbps")}}),this.trigger(S.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(r,l){this._segmentTargetDuration=l.details.targetduration,this._playlistType=l.details.type||null;var f=!1,g=!1,T=l.details.fragments,m=this._playableRegionStartTime,y=this._playableRegionDuration;if(T.length!==0){if(T[0].rawProgramDateTime&&(this._programDateTime=T[0].rawProgramDateTime),this._playableRegionStartTime!==T[0].start&&(f=!0,this._playableRegionStartTime=T[0].start),f)if(!this._localStartTimeCorrelation)this._localStartTimeCorrelation={local:this._now,remote:(T[0].start+this._extrapolatedWindowDuration/2)*1e3};else{var U=this._localStartTimeCorrelation,w=this._now-U.local,I=(U.remote+w)/1e3;I<T[0].start?this._localStartTimeCorrelation={local:this._now,remote:T[0].start*1e3}:I>m+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:Math.max(T[0].start,m+this._extrapolatedWindowDuration)*1e3})}var K=l.details.totalduration;if(this._playbackType===He.LIVE){var F=l.details.targetduration,j=this.options.playback.hlsjsConfig||{},X=j.liveSyncDurationCount||ft.DefaultConfig.liveSyncDurationCount,$=F*X;$<=K?(K-=$,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}K!==this._playableRegionDuration&&(g=!0,this._playableRegionDuration=K);var re=T[0].start+K,ee=m+y,te=re!==ee;if(te)if(!this._localEndTimeCorrelation)this._localEndTimeCorrelation={local:this._now,remote:re*1e3};else{var se=this._localEndTimeCorrelation,pe=this._now-se.local,_e=(se.remote+pe)/1e3;_e>re?this._localEndTimeCorrelation={local:this._now,remote:re*1e3}:_e<re-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:(re-this._extrapolatedWindowDuration)*1e3}:_e>ee&&(this._localEndTimeCorrelation={local:this._now,remote:ee*1e3})}g&&this._onDurationChange(),f&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(r,l){this.trigger(S.Custom.PLAYBACK_FRAGMENT_CHANGED,l)}},{key:"_onFragmentLoaded",value:function(r,l){this.trigger(S.PLAYBACK_FRAGMENT_LOADED,l)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(S.PLAYBACK_SUBTITLE_AVAILABLE);var r=this._playbackType===He.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=r,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(r,l){this.levels.length||this._fillLevels(),this.trigger(S.PLAYBACK_LEVEL_SWITCH_END),this.trigger(S.PLAYBACK_LEVEL_SWITCH,l);var f=this._hls.levels[l.level];f&&(this.highDefinition=f.height>=720||f.bitrate/1e3>=2e3,this.trigger(S.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(S.PLAYBACK_BITRATE,{height:f.height,width:f.width,bandwidth:f.bitrate,bitrate:f.bitrate,level:l.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===He.LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===He.VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function(){return ft}}]),a}(gr);eu.canPlay=function(e,n){var a=e.split("?")[0].match(/.*\.(.*)$/)||[],i=a.length>1&&a[1].toLowerCase()==="m3u8"||mp(n,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!!(ft.isSupported()&&i)};/*!
 * v-clappr v3.2.0
 * Vue.js wrapper for Clappr
 * (c) 2023 Vinayak Kulkarni<inbox.vinayak@gmail.com>
 * Released under the MIT License
 */const Ep=Xa({name:"VClappr",props:{el:{type:String,required:!0,default:"player"},source:{type:String,required:!0,default:""},options:{type:Object,required:!1,default:()=>({width:"100%",height:"100%",autoPlay:!1,mute:!1,loop:!1,language:"en-US",playbackNotSupportedMessage:"Playback not supported",autoSeekFromUrl:!0,includeResetStyle:!0,playback:{preload:"metadata",disableContextMenu:!0,controls:!1,crossOrigin:null,playInline:!1,minimumDvrSize:null,externalTracks:[],hlsjsConfig:{},shakaConfiguration:{}},poster:"https://picsum.photos/3840/2160"})}},emits:["init","ready","resize","play","pause","stop","ended","seek","error","time-updated","volume-updated","subtitle-available"],setup(e,{emit:n}){const a=hf(null);pl(async()=>{await i()}),vl(()=>{var r;(r=a.value)==null||r.destroy(),a.value=null});const i=()=>new Promise((r,l)=>{e.el?(a.value=new $l({parentId:`#${e.el}`,source:e.source,plugins:[Oa,kg,Lg,Do,Fo,No,bg,wg,Dg,Fg,Mg,Wg,Xg,Do,No,Fo,eu],events:{onReady:f=>{n("ready",f)},onResize:f=>{n("resize",f)},onPlay:()=>{n("play",!0)},onPause:()=>{n("pause",!0)},onStop:f=>{n("stop",f)},onEnded:()=>{n("ended",!0)},onSeek:f=>{n("seek",f)},onError:f=>{n("error",f)},onTimeUpdate:f=>{n("time-updated",f)},onVolumeUpdate:f=>{n("volume-updated",f)},onSubtitleAvailable:f=>{n("subtitle-available",f)}},...e.options}),r("Player created!")):l("Root element not found")})}}),_p=(e,n)=>{const a=e.__vccOpts||e;for(const[i,r]of n)a[i]=r;return a},bp=["id"];function Tp(e,n,a,i,r,l){return gi(),Vi("div",{id:e.el},null,8,bp)}const xp=_p(Ep,[["render",Tp]]),Sp=Xa({name:"ExampleApp",components:{VClappr:xp,VGithubIcon:mh},setup(){const e=On({clappr:null,source:"http://clappr.io/highline.mp4",poster:"http://clappr.io/poster.png",options:{width:"100%",height:"100%",autoPlay:!1,mute:!1,loop:!1,language:"en-US",playbackNotSupportedMessage:"Playback not supported",autoSeekFromUrl:!0,includeResetStyle:!0,playback:{preload:"metadata",disableContextMenu:!0,controls:!1,crossOrigin:null,playInline:!1,minimumDvrSize:null,externalTracks:[],hlsjsConfig:{},shakaConfiguration:{}}}});return{state:e,onInit:I=>{e.clappr=I},onReady:I=>{console.log("onReady Event: ",I)},onResize:I=>{console.log("onResize Event: ",I)},onPlay:I=>{console.log("onPlay Event: ",I)},onPause:I=>{console.log("onPause Event: ",I)},onStop:I=>{console.log("onStop Event: ",I)},onEnded:I=>{console.log("onEnded Event: ",I)},onSeek:I=>{console.log("onSeek Event: ",I)},onError:I=>{console.log("onError Event: ",I)},onTimeUpdated:I=>{console.log("onTimeUpdate Event: ",I)},onVolumeUpdated:I=>{console.log("onVolumeUpdate Event: ",I)},onSubtitleAvailable:I=>{console.log("onSubtitleAvailable Event: ",I)}}}}),kp=(e,n)=>{const a=e.__vccOpts||e;for(const[i,r]of n)a[i]=r;return a},Cp={class:"w-screen h-screen bg-gradient-49"},Rp=sr("div",{class:"absolute bottom-4 right-4"},[sr("a",{href:"https://app.netlify.com/sites/v-clappr/deploys","aria-label":"View deploys on Netlify",target:"_blank",rel:"noopener noreferrer",class:"gray-400"},[sr("img",{src:"https://www.netlify.com/img/global/badges/netlify-color-accent.svg",alt:"Deploys by Netlify"})])],-1);function wp(e,n,a,i,r,l){const f=js("v-github-icon"),g=js("v-clappr");return gi(),Vi("main",Cp,[or(f,{url:"https://github.com/vinayakkulkarni/v-clappr"}),or(g,{el:"player",source:e.state.source,options:e.state.options,class:"mx-auto w-1/2 h-full",onInit:e.onInit,onReady:e.onReady,onResize:e.onResize,onPlay:e.onPlay,onPause:e.onPause,onStop:e.onStop,onEnded:e.onEnded,onSeek:e.onSeek,onError:e.onError,onTimeUpdated:e.onTimeUpdated,onVolumeUpdated:e.onVolumeUpdated,onSubtitleAvailable:e.onSubtitleAvailable},null,8,["source","options","onInit","onReady","onResize","onPlay","onPause","onStop","onEnded","onSeek","onError","onTimeUpdated","onVolumeUpdated","onSubtitleAvailable"]),Rp])}const Lp=kp(Sp,[["render",wp]]);rh(Lp).mount("#app");
